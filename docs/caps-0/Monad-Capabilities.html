<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Monad.Capabilities</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Monad.Capabilities.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">caps-0: Monadic capabilities with late binding</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Monad.Capabilities</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Capabilities</a></li><li><a href="#g:2">Default capabilities</a></li><li><a href="#g:3">Type-level checks</a></li><li><a href="#g:4">Utils</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Monadic capabilities are additional methods for a base monad. For instance, when
our base monad is <code><a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a></code>, our capabilities might include logging, networking,
database access, and so on.</p><p>This framework allows mutually recursive late-bound capabilities with runtime
dispatch and a type-safe interface.</p><p>A capability is defined as a record type with methods parametrized over a base
monad:</p><pre>data Logging m =
  Logging
    { _logError :: String -&gt; m (),
      _logDebug :: String -&gt; m ()
    }
</pre><p>We can define implementations as values of this record type:</p><pre>loggingDummy :: Monad m =&gt; CapImpl Logging '[] m
loggingDummy = CapImpl $ Logging (\_ -&gt; return ()) (\_ -&gt; return ())

loggingIO :: MonadIO m =&gt; CapImpl Logging '[] m
loggingIO = CapImpl $
  Logging
    { _logError = \msg -&gt; liftIO . putStrLn $ &quot;[Error] &quot; ++ msg
      _logDebug = \msg -&gt; liftIO . putStrLn $ &quot;[Debug] &quot; ++ msg
    }
</pre><p>The dictionary is wrapped in <code><a href="Monad-Capabilities.html#t:CapImpl" title="Monad.Capabilities">CapImpl</a></code> to guarantee that it is sufficiently
polymorphic (this is required to support simultaneous use of monadic actions in
negative position and capability extension).</p><p>Then we want to use this capability in the <code><a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a></code> monad (which is nothing more
but a synonym for <code><a href="../transformers-0.5.6.2/Control-Monad-Trans-Reader.html#t:ReaderT" title="Control.Monad.Trans.Reader">ReaderT</a></code> of <code><a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a></code>), and for this we define a helper
per method:</p><pre>logError :: HasCap Logging caps =&gt; String -&gt; CapsT caps m ()
logError message = withCap $ \cap -&gt; _logError cap message

logDebug :: HasCap Logging caps =&gt; String -&gt; CapsT caps m ()
logDebug message = withCap $ \cap -&gt; _logDebug cap message
</pre><p>We can define other capabilities in a similar manner:</p><pre>data Networking m =
  Networking
    { _sendRequest :: ByteString -&gt; m ByteString }

data FileStorage m =
  FileStorage
    { _readFile :: FilePath -&gt; m ByteString,
      _writeFile :: FilePath -&gt; ByteString -&gt; m ()
    }
</pre><p>Implementations of capabilities may depend on other capabilities, which are
listed in their signature. For instance, this is how we can define the
<code>FileStorage</code> capability using the <code>Logging</code> capability:</p><pre>fileStorageIO :: MonadIO m =&gt; CapImpl FileStorage '[Logging] m
fileStorageIO = CapImpl $
  FileStorage
    { _readFile = \path -&gt; do
        logDebug $ &quot;readFile &quot; ++ path
        lift $ ByteString.readFile path
      _writeFile = \path content -&gt; do
        logDebug $
          &quot;writeFile &quot; ++ path ++
          &quot; (&quot; ++ show (ByteString.length content) ++
          &quot; bytes)&quot;
        lift $ ByteString.writeFile path content
    }
</pre><p>Here the <code>fileStorageIO</code> implementation requires a logging capability,
but it's not specified which one.</p><p>When we decided what set of capabilities our application needs, we can put them
together in a <code><a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a></code> map and run the application with this map in a
<code><a href="../transformers-0.5.6.2/Control-Monad-Trans-Reader.html#t:ReaderT" title="Control.Monad.Trans.Reader">ReaderT</a></code> context:</p><pre>caps = buildCaps $
  AddCap loggingIO $
  AddCap fileStorageIO $
  BaseCaps emptyCaps

flip runReaderT caps $ do
  config &lt;- readFile &quot;config.yaml&quot;
  ...
</pre><p>Capabilities passed to <code><a href="Monad-Capabilities.html#v:buildCaps" title="Monad.Capabilities">buildCaps</a></code> can depend on each other. The order does not
matter (although it is reflected in the types), and duplicate capabilities are
disallowed.</p><p>We can override a capability locally:</p><pre>do
  config &lt;- readFile &quot;config.yaml&quot;
  withReaderT (overrideCap loggingDummy) $ do
    -- logging is disabled here
    writeFile &quot;config-backup.yaml&quot; config
    ...
</pre><p>or we can add more capabilities:</p><pre>do
  config &lt;- readFile &quot;config.yaml&quot;
  networkingImpl &lt;- parseNetworkingConfig config
  withReaderT (addCap networkingImpl) $ do
    -- networking capability added
    resp &lt;- sendRequest req
    ...
</pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Capabilities">Capabilities</a> (caps :: [CapK]) (m :: MonadK)</li><li class="src short"><span class="keyword">type</span> <a href="#t:CapsT">CapsT</a> caps m = <a href="../transformers-0.5.6.2/Control-Monad-Trans-Reader.html#t:ReaderT" title="Control.Monad.Trans.Reader">ReaderT</a> (<a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m) m</li><li class="src short"><a href="#v:emptyCaps">emptyCaps</a> :: <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> '[] m</li><li class="src short"><a href="#v:buildCaps">buildCaps</a> :: <span class="keyword">forall</span> caps m. <a href="Monad-Capabilities.html#t:CapabilitiesBuilder" title="Monad.Capabilities">CapabilitiesBuilder</a> caps caps m -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m</li><li class="src short"><span class="keyword">data</span> <a href="#t:CapabilitiesBuilder">CapabilitiesBuilder</a> (allCaps :: [CapK]) (caps :: [CapK]) (m :: MonadK) <span class="keyword">where</span><ul class="subs"><li><a href="#v:AddCap">AddCap</a> :: (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> cap, <a href="Monad-Capabilities.html#t:HasCaps" title="Monad.Capabilities">HasCaps</a> icaps allCaps, <a href="Monad-Capabilities.html#t:HasNoCap" title="Monad.Capabilities">HasNoCap</a> cap caps) =&gt; <a href="Monad-Capabilities.html#t:CapImpl" title="Monad.Capabilities">CapImpl</a> cap icaps m -&gt; <a href="Monad-Capabilities.html#t:CapabilitiesBuilder" title="Monad.Capabilities">CapabilitiesBuilder</a> allCaps caps m -&gt; <a href="Monad-Capabilities.html#t:CapabilitiesBuilder" title="Monad.Capabilities">CapabilitiesBuilder</a> allCaps (cap ': caps) m</li><li><a href="#v:BaseCaps">BaseCaps</a> :: <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m -&gt; <a href="Monad-Capabilities.html#t:CapabilitiesBuilder" title="Monad.Capabilities">CapabilitiesBuilder</a> allCaps caps m</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:CapImpl">CapImpl</a> cap icaps m <span class="keyword">where</span><ul class="subs"><li><a href="#v:CapImpl">CapImpl</a> :: WithSpine icaps =&gt; {..} -&gt; <a href="Monad-Capabilities.html#t:CapImpl" title="Monad.Capabilities">CapImpl</a> cap icaps m</li></ul></li><li class="src short"><a href="#v:getCap">getCap</a> :: <span class="keyword">forall</span> cap m caps. (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> cap, <a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> cap caps) =&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m -&gt; cap (<a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps m)</li><li class="src short"><a href="#v:overrideCap">overrideCap</a> :: (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> cap, <a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> cap caps, <a href="Monad-Capabilities.html#t:HasCaps" title="Monad.Capabilities">HasCaps</a> icaps caps) =&gt; <a href="Monad-Capabilities.html#t:CapImpl" title="Monad.Capabilities">CapImpl</a> cap icaps m -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m</li><li class="src short"><a href="#v:addCap">addCap</a> :: (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> cap, <a href="Monad-Capabilities.html#t:HasNoCap" title="Monad.Capabilities">HasNoCap</a> cap caps, <a href="Monad-Capabilities.html#t:HasCaps" title="Monad.Capabilities">HasCaps</a> icaps (cap ': caps)) =&gt; <a href="Monad-Capabilities.html#t:CapImpl" title="Monad.Capabilities">CapImpl</a> cap icaps m -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> (cap ': caps) m</li><li class="src short"><a href="#v:insertCap">insertCap</a> :: (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> cap, <a href="Monad-Capabilities.html#t:HasCaps" title="Monad.Capabilities">HasCaps</a> icaps (cap ': caps)) =&gt; <a href="Monad-Capabilities.html#t:CapImpl" title="Monad.Capabilities">CapImpl</a> cap icaps m -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> (cap ': caps) m</li><li class="src short"><a href="#v:withCap">withCap</a> :: (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> cap, <a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> cap caps) =&gt; (cap (<a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps m) -&gt; <a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps m a) -&gt; <a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps m a</li><li class="src short"><a href="#v:checkCap">checkCap</a> :: <span class="keyword">forall</span> cap caps m. <a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> cap =&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m -&gt; <a href="Monad-Capabilities.html#t:HasCapDecision" title="Monad.Capabilities">HasCapDecision</a> cap caps</li><li class="src short"><a href="#v:adjustCap">adjustCap</a> :: <span class="keyword">forall</span> cap caps m. (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> cap, <a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> cap caps) =&gt; (<span class="keyword">forall</span> caps'. cap (<a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps' m) -&gt; cap (<a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps' m)) -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Context">Context</a> x (m :: MonadK) = <a href="#v:Context">Context</a> x</li><li class="src short"><span class="keyword">class</span> (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> x, <a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> (<a href="Monad-Capabilities.html#t:Context" title="Monad.Capabilities">Context</a> x) caps) =&gt; <a href="#t:HasContext">HasContext</a> x caps</li><li class="src short"><a href="#v:newContext">newContext</a> :: <span class="keyword">forall</span> x m. x -&gt; <a href="Monad-Capabilities.html#t:CapImpl" title="Monad.Capabilities">CapImpl</a> (<a href="Monad-Capabilities.html#t:Context" title="Monad.Capabilities">Context</a> x) '[] m</li><li class="src short"><a href="#v:askContext">askContext</a> :: (<a href="Monad-Capabilities.html#t:HasContext" title="Monad.Capabilities">HasContext</a> x caps, <a href="../base-4.12.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m) =&gt; <a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps m x</li><li class="src short"><a href="#v:localContext">localContext</a> :: <span class="keyword">forall</span> x caps m a. <a href="Monad-Capabilities.html#t:HasContext" title="Monad.Capabilities">HasContext</a> x caps =&gt; (x -&gt; x) -&gt; <a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps m a -&gt; <a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps m a</li><li class="src short"><span class="keyword">type family</span> <a href="#t:HasCap">HasCap</a> cap caps :: <a href="../base-4.12.0.0/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:HasCaps">HasCaps</a> icaps caps :: <a href="../base-4.12.0.0/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:HasNoCap">HasNoCap</a> cap caps :: <a href="../base-4.12.0.0/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">data</span> <a href="#t:HasCapDecision">HasCapDecision</a> cap caps <span class="keyword">where</span><ul class="subs"><li><a href="#v:HasNoCap">HasNoCap</a> :: <a href="Monad-Capabilities.html#t:HasNoCap" title="Monad.Capabilities">HasNoCap</a> cap caps =&gt; <a href="Monad-Capabilities.html#t:HasCapDecision" title="Monad.Capabilities">HasCapDecision</a> cap caps</li><li><a href="#v:HasCap">HasCap</a> :: <a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> cap caps =&gt; <a href="Monad-Capabilities.html#t:HasCapDecision" title="Monad.Capabilities">HasCapDecision</a> cap caps</li></ul></li><li class="src short"><a href="#v:makeCap">makeCap</a> :: <a href="../template-haskell-2.14.0.0/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a> -&gt; <a href="../template-haskell-2.14.0.0/Language-Haskell-TH-Lib-Internal.html#t:DecsQ" title="Language.Haskell.TH.Lib.Internal">DecsQ</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Capabilities</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Capabilities" class="def">Capabilities</a> (caps :: [CapK]) (m :: MonadK) <a href="src/Monad.Capabilities.html#Capabilities" class="link">Source</a> <a href="#t:Capabilities" class="selflink">#</a></p><div class="doc"><p><code><code><a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a></code> caps m</code> is a map of capabilities <code>caps</code> over a base monad
 <code>m</code>. Consider the following capabilities:</p><pre>data X m = X (String -&gt; m String)
data Y m = Y (Int -&gt; m Bool)
</pre><p>We can construct a map of capabilities with the following type:</p><pre>capsXY :: Capabilities '[X, Y] IO
</pre><p>In this case, <code>capsXY</code> would be a map with two elements, one at key <code>X</code> and
 one at key <code>Y</code>. The types of capabilities themselves serve as keys.</p><p><code><a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a></code> is a heterogeneous collection, meaning that its values have
 different types. The type of a value is determined by the key:</p><pre>
 X:   X (\_ -&gt; return &quot;hi&quot;) :: X (CapsT '[X, Y] IO)
 Y:   Y (\_ -&gt; return True) :: Y (CapsT '[X, Y] IO)
----  ---------------------    --------------------
keys         values              types of values
</pre><p>Notice that stored dictionaries are parametrized not just by the base monad
 <code>IO</code>, but with the <code><a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a></code> transformer on top. This means that each
 capability has access to all other capabilities and itself.</p></div><div class="subs instances"><details id="i:Capabilities" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Capabilities:Show:1"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m)</span> <a href="src/Monad.Capabilities.html#line-230" class="link">Source</a> <a href="#t:Capabilities" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Capabilities:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Monad-Capabilities.html">Monad.Capabilities</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:CapsT" class="def">CapsT</a> caps m = <a href="../transformers-0.5.6.2/Control-Monad-Trans-Reader.html#t:ReaderT" title="Control.Monad.Trans.Reader">ReaderT</a> (<a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m) m <a href="src/Monad.Capabilities.html#CapsT" class="link">Source</a> <a href="#t:CapsT" class="selflink">#</a></p><div class="doc"><p>The <code><a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a></code> transformer adds access to capabilities. This is a convenience
 synonym for <code><a href="../transformers-0.5.6.2/Control-Monad-Trans-Reader.html#t:ReaderT" title="Control.Monad.Trans.Reader">ReaderT</a></code> of <code><a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a></code>, and all <code><a href="../transformers-0.5.6.2/Control-Monad-Trans-Reader.html#t:ReaderT" title="Control.Monad.Trans.Reader">ReaderT</a></code> functions
 (<code><a href="../transformers-0.5.6.2/Control-Monad-Trans-Reader.html#v:runReaderT" title="Control.Monad.Trans.Reader">runReaderT</a></code>, <code><a href="../transformers-0.5.6.2/Control-Monad-Trans-Reader.html#v:withReaderT" title="Control.Monad.Trans.Reader">withReaderT</a></code>) can be used with it.</p></div></div><div class="top"><p class="src"><a id="v:emptyCaps" class="def">emptyCaps</a> :: <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> '[] m <a href="src/Monad.Capabilities.html#emptyCaps" class="link">Source</a> <a href="#v:emptyCaps" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:buildCaps" class="def">buildCaps</a> :: <span class="keyword">forall</span> caps m. <a href="Monad-Capabilities.html#t:CapabilitiesBuilder" title="Monad.Capabilities">CapabilitiesBuilder</a> caps caps m -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m <a href="src/Monad.Capabilities.html#buildCaps" class="link">Source</a> <a href="#v:buildCaps" class="selflink">#</a></p><div class="doc"><p>Build a map of capabilities from individual implementations:</p><pre>capsXY :: Capabilities '[X, Y] IO
capsXY = buildCaps $
    AddCap xImpl $
    AddCap yImpl $
    BaseCaps emptyCaps
</pre></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:CapabilitiesBuilder" class="def">CapabilitiesBuilder</a> (allCaps :: [CapK]) (caps :: [CapK]) (m :: MonadK) <span class="keyword">where</span> <a href="src/Monad.Capabilities.html#CapabilitiesBuilder" class="link">Source</a> <a href="#t:CapabilitiesBuilder" class="selflink">#</a></p><div class="doc"><p><code><a href="Monad-Capabilities.html#t:CapabilitiesBuilder" title="Monad.Capabilities">CapabilitiesBuilder</a></code> is a type to extend capabilities.</p><p>The <code>allCaps</code> parameter is a list of capabilities that will be provided to
 <code><a href="Monad-Capabilities.html#v:buildCaps" title="Monad.Capabilities">buildCaps</a></code> eventually, when the building process is done. The <code>caps</code>
 parameter is the part of capabilities that was constructed so far. The
 builder is considered complete when <code>allCaps ~ caps</code>, only then it can be
 passed to <code><a href="Monad-Capabilities.html#v:buildCaps" title="Monad.Capabilities">buildCaps</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:AddCap" class="def">AddCap</a> :: (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> cap, <a href="Monad-Capabilities.html#t:HasCaps" title="Monad.Capabilities">HasCaps</a> icaps allCaps, <a href="Monad-Capabilities.html#t:HasNoCap" title="Monad.Capabilities">HasNoCap</a> cap caps) =&gt; <a href="Monad-Capabilities.html#t:CapImpl" title="Monad.Capabilities">CapImpl</a> cap icaps m -&gt; <a href="Monad-Capabilities.html#t:CapabilitiesBuilder" title="Monad.Capabilities">CapabilitiesBuilder</a> allCaps caps m -&gt; <a href="Monad-Capabilities.html#t:CapabilitiesBuilder" title="Monad.Capabilities">CapabilitiesBuilder</a> allCaps (cap ': caps) m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:BaseCaps" class="def">BaseCaps</a> :: <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m -&gt; <a href="Monad-Capabilities.html#t:CapabilitiesBuilder" title="Monad.Capabilities">CapabilitiesBuilder</a> allCaps caps m</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:CapImpl" class="def">CapImpl</a> cap icaps m <span class="keyword">where</span> <a href="src/Monad.Capabilities.html#CapImpl" class="link">Source</a> <a href="#t:CapImpl" class="selflink">#</a></p><div class="doc"><p>The <code><a href="Monad-Capabilities.html#t:CapImpl" title="Monad.Capabilities">CapImpl</a></code> newtype guarantees that the wrapped capability implementation
 is sufficiently polymorphic so that required subtyping properties hold in
 methods that take monadic actions as input (negative position).</p><p>This rules out using <code><a href="Monad-Capabilities.html#v:addCap" title="Monad.Capabilities">addCap</a></code>, <code><a href="Monad-Capabilities.html#v:insertCap" title="Monad.Capabilities">insertCap</a></code>, and <code><a href="Monad-Capabilities.html#v:buildCaps" title="Monad.Capabilities">buildCaps</a></code> inside capability
 implementations in an unsafe manner.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CapImpl" class="def">CapImpl</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src">:: WithSpine icaps</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src">=&gt; { <a id="v:getCapImpl" class="def">getCapImpl</a> :: <span class="keyword">forall</span> caps. <a href="Monad-Capabilities.html#t:HasCaps" title="Monad.Capabilities">HasCaps</a> icaps caps =&gt; cap (<a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps m)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src">&nbsp;&nbsp;&nbsp;} -&gt; <a href="Monad-Capabilities.html#t:CapImpl" title="Monad.Capabilities">CapImpl</a> cap icaps m</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:getCap" class="def">getCap</a> :: <span class="keyword">forall</span> cap m caps. (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> cap, <a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> cap caps) =&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m -&gt; cap (<a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps m) <a href="src/Monad.Capabilities.html#getCap" class="link">Source</a> <a href="#v:getCap" class="selflink">#</a></p><div class="doc"><p>Lookup a capability in a <code><a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a></code> map. The <code><a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a></code> constraint
 guarantees that the lookup does not fail.</p></div></div><div class="top"><p class="src"><a id="v:overrideCap" class="def">overrideCap</a> :: (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> cap, <a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> cap caps, <a href="Monad-Capabilities.html#t:HasCaps" title="Monad.Capabilities">HasCaps</a> icaps caps) =&gt; <a href="Monad-Capabilities.html#t:CapImpl" title="Monad.Capabilities">CapImpl</a> cap icaps m -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m <a href="src/Monad.Capabilities.html#overrideCap" class="link">Source</a> <a href="#v:overrideCap" class="selflink">#</a></p><div class="doc"><p>Override the implementation of an existing capability.</p></div></div><div class="top"><p class="src"><a id="v:addCap" class="def">addCap</a> :: (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> cap, <a href="Monad-Capabilities.html#t:HasNoCap" title="Monad.Capabilities">HasNoCap</a> cap caps, <a href="Monad-Capabilities.html#t:HasCaps" title="Monad.Capabilities">HasCaps</a> icaps (cap ': caps)) =&gt; <a href="Monad-Capabilities.html#t:CapImpl" title="Monad.Capabilities">CapImpl</a> cap icaps m -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> (cap ': caps) m <a href="src/Monad.Capabilities.html#addCap" class="link">Source</a> <a href="#v:addCap" class="selflink">#</a></p><div class="doc"><p>Extend the set of capabilities. In case the capability is already present,
 a type error occurs.</p></div></div><div class="top"><p class="src"><a id="v:insertCap" class="def">insertCap</a> :: (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> cap, <a href="Monad-Capabilities.html#t:HasCaps" title="Monad.Capabilities">HasCaps</a> icaps (cap ': caps)) =&gt; <a href="Monad-Capabilities.html#t:CapImpl" title="Monad.Capabilities">CapImpl</a> cap icaps m -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> (cap ': caps) m <a href="src/Monad.Capabilities.html#insertCap" class="link">Source</a> <a href="#v:insertCap" class="selflink">#</a></p><div class="doc"><p>Extend the set of capabilities. In case the capability is already present,
 it will be overriden (as with <code><a href="Monad-Capabilities.html#v:overrideCap" title="Monad.Capabilities">overrideCap</a></code>), but occur twice in the type.</p></div></div><div class="top"><p class="src"><a id="v:withCap" class="def">withCap</a> :: (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> cap, <a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> cap caps) =&gt; (cap (<a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps m) -&gt; <a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps m a) -&gt; <a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps m a <a href="src/Monad.Capabilities.html#withCap" class="link">Source</a> <a href="#v:withCap" class="selflink">#</a></p><div class="doc"><p>Extract a capability from <code><a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a></code> and provide it to a continuation.</p></div></div><div class="top"><p class="src"><a id="v:checkCap" class="def">checkCap</a> :: <span class="keyword">forall</span> cap caps m. <a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> cap =&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m -&gt; <a href="Monad-Capabilities.html#t:HasCapDecision" title="Monad.Capabilities">HasCapDecision</a> cap caps <a href="src/Monad.Capabilities.html#checkCap" class="link">Source</a> <a href="#v:checkCap" class="selflink">#</a></p><div class="doc"><p>Determine at runtime whether 'HasCap cap caps' or 'HasNoCap cap caps' holds.</p></div></div><div class="top"><p class="src"><a id="v:adjustCap" class="def">adjustCap</a> :: <span class="keyword">forall</span> cap caps m. (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> cap, <a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> cap caps) =&gt; (<span class="keyword">forall</span> caps'. cap (<a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps' m) -&gt; cap (<a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps' m)) -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m -&gt; <a href="Monad-Capabilities.html#t:Capabilities" title="Monad.Capabilities">Capabilities</a> caps m <a href="src/Monad.Capabilities.html#adjustCap" class="link">Source</a> <a href="#v:adjustCap" class="selflink">#</a></p><div class="doc"><p>Override the implementation of an existing capability using the previous
 implementation. This is a more efficient equivalent to extracting a
 capability with <code><a href="Monad-Capabilities.html#v:getCap" title="Monad.Capabilities">getCap</a></code>, adjusting it with a function, and putting it back
 with <code><a href="Monad-Capabilities.html#v:overrideCap" title="Monad.Capabilities">overrideCap</a></code>.</p></div></div><a href="#g:2" id="g:2"><h1>Default capabilities</h1></a><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Context" class="def">Context</a> x (m :: MonadK) <a href="src/Monad.Capabilities.html#Context" class="link">Source</a> <a href="#t:Context" class="selflink">#</a></p><div class="doc"><p>The <code><a href="Monad-Capabilities.html#t:Context" title="Monad.Capabilities">Context</a></code> capability is used to model the <code>Reader</code> effect within the
 capabilities framework.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Context" class="def">Context</a> x</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">class</span> (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> x, <a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> (<a href="Monad-Capabilities.html#t:Context" title="Monad.Capabilities">Context</a> x) caps) =&gt; <a id="t:HasContext" class="def">HasContext</a> x caps <a href="src/Monad.Capabilities.html#HasContext" class="link">Source</a> <a href="#t:HasContext" class="selflink">#</a></p><div class="doc"><p>The <code><a href="Monad-Capabilities.html#t:HasContext" title="Monad.Capabilities">HasContext</a></code> constraint is a shorthand for <code><a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a></code> of <code><a href="Monad-Capabilities.html#t:Context" title="Monad.Capabilities">Context</a></code>.</p></div><div class="subs instances"><details id="i:HasContext" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:HasContext:HasContext:1"></span> (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> x, <a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> (<a href="Monad-Capabilities.html#t:Context" title="Monad.Capabilities">Context</a> x) caps) =&gt; <a href="Monad-Capabilities.html#t:HasContext" title="Monad.Capabilities">HasContext</a> x caps</span> <a href="src/Monad.Capabilities.html#line-491" class="link">Source</a> <a href="#t:HasContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:HasContext:HasContext:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Monad-Capabilities.html">Monad.Capabilities</a></p></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:newContext" class="def">newContext</a> :: <span class="keyword">forall</span> x m. x -&gt; <a href="Monad-Capabilities.html#t:CapImpl" title="Monad.Capabilities">CapImpl</a> (<a href="Monad-Capabilities.html#t:Context" title="Monad.Capabilities">Context</a> x) '[] m <a href="src/Monad.Capabilities.html#newContext" class="link">Source</a> <a href="#v:newContext" class="selflink">#</a></p><div class="doc"><p>Initialize a <code><a href="Monad-Capabilities.html#t:Context" title="Monad.Capabilities">Context</a></code> capability.</p></div></div><div class="top"><p class="src"><a id="v:askContext" class="def">askContext</a> :: (<a href="Monad-Capabilities.html#t:HasContext" title="Monad.Capabilities">HasContext</a> x caps, <a href="../base-4.12.0.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m) =&gt; <a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps m x <a href="src/Monad.Capabilities.html#askContext" class="link">Source</a> <a href="#v:askContext" class="selflink">#</a></p><div class="doc"><p>Retrieve the context value. Moral equivalent of <code><a href="../transformers-0.5.6.2/Control-Monad-Trans-Reader.html#v:ask" title="Control.Monad.Trans.Reader">ask</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:localContext" class="def">localContext</a> :: <span class="keyword">forall</span> x caps m a. <a href="Monad-Capabilities.html#t:HasContext" title="Monad.Capabilities">HasContext</a> x caps =&gt; (x -&gt; x) -&gt; <a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps m a -&gt; <a href="Monad-Capabilities.html#t:CapsT" title="Monad.Capabilities">CapsT</a> caps m a <a href="src/Monad.Capabilities.html#localContext" class="link">Source</a> <a href="#v:localContext" class="selflink">#</a></p><div class="doc"><p>Execute a computation with a modified context value. Moral equivalent of <code><a href="../transformers-0.5.6.2/Control-Monad-Trans-Reader.html#v:local" title="Control.Monad.Trans.Reader">local</a></code>.</p></div></div><a href="#g:3" id="g:3"><h1>Type-level checks</h1></a><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:HasCap" class="def">HasCap</a> cap caps :: <a href="../base-4.12.0.0/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span> <a href="src/Monad.Capabilities.html#HasCap" class="link">Source</a> <a href="#t:HasCap" class="selflink">#</a></p><div class="doc"><p>Ensure that the <code>caps</code> list has an element <code>cap</code>.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> cap (cap ': _) = ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> cap (cap' ': caps) = <a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> cap caps</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> cap '[] = <a href="../base-4.12.0.0/GHC-TypeLits.html#t:TypeError" title="GHC.TypeLits">TypeError</a> ((<a href="../base-4.12.0.0/GHC-TypeLits.html#v:Text" title="GHC.TypeLits">Text</a> &quot;Capability &quot; <a href="../base-4.12.0.0/GHC-TypeLits.html#v::-60--62-:" title="GHC.TypeLits">:&lt;&gt;:</a> <a href="../base-4.12.0.0/GHC-TypeLits.html#v:ShowType" title="GHC.TypeLits">ShowType</a> cap) <a href="../base-4.12.0.0/GHC-TypeLits.html#v::-60--62-:" title="GHC.TypeLits">:&lt;&gt;:</a> <a href="../base-4.12.0.0/GHC-TypeLits.html#v:Text" title="GHC.TypeLits">Text</a> &quot; must be available&quot;)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:HasCaps" class="def">HasCaps</a> icaps caps :: <a href="../base-4.12.0.0/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span> <a href="src/Monad.Capabilities.html#HasCaps" class="link">Source</a> <a href="#t:HasCaps" class="selflink">#</a></p><div class="doc"><p>Ensure that the <code>caps</code> list subsumes <code>icaps</code>. It is equivalent
 to a <code>HasCap icap caps</code> constraint for each <code>icap</code> in <code>icaps</code>.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Monad-Capabilities.html#t:HasCaps" title="Monad.Capabilities">HasCaps</a> '[] _ = ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Monad-Capabilities.html#t:HasCaps" title="Monad.Capabilities">HasCaps</a> (icap ': icaps) caps = (<a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> icap caps, <a href="Monad-Capabilities.html#t:HasCaps" title="Monad.Capabilities">HasCaps</a> icaps caps)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:HasNoCap" class="def">HasNoCap</a> cap caps :: <a href="../base-4.12.0.0/Data-Kind.html#t:Constraint" title="Data.Kind">Constraint</a> <span class="keyword">where ...</span> <a href="src/Monad.Capabilities.html#HasNoCap" class="link">Source</a> <a href="#t:HasNoCap" class="selflink">#</a></p><div class="doc"><p>Ensure that the <code>caps</code> list does not have an element <code>cap</code>.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Monad-Capabilities.html#t:HasNoCap" title="Monad.Capabilities">HasNoCap</a> cap (cap ': _) = <a href="../base-4.12.0.0/GHC-TypeLits.html#t:TypeError" title="GHC.TypeLits">TypeError</a> ((<a href="../base-4.12.0.0/GHC-TypeLits.html#v:Text" title="GHC.TypeLits">Text</a> &quot;Capability &quot; <a href="../base-4.12.0.0/GHC-TypeLits.html#v::-60--62-:" title="GHC.TypeLits">:&lt;&gt;:</a> <a href="../base-4.12.0.0/GHC-TypeLits.html#v:ShowType" title="GHC.TypeLits">ShowType</a> cap) <a href="../base-4.12.0.0/GHC-TypeLits.html#v::-60--62-:" title="GHC.TypeLits">:&lt;&gt;:</a> <a href="../base-4.12.0.0/GHC-TypeLits.html#v:Text" title="GHC.TypeLits">Text</a> &quot; is already present&quot;)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Monad-Capabilities.html#t:HasNoCap" title="Monad.Capabilities">HasNoCap</a> cap (cap' ': caps) = <a href="Monad-Capabilities.html#t:HasNoCap" title="Monad.Capabilities">HasNoCap</a> cap caps</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Monad-Capabilities.html#t:HasNoCap" title="Monad.Capabilities">HasNoCap</a> cap '[] = ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:HasCapDecision" class="def">HasCapDecision</a> cap caps <span class="keyword">where</span> <a href="src/Monad.Capabilities.html#HasCapDecision" class="link">Source</a> <a href="#t:HasCapDecision" class="selflink">#</a></p><div class="doc"><p>Evidence that <code>cap</code> is present or absent in <code>caps</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:HasNoCap" class="def">HasNoCap</a> :: <a href="Monad-Capabilities.html#t:HasNoCap" title="Monad.Capabilities">HasNoCap</a> cap caps =&gt; <a href="Monad-Capabilities.html#t:HasCapDecision" title="Monad.Capabilities">HasCapDecision</a> cap caps</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:HasCap" class="def">HasCap</a> :: <a href="Monad-Capabilities.html#t:HasCap" title="Monad.Capabilities">HasCap</a> cap caps =&gt; <a href="Monad-Capabilities.html#t:HasCapDecision" title="Monad.Capabilities">HasCapDecision</a> cap caps</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:HasCapDecision" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:HasCapDecision:Show:1"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Monad-Capabilities.html#t:HasCapDecision" title="Monad.Capabilities">HasCapDecision</a> cap caps)</span> <a href="src/Monad.Capabilities.html#line-470" class="link">Source</a> <a href="#t:HasCapDecision" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:HasCapDecision:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Monad-Capabilities.html">Monad.Capabilities</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Monad-Capabilities.html#t:HasCapDecision" title="Monad.Capabilities">HasCapDecision</a> cap caps -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Monad-Capabilities.html#t:HasCapDecision" title="Monad.Capabilities">HasCapDecision</a> cap caps -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Monad-Capabilities.html#t:HasCapDecision" title="Monad.Capabilities">HasCapDecision</a> cap caps] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:4" id="g:4"><h1>Utils</h1></a><div class="top"><p class="src"><a id="v:makeCap" class="def">makeCap</a> :: <a href="../template-haskell-2.14.0.0/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a> -&gt; <a href="../template-haskell-2.14.0.0/Language-Haskell-TH-Lib-Internal.html#t:DecsQ" title="Language.Haskell.TH.Lib.Internal">DecsQ</a> <a href="src/Monad.Capabilities.html#makeCap" class="link">Source</a> <a href="#v:makeCap" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>