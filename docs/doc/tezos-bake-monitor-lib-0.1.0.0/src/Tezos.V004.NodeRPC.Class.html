<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveFunctor #-}</span><span>
</span><a name="line-2"></a><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><a name="line-3"></a><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><a name="line-4"></a><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><a name="line-5"></a><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><a name="line-6"></a><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><a name="line-7"></a><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><a name="line-8"></a><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><a name="line-9"></a><span>
</span><a name="line-10"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Tezos.V004.NodeRPC.Class</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-11"></a><span>
</span><a name="line-12"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Lens</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">uncons</span><span class="hs-special">)</span><span>
</span><a name="line-13"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Dependent.Sum</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">DSum</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-14"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Foldable</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">toList</span><span class="hs-special">)</span><span>
</span><a name="line-15"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Map</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Map</span><span class="hs-special">)</span><span>
</span><a name="line-16"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Semigroup</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;&gt;</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-17"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Sequence</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Seq</span><span class="hs-special">)</span><span>
</span><a name="line-18"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Set</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Set</span><span class="hs-special">)</span><span>
</span><a name="line-19"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Word</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Word64</span><span class="hs-special">)</span><span>
</span><a name="line-20"></a><span>
</span><a name="line-21"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Aeson</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">FromJSON</span><span class="hs-special">)</span><span>
</span><a name="line-22"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.Aeson</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Aeson</span><span>
</span><a name="line-23"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Aeson.Encoding</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">emptyObject_</span><span class="hs-special">)</span><span>
</span><a name="line-24"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.ByteString.Lazy</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">LBS</span><span>
</span><a name="line-25"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.Map</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Map</span><span>
</span><a name="line-26"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.Set</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">S</span><span>
</span><a name="line-27"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Text</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Text</span><span class="hs-special">)</span><span>
</span><a name="line-28"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.Text</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">T</span><span>
</span><a name="line-29"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Network.HTTP.Types.Method</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Http</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Method</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">methodGet</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">methodPost</span><span class="hs-special">)</span><span>
</span><a name="line-30"></a><span>
</span><a name="line-31"></a><span class="hs-keyword">import</span><span> </span><a href="Tezos.Common.Base16ByteString.html"><span class="hs-identifier">Tezos.Common.Base16ByteString</span></a><span>
</span><a name="line-32"></a><span class="hs-keyword">import</span><span> </span><a href="Tezos.Common.Chain.html"><span class="hs-identifier">Tezos.Common.Chain</span></a><span> </span><span class="hs-special">(</span><a href="Tezos.Common.Chain.html#ChainTag"><span class="hs-identifier hs-type">ChainTag</span></a><span class="hs-special">(</span><a href="Tezos.Common.Chain.html#ChainTag_Hash"><span class="hs-identifier hs-var">ChainTag_Hash</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-33"></a><span class="hs-keyword">import</span><span> </span><a href="Tezos.Common.NetworkStat.html"><span class="hs-identifier">Tezos.Common.NetworkStat</span></a><span> </span><span class="hs-special">(</span><a href="Tezos.Common.NetworkStat.html#NetworkStat"><span class="hs-identifier hs-type">NetworkStat</span></a><span class="hs-special">)</span><span>
</span><a name="line-34"></a><span class="hs-keyword">import</span><span> </span><a href="Tezos.V004.Operation.html"><span class="hs-identifier">Tezos.V004.Operation</span></a><span> </span><span class="hs-special">(</span><a href="Tezos.V004.Operation.html#Ballot"><span class="hs-identifier hs-type">Ballot</span></a><span class="hs-special">,</span><span> </span><a href="Tezos.V004.Operation.html#OperationWithMetadata"><span class="hs-identifier hs-type">OperationWithMetadata</span></a><span class="hs-special">,</span><span> </span><a href="Tezos.V004.Operation.html#OpsKindTag"><span class="hs-identifier hs-type">OpsKindTag</span></a><span class="hs-special">,</span><span> </span><a href="Tezos.V004.Operation.html#Op"><span class="hs-identifier hs-type">Op</span></a><span class="hs-special">)</span><span>
</span><a name="line-35"></a><span class="hs-keyword">import</span><span> </span><a href="Tezos.V004.Types.html"><span class="hs-identifier">Tezos.V004.Types</span></a><span>
</span><a name="line-36"></a><span>
</span><a name="line-37"></a><span>
</span><a name="line-38"></a><span class="hs-keyword">class</span><span> </span><a name="QueryChain"><a href="Tezos.V004.NodeRPC.Class.html#QueryChain"><span class="hs-identifier">QueryChain</span></a></a><span> </span><a name="local-6989586621680036120"><a href="#local-6989586621680036120"><span class="hs-identifier">repr</span></a></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-39"></a><span>  </span><a name="rChain"><a href="Tezos.V004.NodeRPC.Class.html#rChain"><span class="hs-identifier">rChain</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621680036120"><span class="hs-identifier hs-type">repr</span></a><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span>
</span><a name="line-40"></a><span>
</span><a name="line-41"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><a name="ChainType"><a href="Tezos.V004.NodeRPC.Class.html#ChainType"><span class="hs-identifier">ChainType</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621680036119"><a href="#local-6989586621680036119"><span class="hs-identifier">repr</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-operator">*</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-operator">*</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-operator">*</span><span>
</span><a name="line-42"></a><span>
</span><a name="line-43"></a><span class="hs-keyword">class</span><span> </span><a name="QueryBlock"><a href="Tezos.V004.NodeRPC.Class.html#QueryBlock"><span class="hs-identifier">QueryBlock</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621680036118"><a href="#local-6989586621680036118"><span class="hs-identifier">repr</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-operator">*</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-operator">*</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-44"></a><span>  </span><span class="hs-keyword">type</span><span> </span><a name="BlockType"><a href="Tezos.V004.NodeRPC.Class.html#BlockType"><span class="hs-identifier">BlockType</span></a></a><span> </span><a name="local-6989586621680036118"><a href="#local-6989586621680036118"><span class="hs-identifier">repr</span></a></a><span>
</span><a name="line-45"></a><span>  </span><span class="hs-keyword">type</span><span> </span><a name="BlockHeaderType"><a href="Tezos.V004.NodeRPC.Class.html#BlockHeaderType"><span class="hs-identifier">BlockHeaderType</span></a></a><span> </span><a name="local-6989586621680036118"><a href="#local-6989586621680036118"><span class="hs-identifier">repr</span></a></a><span>
</span><a name="line-46"></a><span>  </span><a name="rHead"><a href="Tezos.V004.NodeRPC.Class.html#rHead"><span class="hs-identifier">rHead</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#ChainType"><span class="hs-identifier hs-type">ChainType</span></a><span> </span><a href="#local-6989586621680036118"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036118"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-special">(</span><a href="Tezos.V004.NodeRPC.Class.html#BlockType"><span class="hs-identifier hs-type">BlockType</span></a><span> </span><a href="#local-6989586621680036118"><span class="hs-identifier hs-type">repr</span></a><span class="hs-special">)</span><span>
</span><a name="line-47"></a><span>  </span><a name="rBlock"><a href="Tezos.V004.NodeRPC.Class.html#rBlock"><span class="hs-identifier">rBlock</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#ChainType"><span class="hs-identifier hs-type">ChainType</span></a><span> </span><a href="#local-6989586621680036118"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036118"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-special">(</span><a href="Tezos.V004.NodeRPC.Class.html#BlockType"><span class="hs-identifier hs-type">BlockType</span></a><span> </span><a href="#local-6989586621680036118"><span class="hs-identifier hs-type">repr</span></a><span class="hs-special">)</span><span>
</span><a name="line-48"></a><span>  </span><a name="rBlockHeader"><a href="Tezos.V004.NodeRPC.Class.html#rBlockHeader"><span class="hs-identifier">rBlockHeader</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#ChainType"><span class="hs-identifier hs-type">ChainType</span></a><span> </span><a href="#local-6989586621680036118"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036118"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-special">(</span><a href="Tezos.V004.NodeRPC.Class.html#BlockHeaderType"><span class="hs-identifier hs-type">BlockHeaderType</span></a><span> </span><a href="#local-6989586621680036118"><span class="hs-identifier hs-type">repr</span></a><span class="hs-special">)</span><span>
</span><a name="line-49"></a><span>
</span><a name="line-50"></a><span class="hs-keyword">class</span><span> </span><a name="QueryHistory"><a href="Tezos.V004.NodeRPC.Class.html#QueryHistory"><span class="hs-identifier">QueryHistory</span></a></a><span> </span><a name="local-6989586621680036117"><a href="#local-6989586621680036117"><span class="hs-identifier">repr</span></a></a><span> </span><span class="hs-keyword">where</span><span> </span><span class="hs-comment">-- blockscale</span><span>
</span><a name="line-51"></a><span>  </span><a name="rBlocks"><a href="Tezos.V004.NodeRPC.Class.html#rBlocks"><span class="hs-identifier">rBlocks</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.V004.Level.html#RawLevel"><span class="hs-identifier hs-type">RawLevel</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Set</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Map</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Seq</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- the predecessors of the requested block.</span><span>
</span><a name="line-52"></a><span>  </span><a name="rBlockPred"><a href="Tezos.V004.NodeRPC.Class.html#rBlockPred"><span class="hs-identifier">rBlockPred</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.V004.Level.html#RawLevel"><span class="hs-identifier hs-type">RawLevel</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-special">(</span><a href="Tezos.V004.NodeRPC.Class.html#BlockType"><span class="hs-identifier hs-type">BlockType</span></a><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span class="hs-special">)</span><span>
</span><a name="line-53"></a><span>
</span><a name="line-54"></a><span>  </span><a name="rProtoConstants"><a href="Tezos.V004.NodeRPC.Class.html#rProtoConstants"><span class="hs-identifier">rProtoConstants</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><a href="Tezos.V004.ProtocolConstants.html#ProtoInfo"><span class="hs-identifier hs-type">ProtoInfo</span></a><span>
</span><a name="line-55"></a><span>  </span><a name="rContract"><a href="Tezos.V004.NodeRPC.Class.html#rContract"><span class="hs-identifier">rContract</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.V004.Contract.html#ContractId"><span class="hs-identifier hs-type">ContractId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#ChainType"><span class="hs-identifier hs-type">ChainType</span></a><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><a href="Tezos.V004.Account.html#Account"><span class="hs-identifier hs-type">Account</span></a><span>
</span><a name="line-56"></a><span>
</span><a name="line-57"></a><span>  </span><a name="rBallots"><a href="Tezos.V004.NodeRPC.Class.html#rBallots"><span class="hs-identifier">rBallots</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><a href="Tezos.V004.Vote.html#Ballots"><span class="hs-identifier hs-type">Ballots</span></a><span>
</span><a name="line-58"></a><span>  </span><a name="rListings"><a href="Tezos.V004.NodeRPC.Class.html#rListings"><span class="hs-identifier">rListings</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Seq</span><span> </span><a href="Tezos.V004.Vote.html#VoterDelegate"><span class="hs-identifier hs-type">VoterDelegate</span></a><span class="hs-special">)</span><span>
</span><a name="line-59"></a><span>  </span><a name="rProposals"><a href="Tezos.V004.NodeRPC.Class.html#rProposals"><span class="hs-identifier">rProposals</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Seq</span><span> </span><a href="Tezos.V004.Vote.html#ProposalVotes"><span class="hs-identifier hs-type">ProposalVotes</span></a><span class="hs-special">)</span><span>
</span><a name="line-60"></a><span>  </span><a name="rCurrentProposal"><a href="Tezos.V004.NodeRPC.Class.html#rCurrentProposal"><span class="hs-identifier">rCurrentProposal</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="Tezos.Common.Base58Check.html#ProtocolHash"><span class="hs-identifier hs-type">ProtocolHash</span></a><span class="hs-special">)</span><span>
</span><a name="line-61"></a><span>  </span><a name="rCurrentQuorum"><a href="Tezos.V004.NodeRPC.Class.html#rCurrentQuorum"><span class="hs-identifier">rCurrentQuorum</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-62"></a><span>  </span><a name="rBallot"><a href="Tezos.V004.NodeRPC.Class.html#rBallot"><span class="hs-identifier">rBallot</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.V004.PublicKeyHash.html#PublicKeyHash"><span class="hs-identifier hs-type">PublicKeyHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="Tezos.V004.Operation.html#Ballot"><span class="hs-identifier hs-type">Ballot</span></a><span class="hs-special">)</span><span>
</span><a name="line-63"></a><span>  </span><a name="rProposalVote"><a href="Tezos.V004.NodeRPC.Class.html#rProposalVote"><span class="hs-identifier">rProposalVote</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.V004.PublicKeyHash.html#PublicKeyHash"><span class="hs-identifier hs-type">PublicKeyHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Set</span><span> </span><a href="Tezos.Common.Base58Check.html#ProtocolHash"><span class="hs-identifier hs-type">ProtocolHash</span></a><span class="hs-special">)</span><span>
</span><a name="line-64"></a><span>
</span><a name="line-65"></a><span>  </span><a name="rManagerKey"><a href="Tezos.V004.NodeRPC.Class.html#rManagerKey"><span class="hs-identifier">rManagerKey</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.V004.Contract.html#ContractId"><span class="hs-identifier hs-type">ContractId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><a href="Tezos.V004.Account.html#ManagerKey"><span class="hs-identifier hs-type">ManagerKey</span></a><span>
</span><a name="line-66"></a><span>
</span><a name="line-67"></a><span>  </span><span class="hs-comment">-- This only produces results when the cycles requested are between within</span><span>
</span><a name="line-68"></a><span>  </span><span class="hs-comment">-- PRESERVED_CYCLES of the BlockId requested. for older data, use an older block as context</span><span>
</span><a name="line-69"></a><span>  </span><a name="rBakingRights"><a href="Tezos.V004.NodeRPC.Class.html#rBakingRights"><span class="hs-identifier">rBakingRights</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Set</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><a href="Tezos.V004.Level.html#RawLevel"><span class="hs-identifier hs-type">RawLevel</span></a><span> </span><a href="Tezos.V004.Level.html#Cycle"><span class="hs-identifier hs-type">Cycle</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Seq</span><span> </span><a href="Tezos.V004.Account.html#BakingRights"><span class="hs-identifier hs-type">BakingRights</span></a><span class="hs-special">)</span><span>
</span><a name="line-70"></a><span>  </span><a name="rBakingRightsFull"><a href="Tezos.V004.NodeRPC.Class.html#rBakingRightsFull"><span class="hs-identifier">rBakingRightsFull</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Set</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><a href="Tezos.V004.Level.html#RawLevel"><span class="hs-identifier hs-type">RawLevel</span></a><span> </span><a href="Tezos.V004.Level.html#Cycle"><span class="hs-identifier hs-type">Cycle</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Seq</span><span> </span><a href="Tezos.V004.Account.html#BakingRights"><span class="hs-identifier hs-type">BakingRights</span></a><span class="hs-special">)</span><span>
</span><a name="line-71"></a><span>  </span><a name="rEndorsingRights"><a href="Tezos.V004.NodeRPC.Class.html#rEndorsingRights"><span class="hs-identifier">rEndorsingRights</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Set</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><a href="Tezos.V004.Level.html#RawLevel"><span class="hs-identifier hs-type">RawLevel</span></a><span> </span><a href="Tezos.V004.Level.html#Cycle"><span class="hs-identifier hs-type">Cycle</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Seq</span><span> </span><a href="Tezos.V004.Account.html#EndorsingRights"><span class="hs-identifier hs-type">EndorsingRights</span></a><span class="hs-special">)</span><span>
</span><a name="line-72"></a><span>
</span><a name="line-73"></a><span>  </span><a name="rDelegateInfo"><a href="Tezos.V004.NodeRPC.Class.html#rDelegateInfo"><span class="hs-identifier">rDelegateInfo</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.V004.PublicKeyHash.html#PublicKeyHash"><span class="hs-identifier hs-type">PublicKeyHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><a href="Tezos.V004.Account.html#DelegateInfo"><span class="hs-identifier hs-type">DelegateInfo</span></a><span>
</span><a name="line-74"></a><span>
</span><a name="line-75"></a><span>  </span><a name="rRunOperation"><a href="Tezos.V004.NodeRPC.Class.html#rRunOperation"><span class="hs-identifier">rRunOperation</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">DSum</span><span> </span><a href="Tezos.V004.Operation.html#OpsKindTag"><span class="hs-identifier hs-type">OpsKindTag</span></a><span> </span><a href="Tezos.V004.Operation.html#Op"><span class="hs-identifier hs-type">Op</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036117"><span class="hs-identifier hs-type">repr</span></a><span> </span><a href="Tezos.V004.Operation.html#OperationWithMetadata"><span class="hs-identifier hs-type">OperationWithMetadata</span></a><span>
</span><a name="line-76"></a><span>
</span><a name="line-77"></a><span>
</span><a name="line-78"></a><span class="hs-keyword">class</span><span> </span><a name="QueryNode"><a href="Tezos.V004.NodeRPC.Class.html#QueryNode"><span class="hs-identifier">QueryNode</span></a></a><span> </span><a name="local-6989586621680036116"><a href="#local-6989586621680036116"><span class="hs-identifier">repr</span></a></a><span> </span><span class="hs-keyword">where</span><span> </span><span class="hs-comment">-- my node</span><span>
</span><a name="line-79"></a><span>  </span><a name="rConnections"><a href="Tezos.V004.NodeRPC.Class.html#rConnections"><span class="hs-identifier">rConnections</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621680036116"><span class="hs-identifier hs-type">repr</span></a><span> </span><span class="hs-identifier hs-type">Word64</span><span> </span><span class="hs-comment">-- just a count for now, but there's more data there we may someday be interested in</span><span>
</span><a name="line-80"></a><span>  </span><a name="rNetworkStat"><a href="Tezos.V004.NodeRPC.Class.html#rNetworkStat"><span class="hs-identifier">rNetworkStat</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621680036116"><span class="hs-identifier hs-type">repr</span></a><span> </span><a href="Tezos.Common.NetworkStat.html#NetworkStat"><span class="hs-identifier hs-type">NetworkStat</span></a><span>
</span><a name="line-81"></a><span>  </span><a name="rCheckpoint"><a href="Tezos.V004.NodeRPC.Class.html#rCheckpoint"><span class="hs-identifier">rCheckpoint</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036116"><span class="hs-identifier hs-type">repr</span></a><span> </span><a href="Tezos.V004.Checkpoint.html#Checkpoint"><span class="hs-identifier hs-type">Checkpoint</span></a><span>
</span><a name="line-82"></a><span>
</span><a name="line-83"></a><span class="hs-keyword">class</span><span> </span><a name="MonitorHeads"><a href="Tezos.V004.NodeRPC.Class.html#MonitorHeads"><span class="hs-identifier">MonitorHeads</span></a></a><span> </span><a name="local-6989586621680036115"><a href="#local-6989586621680036115"><span class="hs-identifier">repr</span></a></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-84"></a><span>  </span><a name="rMonitorHeads"><a href="Tezos.V004.NodeRPC.Class.html#rMonitorHeads"><span class="hs-identifier">rMonitorHeads</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036115"><span class="hs-identifier hs-type">repr</span></a><span> </span><a href="Tezos.V004.Block.html#MonitorBlock"><span class="hs-identifier hs-type">MonitorBlock</span></a><span>
</span><a name="line-85"></a><span>
</span><a name="line-86"></a><span class="hs-keyword">class</span><span> </span><a name="Injection"><a href="Tezos.V004.NodeRPC.Class.html#Injection"><span class="hs-identifier">Injection</span></a></a><span> </span><a name="local-6989586621680036114"><a href="#local-6989586621680036114"><span class="hs-identifier">repr</span></a></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-87"></a><span>  </span><a name="rInjectOperation"><a href="Tezos.V004.NodeRPC.Class.html#rInjectOperation"><span class="hs-identifier">rInjectOperation</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">DSum</span><span> </span><a href="Tezos.V004.Operation.html#OpsKindTag"><span class="hs-identifier hs-type">OpsKindTag</span></a><span> </span><a href="Tezos.V004.Operation.html#Op"><span class="hs-identifier hs-type">Op</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621680036114"><span class="hs-identifier hs-type">repr</span></a><span> </span><a href="Tezos.Common.Base58Check.html#OperationHash"><span class="hs-identifier hs-type">OperationHash</span></a><span>
</span><a name="line-88"></a><span>
</span><a name="line-89"></a><span class="hs-keyword">data</span><span> </span><a name="RpcQuery"><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier">RpcQuery</span></a></a><span> </span><a name="local-6989586621680036113"><a href="#local-6989586621680036113"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="RpcQuery"><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier">RpcQuery</span></a></a><span>
</span><a name="line-90"></a><span>  </span><span class="hs-special">{</span><span> </span><a name="_RpcQuery_decoder"><a href="Tezos.V004.NodeRPC.Class.html#_RpcQuery_decoder"><span class="hs-identifier">_RpcQuery_decoder</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">LBS.ByteString</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621680036113"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-91"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="_RpcQuery_body"><a href="Tezos.V004.NodeRPC.Class.html#_RpcQuery_body"><span class="hs-identifier">_RpcQuery_body</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Aeson.Encoding</span><span>
</span><a name="line-92"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="_RpcQuery_method"><a href="Tezos.V004.NodeRPC.Class.html#_RpcQuery_method"><span class="hs-identifier">_RpcQuery_method</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Http.Method</span><span>
</span><a name="line-93"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="_RpcQuery_resource"><a href="Tezos.V004.NodeRPC.Class.html#_RpcQuery_resource"><span class="hs-identifier">_RpcQuery_resource</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Text</span><span>
</span><a name="line-94"></a><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier hs-type">Functor</span><span>
</span><a name="line-95"></a><span>
</span><a name="line-96"></a><span class="hs-identifier">plainNodeRequest</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">FromJSON</span><span> </span><a href="#local-6989586621680036299"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Http.Method</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Text</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-type">RpcQuery</span></a><span> </span><a href="#local-6989586621680036299"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-97"></a><a name="plainNodeRequest"><a href="Tezos.V004.NodeRPC.Class.html#plainNodeRequest"><span class="hs-identifier">plainNodeRequest</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-var">RpcQuery</span></a><span> </span><span class="hs-identifier hs-var">Aeson.eitherDecode'</span><span> </span><span class="hs-identifier hs-var">emptyObject_</span><span>
</span><a name="line-98"></a><span>
</span><a name="line-99"></a><span class="hs-identifier">postNodeRequest</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Aeson.ToJSON</span><span> </span><a href="#local-6989586621680036297"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">FromJSON</span><span> </span><a href="#local-6989586621680036298"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621680036297"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Text</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-type">RpcQuery</span></a><span> </span><a href="#local-6989586621680036298"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-100"></a><a name="postNodeRequest"><a href="Tezos.V004.NodeRPC.Class.html#postNodeRequest"><span class="hs-identifier">postNodeRequest</span></a></a><span> </span><a name="local-6989586621680036300"><a href="#local-6989586621680036300"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-var">RpcQuery</span></a><span> </span><span class="hs-identifier hs-var">Aeson.eitherDecode'</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Aeson.toEncoding</span><span> </span><a href="#local-6989586621680036300"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-var">Http.methodPost</span><span>
</span><a name="line-101"></a><span>
</span><a name="line-102"></a><span class="hs-keyword">newtype</span><span> </span><a name="PlainNode"><a href="Tezos.V004.NodeRPC.Class.html#PlainNode"><span class="hs-identifier">PlainNode</span></a></a><span> </span><a name="local-6989586621680036112"><a href="#local-6989586621680036112"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="PlainNode"><a href="Tezos.V004.NodeRPC.Class.html#PlainNode"><span class="hs-identifier">PlainNode</span></a></a><span> </span><span class="hs-special">(</span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-type">RpcQuery</span></a><span> </span><a href="#local-6989586621680036112"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-103"></a><span class="hs-keyword">newtype</span><span> </span><a name="PlainNodeStream"><a href="Tezos.V004.NodeRPC.Class.html#PlainNodeStream"><span class="hs-identifier">PlainNodeStream</span></a></a><span> </span><a name="local-6989586621680036111"><a href="#local-6989586621680036111"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="PlainNodeStream"><a href="Tezos.V004.NodeRPC.Class.html#PlainNodeStream"><span class="hs-identifier">PlainNodeStream</span></a></a><span> </span><span class="hs-special">(</span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-type">RpcQuery</span></a><span> </span><a href="#local-6989586621680036111"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-104"></a><span>
</span><a name="line-105"></a><span class="hs-keyword">instance</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#QueryChain"><span class="hs-identifier hs-type">QueryChain</span></a><span> </span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-type">RpcQuery</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-106"></a><span>  </span><a name="local-8214565720324811012"><a href="Tezos.V004.NodeRPC.Class.html#rChain"><span class="hs-identifier">rChain</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">_block_chainId</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#plainNodeRequest"><span class="hs-identifier hs-var">plainNodeRequest</span></a><span> </span><span class="hs-identifier hs-var">Http.methodGet</span><span> </span><span class="hs-string">&quot;/chains/main/blocks/head&quot;</span><span>
</span><a name="line-107"></a><span>
</span><a name="line-108"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#ChainType"><span class="hs-identifier hs-type">ChainType</span></a><span> </span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-type">RpcQuery</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.Common.Chain.html#ChainTag"><span class="hs-identifier hs-type">ChainTag</span></a><span>
</span><a name="line-109"></a><span>
</span><a name="line-110"></a><span class="hs-keyword">instance</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#QueryBlock"><span class="hs-identifier hs-type">QueryBlock</span></a><span> </span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-type">RpcQuery</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-111"></a><span>  </span><span class="hs-keyword">type</span><span> </span><span class="hs-identifier">BlockType</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-type">RpcQuery</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.Block.html#Block"><span class="hs-identifier hs-type">Block</span></a><span>
</span><a name="line-112"></a><span>  </span><span class="hs-keyword">type</span><span> </span><span class="hs-identifier">BlockHeaderType</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-type">RpcQuery</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.BlockHeader.html#BlockHeader"><span class="hs-identifier hs-type">BlockHeader</span></a><span>
</span><a name="line-113"></a><span>  </span><a name="local-8214565720324811007"><a href="Tezos.V004.NodeRPC.Class.html#rHead"><span class="hs-identifier">rHead</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#chainAPI%27"><span class="hs-identifier hs-var">chainAPI'</span></a><span> </span><span class="hs-string">&quot;/blocks/head&quot;</span><span>
</span><a name="line-114"></a><span>  </span><a name="local-8214565720324811008"><a href="Tezos.V004.NodeRPC.Class.html#rBlock"><span class="hs-identifier">rBlock</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI%27"><span class="hs-identifier hs-var">blockAPI'</span></a><span> </span><span class="hs-string">&quot;&quot;</span><span>
</span><a name="line-115"></a><span>  </span><a name="local-8214565720324811009"><a href="Tezos.V004.NodeRPC.Class.html#rBlockHeader"><span class="hs-identifier">rBlockHeader</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI%27"><span class="hs-identifier hs-var">blockAPI'</span></a><span> </span><span class="hs-string">&quot;/header&quot;</span><span>
</span><a name="line-116"></a><span>
</span><a name="line-117"></a><span class="hs-keyword">instance</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#QueryHistory"><span class="hs-identifier hs-type">QueryHistory</span></a><span> </span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-type">RpcQuery</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-118"></a><span>  </span><a name="local-8214565720324810988"><a href="Tezos.V004.NodeRPC.Class.html#rBlockPred"><span class="hs-identifier">rBlockPred</span></a></a><span> </span><span class="hs-special">(</span><a href="Tezos.V004.Level.html#RawLevel"><span class="hs-identifier hs-var">RawLevel</span></a><span> </span><a name="local-6989586621680036124"><a href="#local-6989586621680036124"><span class="hs-identifier">levelsBack</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI"><span class="hs-identifier hs-var">blockAPI</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-string">&quot;~&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">T.pack</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621680036124"><span class="hs-identifier hs-var">levelsBack</span></a><span class="hs-special">)</span><span>
</span><a name="line-119"></a><span>  </span><a name="local-8214565720324810987"><a href="Tezos.V004.NodeRPC.Class.html#rBlocks"><span class="hs-identifier">rBlocks</span></a></a><span> </span><a name="local-6989586621680036125"><a href="#local-6989586621680036125"><span class="hs-identifier">chainId</span></a></a><span> </span><span class="hs-special">(</span><a href="Tezos.V004.Level.html#RawLevel"><span class="hs-identifier hs-var">RawLevel</span></a><span> </span><a name="local-6989586621680036126"><a href="#local-6989586621680036126"><span class="hs-identifier">len</span></a></a><span class="hs-special">)</span><span> </span><a name="local-6989586621680036127"><a href="#local-6989586621680036127"><span class="hs-identifier">heads</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680036128"><span class="hs-identifier hs-var">byHead</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#chainAPI"><span class="hs-identifier hs-var">chainAPI</span></a><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;/blocks?length=&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">T.pack</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621680036126"><span class="hs-identifier hs-var">len</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">foldMap</span><span> </span><a href="#local-6989586621680036129"><span class="hs-identifier hs-var">blk2param</span></a><span> </span><a href="#local-6989586621680036127"><span class="hs-identifier hs-var">heads</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680036125"><span class="hs-identifier hs-var">chainId</span></a><span>
</span><a name="line-120"></a><span>    </span><span class="hs-keyword">where</span><span>
</span><a name="line-121"></a><span>      </span><span class="hs-identifier">byHead</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Seq</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Map.Map</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Seq</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span class="hs-special">)</span><span>
</span><a name="line-122"></a><span>      </span><a name="local-6989586621680036128"><a href="#local-6989586621680036128"><span class="hs-identifier">byHead</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">foldMap</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">maybe</span><span> </span><span class="hs-identifier hs-var">mempty</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">uncurry</span><span> </span><span class="hs-identifier hs-var">Map.singleton</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">uncons</span><span>
</span><a name="line-123"></a><span>      </span><span class="hs-identifier">blk2param</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Text</span><span>
</span><a name="line-124"></a><span>      </span><a name="local-6989586621680036129"><a href="#local-6989586621680036129"><span class="hs-identifier">blk2param</span></a></a><span> </span><a name="local-6989586621680036276"><a href="#local-6989586621680036276"><span class="hs-identifier">blkHash</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;&amp;head=&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#toBase58Text"><span class="hs-identifier hs-var">toBase58Text</span></a><span> </span><a href="#local-6989586621680036276"><span class="hs-identifier hs-var">blkHash</span></a><span>
</span><a name="line-125"></a><span>  </span><a name="local-8214565720324810989"><a href="Tezos.V004.NodeRPC.Class.html#rProtoConstants"><span class="hs-identifier">rProtoConstants</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI"><span class="hs-identifier hs-var">blockAPI</span></a><span> </span><span class="hs-string">&quot;/context/constants&quot;</span><span>
</span><a name="line-126"></a><span>  </span><a name="local-8214565720324810990"><a href="Tezos.V004.NodeRPC.Class.html#rContract"><span class="hs-identifier">rContract</span></a></a><span> </span><a name="local-6989586621680036277"><a href="#local-6989586621680036277"><span class="hs-identifier">contractId</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI%27"><span class="hs-identifier hs-var">blockAPI'</span></a><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;/context/contracts/&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="Tezos.V004.Contract.html#toContractIdText"><span class="hs-identifier hs-var">toContractIdText</span></a><span> </span><a href="#local-6989586621680036277"><span class="hs-identifier hs-var">contractId</span></a><span class="hs-special">)</span><span>
</span><a name="line-127"></a><span>  </span><a name="local-8214565720324810991"><a href="Tezos.V004.NodeRPC.Class.html#rBallots"><span class="hs-identifier">rBallots</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI"><span class="hs-identifier hs-var">blockAPI</span></a><span> </span><span class="hs-string">&quot;/votes/ballots/&quot;</span><span>
</span><a name="line-128"></a><span>  </span><a name="local-8214565720324810992"><a href="Tezos.V004.NodeRPC.Class.html#rListings"><span class="hs-identifier">rListings</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI"><span class="hs-identifier hs-var">blockAPI</span></a><span> </span><span class="hs-string">&quot;/votes/listings/&quot;</span><span>
</span><a name="line-129"></a><span>  </span><a name="local-8214565720324810993"><a href="Tezos.V004.NodeRPC.Class.html#rProposals"><span class="hs-identifier">rProposals</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI"><span class="hs-identifier hs-var">blockAPI</span></a><span> </span><span class="hs-string">&quot;/votes/proposals/&quot;</span><span>
</span><a name="line-130"></a><span>  </span><a name="local-8214565720324810994"><a href="Tezos.V004.NodeRPC.Class.html#rCurrentProposal"><span class="hs-identifier">rCurrentProposal</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI"><span class="hs-identifier hs-var">blockAPI</span></a><span> </span><span class="hs-string">&quot;/votes/current_proposal/&quot;</span><span>
</span><a name="line-131"></a><span>  </span><a name="local-8214565720324810995"><a href="Tezos.V004.NodeRPC.Class.html#rCurrentQuorum"><span class="hs-identifier">rCurrentQuorum</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI"><span class="hs-identifier hs-var">blockAPI</span></a><span> </span><span class="hs-string">&quot;/votes/current_quorum/&quot;</span><span>
</span><a name="line-132"></a><span>  </span><a name="local-8214565720324810996"><a href="Tezos.V004.NodeRPC.Class.html#rBallot"><span class="hs-identifier">rBallot</span></a></a><span> </span><a name="local-6989586621680036278"><a href="#local-6989586621680036278"><span class="hs-identifier">chain</span></a></a><span> </span><a name="local-6989586621680036279"><a href="#local-6989586621680036279"><span class="hs-identifier">block</span></a></a><span> </span><a name="local-6989586621680036280"><a href="#local-6989586621680036280"><span class="hs-identifier">pkh</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI"><span class="hs-identifier hs-var">blockAPI</span></a><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;/context/raw/json/votes/ballots/&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="Tezos.V004.PublicKeyHash.html#toPublicKeyHashText"><span class="hs-identifier hs-var">toPublicKeyHashText</span></a><span> </span><a href="#local-6989586621680036280"><span class="hs-identifier hs-var">pkh</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621680036278"><span class="hs-identifier hs-var">chain</span></a><span> </span><a href="#local-6989586621680036279"><span class="hs-identifier hs-var">block</span></a><span>
</span><a name="line-133"></a><span>  </span><a name="local-8214565720324810997"><a href="Tezos.V004.NodeRPC.Class.html#rProposalVote"><span class="hs-identifier">rProposalVote</span></a></a><span> </span><a name="local-6989586621680036281"><a href="#local-6989586621680036281"><span class="hs-identifier">chain</span></a></a><span> </span><a name="local-6989586621680036282"><a href="#local-6989586621680036282"><span class="hs-identifier">block</span></a></a><span> </span><a name="local-6989586621680036283"><a href="#local-6989586621680036283"><span class="hs-identifier">pkh</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">S.fromList</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier hs-var">fst</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">filter</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">elem</span><span> </span><span class="hs-glyph">@</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a href="#local-6989586621680036283"><span class="hs-identifier hs-var">pkh</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">snd</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI"><span class="hs-identifier hs-var">blockAPI</span></a><span> </span><span class="hs-string">&quot;/context/raw/json/votes/proposals?depth=1&quot;</span><span> </span><a href="#local-6989586621680036281"><span class="hs-identifier hs-var">chain</span></a><span> </span><a href="#local-6989586621680036282"><span class="hs-identifier hs-var">block</span></a><span>
</span><a name="line-134"></a><span>  </span><a name="local-8214565720324810998"><a href="Tezos.V004.NodeRPC.Class.html#rManagerKey"><span class="hs-identifier">rManagerKey</span></a></a><span> </span><a name="local-6989586621680036284"><a href="#local-6989586621680036284"><span class="hs-identifier">contractId</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI"><span class="hs-identifier hs-var">blockAPI</span></a><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;/context/contracts/&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="Tezos.V004.Contract.html#toContractIdText"><span class="hs-identifier hs-var">toContractIdText</span></a><span> </span><a href="#local-6989586621680036284"><span class="hs-identifier hs-var">contractId</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot;/manager_key&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-135"></a><span>  </span><a name="local-8214565720324810999"><a href="Tezos.V004.NodeRPC.Class.html#rBakingRights"><span class="hs-identifier">rBakingRights</span></a></a><span> </span><a name="local-6989586621680036285"><a href="#local-6989586621680036285"><span class="hs-identifier">params</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI"><span class="hs-identifier hs-var">blockAPI</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-string">&quot;/helpers/baking_rights&quot;</span><span>
</span><a name="line-136"></a><span>      </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621680036285"><span class="hs-identifier hs-var">params</span></a><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-string">&quot;&quot;</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-string">&quot;?&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">T.intercalate</span><span> </span><span class="hs-string">&quot;&amp;&quot;</span><span> </span><span class="hs-special">(</span><a href="Tezos.V004.NodeRPC.Class.html#dynamicParamRightsRangeToQueryArg"><span class="hs-identifier hs-var">dynamicParamRightsRangeToQueryArg</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-identifier hs-var">toList</span><span> </span><a href="#local-6989586621680036285"><span class="hs-identifier hs-var">params</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-137"></a><span>  </span><a name="local-8214565720324811000"><a href="Tezos.V004.NodeRPC.Class.html#rBakingRightsFull"><span class="hs-identifier">rBakingRightsFull</span></a></a><span> </span><a name="local-6989586621680036286"><a href="#local-6989586621680036286"><span class="hs-identifier">levelishes</span></a></a><span> </span><a name="local-6989586621680036287"><a href="#local-6989586621680036287"><span class="hs-identifier">prio</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI"><span class="hs-identifier hs-var">blockAPI</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-string">&quot;/helpers/baking_rights?all&amp;&quot;</span><span>
</span><a name="line-138"></a><span>      </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">T.intercalate</span><span> </span><span class="hs-string">&quot;&amp;&quot;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-string">&quot;max_priority=&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">T.pack</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621680036287"><span class="hs-identifier hs-var">prio</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">:</span><span> </span><span class="hs-special">(</span><a href="Tezos.V004.NodeRPC.Class.html#dynamicParamRightsRangeToQueryArg"><span class="hs-identifier hs-var">dynamicParamRightsRangeToQueryArg</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-identifier hs-var">toList</span><span> </span><a href="#local-6989586621680036286"><span class="hs-identifier hs-var">levelishes</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-139"></a><span>  </span><a name="local-8214565720324811001"><a href="Tezos.V004.NodeRPC.Class.html#rEndorsingRights"><span class="hs-identifier">rEndorsingRights</span></a></a><span> </span><a name="local-6989586621680036288"><a href="#local-6989586621680036288"><span class="hs-identifier">params</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI"><span class="hs-identifier hs-var">blockAPI</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-string">&quot;/helpers/endorsing_rights&quot;</span><span>
</span><a name="line-140"></a><span>      </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621680036288"><span class="hs-identifier hs-var">params</span></a><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-string">&quot;&quot;</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-string">&quot;?&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">T.intercalate</span><span> </span><span class="hs-string">&quot;&amp;&quot;</span><span> </span><span class="hs-special">(</span><a href="Tezos.V004.NodeRPC.Class.html#dynamicParamRightsRangeToQueryArg"><span class="hs-identifier hs-var">dynamicParamRightsRangeToQueryArg</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-identifier hs-var">toList</span><span> </span><a href="#local-6989586621680036288"><span class="hs-identifier hs-var">params</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-141"></a><span>  </span><a name="local-8214565720324811002"><a href="Tezos.V004.NodeRPC.Class.html#rDelegateInfo"><span class="hs-identifier">rDelegateInfo</span></a></a><span> </span><a name="local-6989586621680036289"><a href="#local-6989586621680036289"><span class="hs-identifier">publicKeyHash</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI"><span class="hs-identifier hs-var">blockAPI</span></a><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;/context/delegates/&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="Tezos.V004.PublicKeyHash.html#toPublicKeyHashText"><span class="hs-identifier hs-var">toPublicKeyHashText</span></a><span> </span><a href="#local-6989586621680036289"><span class="hs-identifier hs-var">publicKeyHash</span></a><span class="hs-special">)</span><span>
</span><a name="line-142"></a><span>  </span><a name="local-8214565720324811003"><a href="Tezos.V004.NodeRPC.Class.html#rRunOperation"><span class="hs-identifier">rRunOperation</span></a></a><span> </span><a name="local-6989586621680036290"><a href="#local-6989586621680036290"><span class="hs-identifier">chainId</span></a></a><span> </span><a name="local-6989586621680036291"><a href="#local-6989586621680036291"><span class="hs-identifier">blockHash</span></a></a><span> </span><a name="local-6989586621680036292"><a href="#local-6989586621680036292"><span class="hs-identifier">contents</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-143"></a><span>    </span><a href="Tezos.V004.NodeRPC.Class.html#postNodeRequest"><span class="hs-identifier hs-var">postNodeRequest</span></a><span>
</span><a name="line-144"></a><span>      </span><a href="#local-6989586621680036292"><span class="hs-identifier hs-var">contents</span></a><span>
</span><a name="line-145"></a><span>      </span><span class="hs-special">(</span><a href="Tezos.V004.NodeRPC.Class.html#chainBlockUrl"><span class="hs-identifier hs-var">chainBlockUrl</span></a><span> </span><a href="#local-6989586621680036290"><span class="hs-identifier hs-var">chainId</span></a><span> </span><a href="#local-6989586621680036291"><span class="hs-identifier hs-var">blockHash</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot;/helpers/scripts/run_operation&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-146"></a><span>
</span><a name="line-147"></a><span class="hs-identifier">chainAPI</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">FromJSON</span><span> </span><a href="#local-6989586621680036296"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Text</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-type">RpcQuery</span></a><span> </span><a href="#local-6989586621680036296"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-148"></a><a name="chainAPI"><a href="Tezos.V004.NodeRPC.Class.html#chainAPI"><span class="hs-identifier">chainAPI</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">.</span><span> </span><a href="Tezos.Common.Chain.html#ChainTag_Hash"><span class="hs-identifier hs-var">ChainTag_Hash</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#chainAPI%27"><span class="hs-identifier hs-var">chainAPI'</span></a><span>
</span><a name="line-149"></a><span>
</span><a name="line-150"></a><span class="hs-identifier">chainAPI'</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">FromJSON</span><span> </span><a href="#local-6989586621680036295"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Text</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Chain.html#ChainTag"><span class="hs-identifier hs-type">ChainTag</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-type">RpcQuery</span></a><span> </span><a href="#local-6989586621680036295"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-151"></a><a name="chainAPI%27"><a href="Tezos.V004.NodeRPC.Class.html#chainAPI%27"><span class="hs-identifier">chainAPI'</span></a></a><span> </span><a name="local-6989586621680036301"><a href="#local-6989586621680036301"><span class="hs-identifier">path</span></a></a><span> </span><a name="local-6989586621680036302"><a href="#local-6989586621680036302"><span class="hs-identifier">chainId</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#plainNodeRequest"><span class="hs-identifier hs-var">plainNodeRequest</span></a><span> </span><span class="hs-identifier hs-var">Http.methodGet</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-string">&quot;/chains/&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="Tezos.Common.Chain.html#toChainTagText"><span class="hs-identifier hs-var">toChainTagText</span></a><span> </span><a href="#local-6989586621680036302"><span class="hs-identifier hs-var">chainId</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621680036301"><span class="hs-identifier hs-var">path</span></a><span>
</span><a name="line-152"></a><span>
</span><a name="line-153"></a><span class="hs-identifier">blockAPI</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">FromJSON</span><span> </span><a href="#local-6989586621680036294"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Text</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-type">RpcQuery</span></a><span> </span><a href="#local-6989586621680036294"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-154"></a><a name="blockAPI"><a href="Tezos.V004.NodeRPC.Class.html#blockAPI"><span class="hs-identifier">blockAPI</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">.</span><span> </span><a href="Tezos.Common.Chain.html#ChainTag_Hash"><span class="hs-identifier hs-var">ChainTag_Hash</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#blockAPI%27"><span class="hs-identifier hs-var">blockAPI'</span></a><span>
</span><a name="line-155"></a><span>
</span><a name="line-156"></a><span class="hs-identifier">blockAPI'</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">FromJSON</span><span> </span><a href="#local-6989586621680036293"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Text</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Chain.html#ChainTag"><span class="hs-identifier hs-type">ChainTag</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-type">RpcQuery</span></a><span> </span><a href="#local-6989586621680036293"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-157"></a><a name="blockAPI%27"><a href="Tezos.V004.NodeRPC.Class.html#blockAPI%27"><span class="hs-identifier">blockAPI'</span></a></a><span> </span><a name="local-6989586621680036303"><a href="#local-6989586621680036303"><span class="hs-identifier">path</span></a></a><span> </span><a name="local-6989586621680036304"><a href="#local-6989586621680036304"><span class="hs-identifier">chainId</span></a></a><span> </span><a name="local-6989586621680036305"><a href="#local-6989586621680036305"><span class="hs-identifier">blockHash</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#plainNodeRequest"><span class="hs-identifier hs-var">plainNodeRequest</span></a><span> </span><span class="hs-identifier hs-var">Http.methodGet</span><span> </span><span class="hs-special">(</span><a href="Tezos.V004.NodeRPC.Class.html#chainBlockUrl%27"><span class="hs-identifier hs-var">chainBlockUrl'</span></a><span> </span><a href="#local-6989586621680036304"><span class="hs-identifier hs-var">chainId</span></a><span> </span><a href="#local-6989586621680036305"><span class="hs-identifier hs-var">blockHash</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621680036303"><span class="hs-identifier hs-var">path</span></a><span class="hs-special">)</span><span>
</span><a name="line-158"></a><span>
</span><a name="line-159"></a><span class="hs-keyword">instance</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#QueryNode"><span class="hs-identifier hs-type">QueryNode</span></a><span> </span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-type">RpcQuery</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-160"></a><span>  </span><a name="local-8214565720324810983"><a href="Tezos.V004.NodeRPC.Class.html#rConnections"><span class="hs-identifier">rConnections</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680036123"><span class="hs-identifier hs-var">decoder</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#plainNodeRequest"><span class="hs-identifier hs-var">plainNodeRequest</span></a><span> </span><span class="hs-identifier hs-var">Http.methodGet</span><span> </span><span class="hs-string">&quot;/network/connections&quot;</span><span>
</span><a name="line-161"></a><span>    </span><span class="hs-keyword">where</span><span>
</span><a name="line-162"></a><span>      </span><span class="hs-identifier">decoder</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Aeson.Value</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Word64</span><span>
</span><a name="line-163"></a><span>      </span><a name="local-6989586621680036123"><a href="#local-6989586621680036123"><span class="hs-identifier">decoder</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fromIntegral</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">length</span><span>
</span><a name="line-164"></a><span>  </span><a name="local-8214565720324810984"><a href="Tezos.V004.NodeRPC.Class.html#rNetworkStat"><span class="hs-identifier">rNetworkStat</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#plainNodeRequest"><span class="hs-identifier hs-var">plainNodeRequest</span></a><span> </span><span class="hs-identifier hs-var">Http.methodGet</span><span> </span><span class="hs-string">&quot;/network/stat&quot;</span><span>
</span><a name="line-165"></a><span>  </span><a name="local-8214565720324810985"><a href="Tezos.V004.NodeRPC.Class.html#rCheckpoint"><span class="hs-identifier">rCheckpoint</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#chainAPI"><span class="hs-identifier hs-var">chainAPI</span></a><span> </span><span class="hs-string">&quot;/checkpoint&quot;</span><span>
</span><a name="line-166"></a><span>
</span><a name="line-167"></a><span class="hs-keyword">instance</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#MonitorHeads"><span class="hs-identifier hs-type">MonitorHeads</span></a><span> </span><a href="Tezos.V004.NodeRPC.Class.html#PlainNodeStream"><span class="hs-identifier hs-type">PlainNodeStream</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-168"></a><span>  </span><a name="local-8214565720324810981"><a href="Tezos.V004.NodeRPC.Class.html#rMonitorHeads"><span class="hs-identifier">rMonitorHeads</span></a></a><span> </span><a name="local-6989586621680036122"><a href="#local-6989586621680036122"><span class="hs-identifier">chainId</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#PlainNodeStream"><span class="hs-identifier hs-var">PlainNodeStream</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#plainNodeRequest"><span class="hs-identifier hs-var">plainNodeRequest</span></a><span> </span><span class="hs-identifier hs-var">Http.methodGet</span><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;/monitor/heads/&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#toBase58Text"><span class="hs-identifier hs-var">toBase58Text</span></a><span> </span><a href="#local-6989586621680036122"><span class="hs-identifier hs-var">chainId</span></a><span class="hs-special">)</span><span>
</span><a name="line-169"></a><span>
</span><a name="line-170"></a><span class="hs-keyword">instance</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#Injection"><span class="hs-identifier hs-type">Injection</span></a><span> </span><a href="Tezos.V004.NodeRPC.Class.html#RpcQuery"><span class="hs-identifier hs-type">RpcQuery</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-171"></a><span>  </span><a name="local-8214565720324810979"><a href="Tezos.V004.NodeRPC.Class.html#rInjectOperation"><span class="hs-identifier">rInjectOperation</span></a></a><span> </span><a name="local-6989586621680036121"><a href="#local-6989586621680036121"><span class="hs-identifier">contents</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-172"></a><span>    </span><a href="Tezos.V004.NodeRPC.Class.html#postNodeRequest"><span class="hs-identifier hs-var">postNodeRequest</span></a><span>
</span><a name="line-173"></a><span>      </span><span class="hs-special">(</span><a href="Tezos.Common.Base16ByteString.html#Base16ByteString"><span class="hs-identifier hs-var">Base16ByteString</span></a><span> </span><a href="#local-6989586621680036121"><span class="hs-identifier hs-var">contents</span></a><span class="hs-special">)</span><span>
</span><a name="line-174"></a><span>      </span><span class="hs-string">&quot;/injection/operation&quot;</span><span>
</span><a name="line-175"></a><span>
</span><a name="line-176"></a><span class="hs-identifier">chainBlockUrl</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.Common.Base58Check.html#ChainId"><span class="hs-identifier hs-type">ChainId</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Text</span><span>
</span><a name="line-177"></a><a name="chainBlockUrl"><a href="Tezos.V004.NodeRPC.Class.html#chainBlockUrl"><span class="hs-identifier">chainBlockUrl</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.V004.NodeRPC.Class.html#chainBlockUrl%27"><span class="hs-identifier hs-var">chainBlockUrl'</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Tezos.Common.Chain.html#ChainTag_Hash"><span class="hs-identifier hs-var">ChainTag_Hash</span></a><span>
</span><a name="line-178"></a><span>
</span><a name="line-179"></a><span class="hs-identifier">chainBlockUrl'</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.Common.Chain.html#ChainTag"><span class="hs-identifier hs-type">ChainTag</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#BlockHash"><span class="hs-identifier hs-type">BlockHash</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Text</span><span>
</span><a name="line-180"></a><a name="chainBlockUrl%27"><a href="Tezos.V004.NodeRPC.Class.html#chainBlockUrl%27"><span class="hs-identifier">chainBlockUrl'</span></a></a><span> </span><a name="local-6989586621680036306"><a href="#local-6989586621680036306"><span class="hs-identifier">chainId</span></a></a><span> </span><a name="local-6989586621680036307"><a href="#local-6989586621680036307"><span class="hs-identifier">blockHash</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;/chains/&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="Tezos.Common.Chain.html#toChainTagText"><span class="hs-identifier hs-var">toChainTagText</span></a><span> </span><a href="#local-6989586621680036306"><span class="hs-identifier hs-var">chainId</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot;/blocks/&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="Tezos.Common.Base58Check.html#toBase58Text"><span class="hs-identifier hs-var">toBase58Text</span></a><span> </span><a href="#local-6989586621680036307"><span class="hs-identifier hs-var">blockHash</span></a><span>
</span><a name="line-181"></a><span>
</span><a name="line-182"></a><span class="hs-identifier">dynamicParamRightsRangeToQueryArg</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><a href="Tezos.V004.Level.html#RawLevel"><span class="hs-identifier hs-type">RawLevel</span></a><span> </span><a href="Tezos.V004.Level.html#Cycle"><span class="hs-identifier hs-type">Cycle</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Text</span><span>
</span><a name="line-183"></a><a name="dynamicParamRightsRangeToQueryArg"><a href="Tezos.V004.NodeRPC.Class.html#dynamicParamRightsRangeToQueryArg"><span class="hs-identifier">dynamicParamRightsRangeToQueryArg</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><a name="line-184"></a><span>  </span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-special">(</span><a href="Tezos.V004.Level.html#RawLevel"><span class="hs-identifier hs-var">RawLevel</span></a><span> </span><a name="local-6989586621680036308"><a href="#local-6989586621680036308"><span class="hs-identifier">x</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-string">&quot;level=&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">T.pack</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621680036308"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-185"></a><span>  </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a href="Tezos.V004.Level.html#Cycle"><span class="hs-identifier hs-var">Cycle</span></a><span> </span><a name="local-6989586621680036309"><a href="#local-6989586621680036309"><span class="hs-identifier">x</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-string">&quot;cycle=&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">T.pack</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621680036309"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-186"></a></pre></body></html>