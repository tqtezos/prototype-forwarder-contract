<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><a name="line-2"></a><span class="hs-pragma">{-# LANGUAGE DefaultSignatures #-}</span><span>
</span><a name="line-3"></a><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><a name="line-4"></a><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><a name="line-5"></a><span class="hs-pragma">{-# LANGUAGE InstanceSigs #-}</span><span>
</span><a name="line-6"></a><span class="hs-pragma">{-# LANGUAGE PolyKinds #-}</span><span>
</span><a name="line-7"></a><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><a name="line-8"></a><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><a name="line-9"></a><span class="hs-pragma">{-# LANGUAGE TemplateHaskell #-}</span><span>
</span><a name="line-10"></a><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><a name="line-11"></a><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><a name="line-12"></a><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><a name="line-13"></a><span>
</span><a name="line-14"></a><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><a name="line-15"></a><span class="hs-comment">-- |</span><span>
</span><a name="line-16"></a><span class="hs-comment">-- Module      :  Data.Singletons.Prelude.Monad.Internal</span><span>
</span><a name="line-17"></a><span class="hs-comment">-- Copyright   :  (C) 2018 Ryan Scott</span><span>
</span><a name="line-18"></a><span class="hs-comment">-- License     :  BSD-style (see LICENSE)</span><span>
</span><a name="line-19"></a><span class="hs-comment">-- Maintainer  :  Ryan Scott</span><span>
</span><a name="line-20"></a><span class="hs-comment">-- Stability   :  experimental</span><span>
</span><a name="line-21"></a><span class="hs-comment">-- Portability :  non-portable</span><span>
</span><a name="line-22"></a><span class="hs-comment">--</span><span>
</span><a name="line-23"></a><span class="hs-comment">-- Defines the promoted and singled versions of:</span><span>
</span><a name="line-24"></a><span class="hs-comment">--</span><span>
</span><a name="line-25"></a><span class="hs-comment">-- * Functor</span><span>
</span><a name="line-26"></a><span class="hs-comment">-- * Applicative</span><span>
</span><a name="line-27"></a><span class="hs-comment">-- * Alternative</span><span>
</span><a name="line-28"></a><span class="hs-comment">-- * Monad</span><span>
</span><a name="line-29"></a><span class="hs-comment">-- * MonadPlus</span><span>
</span><a name="line-30"></a><span class="hs-comment">--</span><span>
</span><a name="line-31"></a><span class="hs-comment">-- As well as auxiliary definitions.</span><span>
</span><a name="line-32"></a><span class="hs-comment">--</span><span>
</span><a name="line-33"></a><span class="hs-comment">-- This module exists to break up import cycles.</span><span>
</span><a name="line-34"></a><span class="hs-comment">--</span><span>
</span><a name="line-35"></a><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><a name="line-36"></a><span>
</span><a name="line-37"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Singletons.Prelude.Monad.Internal</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-38"></a><span>
</span><a name="line-39"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Applicative</span><span>
</span><a name="line-40"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad</span><span>
</span><a name="line-41"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Kind</span><span>
</span><a name="line-42"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.List.NonEmpty</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">NonEmpty</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-43"></a><span class="hs-keyword">import</span><span> </span><a href="Data.Singletons.Prelude.Base.html"><span class="hs-identifier">Data.Singletons.Prelude.Base</span></a><span>
</span><a name="line-44"></a><span class="hs-keyword">import</span><span> </span><a href="Data.Singletons.Prelude.Instances.html"><span class="hs-identifier">Data.Singletons.Prelude.Instances</span></a><span>
</span><a name="line-45"></a><span class="hs-keyword">import</span><span> </span><a href="Data.Singletons.Single.html"><span class="hs-identifier">Data.Singletons.Single</span></a><span>
</span><a name="line-46"></a><span class="hs-keyword">import</span><span> </span><a href="Data.Singletons.TypeLits.Internal.html"><span class="hs-identifier">Data.Singletons.TypeLits.Internal</span></a><span>
</span><a name="line-47"></a><span>
</span><a name="line-48"></a><span class="hs-comment">{-
Note [How to get the right kinds when promoting Functor and friends]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
To avoid running afoul of a CUSK validity check (see Note [CUSKification]),
classes with type parameters that lack explicit kind signatures will be
defaulted to be of kind Type. This is not what you want for Functor, however,
since its argument is of kind (Type -&gt; Type), so we must explicitly use this
kind when declaring the Functor class (and other classes in this module).
-}</span><span>
</span><a name="line-57"></a><span>
</span><a name="line-58"></a><span class="hs-special">$(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">singletonsOnly</span></a><span> </span><span class="hs-special">[d|</span><span>
</span><a name="line-59"></a><span>  </span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">4</span><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;$</span></a><span>
</span><a name="line-60"></a><span>
</span><a name="line-61"></a><span>  </span><span class="hs-comment">{- -| The 'Functor' class is used for types that can be mapped over.
  Instances of 'Functor' should satisfy the following laws:

  &gt; fmap id  ==  id
  &gt; fmap (f . g)  ==  fmap f . fmap g

  The instances of 'Functor' for lists, 'Data.Maybe.Maybe' and 'System.IO.IO'
  satisfy these laws.
  -}</span><span>
</span><a name="line-70"></a><span>
</span><a name="line-71"></a><span>  </span><span class="hs-keyword">class</span><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Functor</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Type</span></a><span class="hs-special">)</span><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-72"></a><span>      </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">fmap</span></a><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-73"></a><span>
</span><a name="line-74"></a><span>      </span><span class="hs-comment">-- -| Replace all locations in the input with the same value.</span><span>
</span><a name="line-75"></a><span>      </span><span class="hs-comment">-- The default definition is @'fmap' . 'const'@, but this may be</span><span>
</span><a name="line-76"></a><span>      </span><span class="hs-comment">-- overridden with a more efficient version.</span><span>
</span><a name="line-77"></a><span>      </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;$</span></a><span class="hs-special">)</span><span>        </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-78"></a><span>      </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;$</span></a><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">fmap</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">.</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">const</span></a><span>
</span><a name="line-79"></a><span>
</span><a name="line-80"></a><span>  </span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">4</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span class="hs-special">,</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;*</span></a><span class="hs-special">,</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">*&gt;</span></a><span class="hs-special">,</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;**&gt;</span></a><span>
</span><a name="line-81"></a><span>
</span><a name="line-82"></a><span>  </span><span class="hs-comment">-- -| A functor with application, providing operations to</span><span>
</span><a name="line-83"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-84"></a><span>  </span><span class="hs-comment">-- -* embed pure expressions ('pure'), and</span><span>
</span><a name="line-85"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-86"></a><span>  </span><span class="hs-comment">-- -* sequence computations and combine their results ('&lt;*&gt;' and 'liftA2').</span><span>
</span><a name="line-87"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-88"></a><span>  </span><span class="hs-comment">-- A minimal complete definition must include implementations of 'pure'</span><span>
</span><a name="line-89"></a><span>  </span><span class="hs-comment">-- and of either '&lt;*&gt;' or 'liftA2'. If it defines both, then they must behave</span><span>
</span><a name="line-90"></a><span>  </span><span class="hs-comment">-- the same as their default definitions:</span><span>
</span><a name="line-91"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-92"></a><span>  </span><span class="hs-comment">--      @('&lt;*&gt;') = 'liftA2' 'id'@</span><span>
</span><a name="line-93"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-94"></a><span>  </span><span class="hs-comment">--      @'liftA2' f x y = f '&lt;$&gt;' x '&lt;*&gt;' y@</span><span>
</span><a name="line-95"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-96"></a><span>  </span><span class="hs-comment">-- Further, any definition must satisfy the following:</span><span>
</span><a name="line-97"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-98"></a><span>  </span><span class="hs-comment">-- [/identity/]</span><span>
</span><a name="line-99"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-100"></a><span>  </span><span class="hs-comment">--      @'pure' 'id' '&lt;*&gt;' v = v@</span><span>
</span><a name="line-101"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-102"></a><span>  </span><span class="hs-comment">-- [/composition/]</span><span>
</span><a name="line-103"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-104"></a><span>  </span><span class="hs-comment">--      @'pure' (.) '&lt;*&gt;' u '&lt;*&gt;' v '&lt;*&gt;' w = u '&lt;*&gt;' (v '&lt;*&gt;' w)@</span><span>
</span><a name="line-105"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-106"></a><span>  </span><span class="hs-comment">-- [/homomorphism/]</span><span>
</span><a name="line-107"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-108"></a><span>  </span><span class="hs-comment">--      @'pure' f '&lt;*&gt;' 'pure' x = 'pure' (f x)@</span><span>
</span><a name="line-109"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-110"></a><span>  </span><span class="hs-comment">-- [/interchange/]</span><span>
</span><a name="line-111"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-112"></a><span>  </span><span class="hs-comment">--      @u '&lt;*&gt;' 'pure' y = 'pure' ('$' y) '&lt;*&gt;' u@</span><span>
</span><a name="line-113"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-114"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-115"></a><span>  </span><span class="hs-comment">-- The other methods have the following default definitions, which may</span><span>
</span><a name="line-116"></a><span>  </span><span class="hs-comment">-- be overridden with equivalent specialized implementations:</span><span>
</span><a name="line-117"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-118"></a><span>  </span><span class="hs-comment">--   * @u '*&gt;' v = ('id' '&lt;$' u) '&lt;*&gt;' v@</span><span>
</span><a name="line-119"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-120"></a><span>  </span><span class="hs-comment">--   * @u '&lt;*' v = 'liftA2' 'const' u v@</span><span>
</span><a name="line-121"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-122"></a><span>  </span><span class="hs-comment">-- As a consequence of these laws, the 'Functor' instance for @f@ will satisfy</span><span>
</span><a name="line-123"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-124"></a><span>  </span><span class="hs-comment">--   * @'fmap' f x = 'pure' f '&lt;*&gt;' x@</span><span>
</span><a name="line-125"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-126"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-127"></a><span>  </span><span class="hs-comment">-- It may be useful to note that supposing</span><span>
</span><a name="line-128"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-129"></a><span>  </span><span class="hs-comment">--      @forall x y. p (q x y) = f x . g y@</span><span>
</span><a name="line-130"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-131"></a><span>  </span><span class="hs-comment">-- it follows from the above that</span><span>
</span><a name="line-132"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-133"></a><span>  </span><span class="hs-comment">--      @'liftA2' p ('liftA2' q u v) = 'liftA2' f u . 'liftA2' g v@</span><span>
</span><a name="line-134"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-135"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-136"></a><span>  </span><span class="hs-comment">-- If @f@ is also a 'Monad', it should satisfy</span><span>
</span><a name="line-137"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-138"></a><span>  </span><span class="hs-comment">--   * @'pure' = 'return'@</span><span>
</span><a name="line-139"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-140"></a><span>  </span><span class="hs-comment">--   * @('&lt;*&gt;') = 'ap'@</span><span>
</span><a name="line-141"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-142"></a><span>  </span><span class="hs-comment">--   * @('*&gt;') = ('&gt;&gt;')@</span><span>
</span><a name="line-143"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-144"></a><span>  </span><span class="hs-comment">-- (which implies that 'pure' and '&lt;*&gt;' satisfy the applicative functor laws).</span><span>
</span><a name="line-145"></a><span>
</span><a name="line-146"></a><span>  </span><span class="hs-keyword">class</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Functor</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Applicative</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Type</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-147"></a><span>      </span><span class="hs-comment">-- {-# MINIMAL pure, ((&lt;*&gt;) | liftA2) #-}</span><span>
</span><a name="line-148"></a><span>      </span><span class="hs-comment">-- -| Lift a value.</span><span>
</span><a name="line-149"></a><span>      </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">pure</span></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-150"></a><span>
</span><a name="line-151"></a><span>      </span><span class="hs-comment">-- -| Sequential application.</span><span>
</span><a name="line-152"></a><span>      </span><span class="hs-comment">--</span><span>
</span><a name="line-153"></a><span>      </span><span class="hs-comment">-- A few functors support an implementation of '&lt;*&gt;' that is more</span><span>
</span><a name="line-154"></a><span>      </span><span class="hs-comment">-- efficient than the default one.</span><span>
</span><a name="line-155"></a><span>      </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-156"></a><span>      </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftA2</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">id</span></a><span>
</span><a name="line-157"></a><span>
</span><a name="line-158"></a><span>      </span><span class="hs-comment">-- -| Lift a binary function to actions.</span><span>
</span><a name="line-159"></a><span>      </span><span class="hs-comment">--</span><span>
</span><a name="line-160"></a><span>      </span><span class="hs-comment">-- Some functors support an implementation of 'liftA2' that is more</span><span>
</span><a name="line-161"></a><span>      </span><span class="hs-comment">-- efficient than the default one. In particular, if 'fmap' is an</span><span>
</span><a name="line-162"></a><span>      </span><span class="hs-comment">-- expensive operation, it is likely better to use 'liftA2' than to</span><span>
</span><a name="line-163"></a><span>      </span><span class="hs-comment">-- 'fmap' over the structure and then use '&lt;*&gt;'.</span><span>
</span><a name="line-164"></a><span>      </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftA2</span></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">c</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-165"></a><span>      </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftA2</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">fmap</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-166"></a><span>
</span><a name="line-167"></a><span>      </span><span class="hs-comment">-- -| Sequence actions, discarding the value of the first argument.</span><span>
</span><a name="line-168"></a><span>      </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">*&gt;</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-169"></a><span>      </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a1</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">*&gt;</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a2</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">id</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;$</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a1</span></a><span class="hs-special">)</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a2</span></a><span>
</span><a name="line-170"></a><span>      </span><span class="hs-comment">-- This is essentially the same as liftA2 (flip const), but if the</span><span>
</span><a name="line-171"></a><span>      </span><span class="hs-comment">-- Functor instance has an optimized (&lt;$), it may be better to use</span><span>
</span><a name="line-172"></a><span>      </span><span class="hs-comment">-- that instead. Before liftA2 became a method, this definition</span><span>
</span><a name="line-173"></a><span>      </span><span class="hs-comment">-- was strictly better, but now it depends on the functor. For a</span><span>
</span><a name="line-174"></a><span>      </span><span class="hs-comment">-- functor supporting a sharing-enhancing (&lt;$), this definition</span><span>
</span><a name="line-175"></a><span>      </span><span class="hs-comment">-- may reduce allocation by preventing a1 from ever being fully</span><span>
</span><a name="line-176"></a><span>      </span><span class="hs-comment">-- realized. In an implementation with a boring (&lt;$) but an optimizing</span><span>
</span><a name="line-177"></a><span>      </span><span class="hs-comment">-- liftA2, it would likely be better to define (*&gt;) using liftA2.</span><span>
</span><a name="line-178"></a><span>
</span><a name="line-179"></a><span>      </span><span class="hs-comment">-- -| Sequence actions, discarding the value of the second argument.</span><span>
</span><a name="line-180"></a><span>      </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;*</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-181"></a><span>      </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;*</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftA2</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">const</span></a><span>
</span><a name="line-182"></a><span>
</span><a name="line-183"></a><span>  </span><span class="hs-comment">-- -| A variant of '&lt;*&gt;' with the arguments reversed.</span><span>
</span><a name="line-184"></a><span>  </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;**&gt;</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Applicative</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-185"></a><span>  </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;**&gt;</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftA2</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-186"></a><span>  </span><span class="hs-comment">-- Don't use $ here, see the note at the top of the page</span><span>
</span><a name="line-187"></a><span>
</span><a name="line-188"></a><span>  </span><span class="hs-comment">-- -| Lift a function to actions.</span><span>
</span><a name="line-189"></a><span>  </span><span class="hs-comment">-- This function may be used as a value for `fmap` in a `Functor` instance.</span><span>
</span><a name="line-190"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftA</span></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Applicative</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-191"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftA</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">pure</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-192"></a><span>  </span><span class="hs-comment">-- Caution: since this may be used for `fmap`, we can't use the obvious</span><span>
</span><a name="line-193"></a><span>  </span><span class="hs-comment">-- definition of liftA = fmap.</span><span>
</span><a name="line-194"></a><span>
</span><a name="line-195"></a><span>  </span><span class="hs-comment">-- -| Lift a ternary function to actions.</span><span>
</span><a name="line-196"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftA3</span></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Applicative</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">c</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">d</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">c</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">d</span></a><span>
</span><a name="line-197"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftA3</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">c</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftA2</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-198"></a><span>
</span><a name="line-199"></a><span>  </span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">1</span><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&gt;&gt;</span></a><span class="hs-special">,</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&gt;&gt;=</span></a><span>
</span><a name="line-200"></a><span>  </span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">1</span><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">=&lt;&lt;</span></a><span>
</span><a name="line-201"></a><span>
</span><a name="line-202"></a><span>  </span><span class="hs-comment">-- -| The 'join' function is the conventional monad join operator. It</span><span>
</span><a name="line-203"></a><span>  </span><span class="hs-comment">-- is used to remove one level of monadic structure, projecting its</span><span>
</span><a name="line-204"></a><span>  </span><span class="hs-comment">-- bound argument into the outer level.</span><span>
</span><a name="line-205"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-206"></a><span>  </span><span class="hs-comment">-- ==== __Examples__</span><span>
</span><a name="line-207"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-208"></a><span>  </span><span class="hs-comment">-- A common use of 'join' is to run an 'IO' computation returned from</span><span>
</span><a name="line-209"></a><span>  </span><span class="hs-comment">-- an 'GHC.Conc.STM' transaction, since 'GHC.Conc.STM' transactions</span><span>
</span><a name="line-210"></a><span>  </span><span class="hs-comment">-- can't perform 'IO' directly. Recall that</span><span>
</span><a name="line-211"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-212"></a><span>  </span><span class="hs-comment">-- @</span><span>
</span><a name="line-213"></a><span>  </span><span class="hs-comment">-- 'GHC.Conc.atomically' :: STM a -&gt; IO a</span><span>
</span><a name="line-214"></a><span>  </span><span class="hs-comment">-- @</span><span>
</span><a name="line-215"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-216"></a><span>  </span><span class="hs-comment">-- is used to run 'GHC.Conc.STM' transactions atomically. So, by</span><span>
</span><a name="line-217"></a><span>  </span><span class="hs-comment">-- specializing the types of 'GHC.Conc.atomically' and 'join' to</span><span>
</span><a name="line-218"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-219"></a><span>  </span><span class="hs-comment">-- @</span><span>
</span><a name="line-220"></a><span>  </span><span class="hs-comment">-- 'GHC.Conc.atomically' :: STM (IO b) -&gt; IO (IO b)</span><span>
</span><a name="line-221"></a><span>  </span><span class="hs-comment">-- 'join'       :: IO (IO b)  -&gt; IO b</span><span>
</span><a name="line-222"></a><span>  </span><span class="hs-comment">-- @</span><span>
</span><a name="line-223"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-224"></a><span>  </span><span class="hs-comment">-- we can compose them as</span><span>
</span><a name="line-225"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-226"></a><span>  </span><span class="hs-comment">-- @</span><span>
</span><a name="line-227"></a><span>  </span><span class="hs-comment">-- 'join' . 'GHC.Conc.atomically' :: STM (IO b) -&gt; IO b</span><span>
</span><a name="line-228"></a><span>  </span><span class="hs-comment">-- @</span><span>
</span><a name="line-229"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-230"></a><span>  </span><span class="hs-comment">-- to run an 'GHC.Conc.STM' transaction and the 'IO' action it</span><span>
</span><a name="line-231"></a><span>  </span><span class="hs-comment">-- returns.</span><span>
</span><a name="line-232"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">join</span></a><span>              </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Monad</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-233"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">join</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x</span></a><span>            </span><span class="hs-glyph">=</span><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&gt;&gt;=</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">id</span></a><span>
</span><a name="line-234"></a><span>
</span><a name="line-235"></a><span>  </span><span class="hs-comment">{- -| The 'Monad' class defines the basic operations over a /monad/,
  a concept from a branch of mathematics known as /category theory/.
  From the perspective of a Haskell programmer, however, it is best to
  think of a monad as an /abstract datatype/ of actions.
  Haskell's @do@ expressions provide a convenient syntax for writing
  monadic expressions.

  Instances of 'Monad' should satisfy the following laws:

  * @'return' a '&gt;&gt;=' k  =  k a@
  * @m '&gt;&gt;=' 'return'  =  m@
  * @m '&gt;&gt;=' (\\x -&gt; k x '&gt;&gt;=' h)  =  (m '&gt;&gt;=' k) '&gt;&gt;=' h@

  Furthermore, the 'Monad' and 'Applicative' operations should relate as follows:

  * @'pure' = 'return'@
  * @('&lt;*&gt;') = 'ap'@

  The above laws imply:

  * @'fmap' f xs  =  xs '&gt;&gt;=' 'return' . f@
  * @('&gt;&gt;') = ('*&gt;')@

  and that 'pure' and ('&lt;*&gt;') satisfy the applicative functor laws.

  The instances of 'Monad' for lists, 'Data.Maybe.Maybe' and 'System.IO.IO'
  defined in the &quot;Prelude&quot; satisfy these laws.
  -}</span><span>
</span><a name="line-263"></a><span>  </span><span class="hs-keyword">class</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Applicative</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Monad</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Type</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-264"></a><span>      </span><span class="hs-comment">-- -| Sequentially compose two actions, passing any value produced</span><span>
</span><a name="line-265"></a><span>      </span><span class="hs-comment">-- by the first as an argument to the second.</span><span>
</span><a name="line-266"></a><span>      </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&gt;&gt;=</span></a><span class="hs-special">)</span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">.</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-267"></a><span>
</span><a name="line-268"></a><span>      </span><span class="hs-comment">-- -| Sequentially compose two actions, discarding any value produced</span><span>
</span><a name="line-269"></a><span>      </span><span class="hs-comment">-- by the first, like sequencing operators (such as the semicolon)</span><span>
</span><a name="line-270"></a><span>      </span><span class="hs-comment">-- in imperative languages.</span><span>
</span><a name="line-271"></a><span>      </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&gt;&gt;</span></a><span class="hs-special">)</span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">.</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-272"></a><span>      </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&gt;&gt;</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">k</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&gt;&gt;=</span></a><span> </span><span class="hs-glyph">\</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">_</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">k</span></a><span> </span><span class="hs-comment">-- See Note [Recursive bindings for Applicative/Monad]</span><span>
</span><a name="line-273"></a><span>
</span><a name="line-274"></a><span>      </span><span class="hs-comment">-- -| Inject a value into the monadic type.</span><span>
</span><a name="line-275"></a><span>      </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">return</span></a><span>      </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-276"></a><span>      </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">return</span></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">pure</span></a><span>
</span><a name="line-277"></a><span>
</span><a name="line-278"></a><span>      </span><span class="hs-comment">-- -| Fail with a message.  This operation is not part of the</span><span>
</span><a name="line-279"></a><span>      </span><span class="hs-comment">-- mathematical definition of a monad, but is invoked on pattern-match</span><span>
</span><a name="line-280"></a><span>      </span><span class="hs-comment">-- failure in a @do@ expression.</span><span>
</span><a name="line-281"></a><span>      </span><span class="hs-comment">--</span><span>
</span><a name="line-282"></a><span>      </span><span class="hs-comment">-- As part of the MonadFail proposal (MFP), this function is moved</span><span>
</span><a name="line-283"></a><span>      </span><span class="hs-comment">-- to its own class 'MonadFail' (see &quot;Control.Monad.Fail&quot; for more</span><span>
</span><a name="line-284"></a><span>      </span><span class="hs-comment">-- details). The definition here will be removed in a future</span><span>
</span><a name="line-285"></a><span>      </span><span class="hs-comment">-- release.</span><span>
</span><a name="line-286"></a><span>      </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">fail</span></a><span>        </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Symbol</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-287"></a><span>      </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">fail</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">s</span></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">error</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">s</span></a><span>
</span><a name="line-288"></a><span>
</span><a name="line-289"></a><span>  </span><span class="hs-comment">{- Note [Recursive bindings for Applicative/Monad]
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  The original Applicative/Monad proposal stated that after
  implementation, the designated implementation of (&gt;&gt;) would become

    (&gt;&gt;) :: forall a b. m a -&gt; m b -&gt; m b
    (&gt;&gt;) = (*&gt;)

  by default. You might be inclined to change this to reflect the stated
  proposal, but you really shouldn't! Why? Because people tend to define
  such instances the /other/ way around: in particular, it is perfectly
  legitimate to define an instance of Applicative (*&gt;) in terms of (&gt;&gt;),
  which would lead to an infinite loop for the default implementation of
  Monad! And people do this in the wild.

  This turned into a nasty bug that was tricky to track down, and rather
  than eliminate it everywhere upstream, it's easier to just retain the
  original default.

  -}</span><span>
</span><a name="line-310"></a><span>
</span><a name="line-311"></a><span>  </span><span class="hs-comment">-- -| Same as '&gt;&gt;=', but with the arguments interchanged.</span><span>
</span><a name="line-312"></a><span>  </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">=&lt;&lt;</span></a><span class="hs-special">)</span><span>           </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Monad</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-313"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">=&lt;&lt;</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x</span></a><span>         </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&gt;&gt;=</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span>
</span><a name="line-314"></a><span>
</span><a name="line-315"></a><span>  </span><span class="hs-comment">-- -| Conditional execution of 'Applicative' expressions. For example,</span><span>
</span><a name="line-316"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-317"></a><span>  </span><span class="hs-comment">-- &gt; when debug (putStrLn &quot;Debugging&quot;)</span><span>
</span><a name="line-318"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-319"></a><span>  </span><span class="hs-comment">-- will output the string @Debugging@ if the Boolean value @debug@</span><span>
</span><a name="line-320"></a><span>  </span><span class="hs-comment">-- is 'True', and otherwise do nothing.</span><span>
</span><a name="line-321"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">when</span></a><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Applicative</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Bool</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-322"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">when</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">s</span></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">p</span></a><span> </span><span class="hs-keyword">then</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">s</span></a><span> </span><span class="hs-keyword">else</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">pure</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-323"></a><span>
</span><a name="line-324"></a><span>  </span><span class="hs-comment">-- -| Promote a function to a monad.</span><span>
</span><a name="line-325"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftM</span></a><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Monad</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a1</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a1</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-326"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftM</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m1</span></a><span>              </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x1</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m1</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x1</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-327"></a><span>
</span><a name="line-328"></a><span>  </span><span class="hs-comment">-- -| Promote a function to a monad, scanning the monadic arguments from</span><span>
</span><a name="line-329"></a><span>  </span><span class="hs-comment">-- left to right.  For example,</span><span>
</span><a name="line-330"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-331"></a><span>  </span><span class="hs-comment">-- &gt; liftM2 (+) [0,1] [0,2] = [0,2,1,3]</span><span>
</span><a name="line-332"></a><span>  </span><span class="hs-comment">-- &gt; liftM2 (+) (Just 1) Nothing = Nothing</span><span>
</span><a name="line-333"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-334"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftM2</span></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Monad</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a1</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a2</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a1</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a2</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-335"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftM2</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m1</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m2</span></a><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x1</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m1</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x2</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m2</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x1</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x2</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-336"></a><span>  </span><span class="hs-comment">-- Caution: since this may be used for `liftA2`, we can't use the obvious</span><span>
</span><a name="line-337"></a><span>  </span><span class="hs-comment">-- definition of liftM2 = liftA2.</span><span>
</span><a name="line-338"></a><span>
</span><a name="line-339"></a><span>  </span><span class="hs-comment">-- -| Promote a function to a monad, scanning the monadic arguments from</span><span>
</span><a name="line-340"></a><span>  </span><span class="hs-comment">-- left to right (cf. 'liftM2').</span><span>
</span><a name="line-341"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftM3</span></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Monad</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a1</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a2</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a3</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a1</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a2</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a3</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-342"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftM3</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m1</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m2</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m3</span></a><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x1</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m1</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x2</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m2</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x3</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m3</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x1</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x2</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x3</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-343"></a><span>
</span><a name="line-344"></a><span>  </span><span class="hs-comment">-- -| Promote a function to a monad, scanning the monadic arguments from</span><span>
</span><a name="line-345"></a><span>  </span><span class="hs-comment">-- left to right (cf. 'liftM2').</span><span>
</span><a name="line-346"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftM4</span></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Monad</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a1</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a2</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a3</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a4</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a1</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a2</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a3</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a4</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-347"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftM4</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m1</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m2</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m3</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m4</span></a><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x1</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m1</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x2</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m2</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x3</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m3</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x4</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m4</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x1</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x2</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x3</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x4</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-348"></a><span>
</span><a name="line-349"></a><span>  </span><span class="hs-comment">-- -| Promote a function to a monad, scanning the monadic arguments from</span><span>
</span><a name="line-350"></a><span>  </span><span class="hs-comment">-- left to right (cf. 'liftM2').</span><span>
</span><a name="line-351"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftM5</span></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Monad</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a1</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a2</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a3</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a4</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a5</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a1</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a2</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a3</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a4</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a5</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-352"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">liftM5</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m1</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m2</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m3</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m4</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m5</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x1</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m1</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x2</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m2</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x3</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m3</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x4</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m4</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x5</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m5</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x1</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x2</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x3</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x4</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x5</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-353"></a><span>
</span><a name="line-354"></a><span>  </span><span class="hs-comment">{- -| In many situations, the 'liftM' operations can be replaced by uses of
  'ap', which promotes function application.

  &gt; return f `ap` x1 `ap` ... `ap` xn

  is equivalent to

  &gt; liftMn f x1 x2 ... xn

  -}</span><span>
</span><a name="line-364"></a><span>
</span><a name="line-365"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">ap</span></a><span>                </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Monad</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-366"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">ap</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m1</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m2</span></a><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x1</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m1</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x2</span></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m2</span></a><span class="hs-special">;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">return</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x1</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">x2</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-367"></a><span>  </span><span class="hs-comment">-- Since many Applicative instances define (&lt;*&gt;) = ap, we</span><span>
</span><a name="line-368"></a><span>  </span><span class="hs-comment">-- cannot define ap = (&lt;*&gt;)</span><span>
</span><a name="line-369"></a><span>
</span><a name="line-370"></a><span>  </span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><a name="line-371"></a><span>  </span><span class="hs-comment">-- The Alternative class definition</span><span>
</span><a name="line-372"></a><span>
</span><a name="line-373"></a><span>  </span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">3</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;|&gt;</span></a><span>
</span><a name="line-374"></a><span>
</span><a name="line-375"></a><span>  </span><span class="hs-comment">-- -| A monoid on applicative functors.</span><span>
</span><a name="line-376"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-377"></a><span>  </span><span class="hs-comment">-- If defined, 'some' and 'many' should be the least solutions</span><span>
</span><a name="line-378"></a><span>  </span><span class="hs-comment">-- of the equations:</span><span>
</span><a name="line-379"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-380"></a><span>  </span><span class="hs-comment">-- -* @'some' v = (:) '&lt;$&gt;' v '&lt;*&gt;' 'many' v@</span><span>
</span><a name="line-381"></a><span>  </span><span class="hs-comment">--</span><span>
</span><a name="line-382"></a><span>  </span><span class="hs-comment">-- -* @'many' v = 'some' v '&lt;|&gt;' 'pure' []@</span><span>
</span><a name="line-383"></a><span>  </span><span class="hs-keyword">class</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Applicative</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Alternative</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Type</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-384"></a><span>      </span><span class="hs-comment">-- -| The identity of '&lt;|&gt;'</span><span>
</span><a name="line-385"></a><span>      </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">empty</span></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-386"></a><span>      </span><span class="hs-comment">-- -| An associative binary operation</span><span>
</span><a name="line-387"></a><span>      </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;|&gt;</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-388"></a><span>
</span><a name="line-389"></a><span>      </span><span class="hs-comment">{-
      some and many rely on infinite lists

      -- -| One or more.
      some :: f a -&gt; f [a]
      some v = some_v
        where
          many_v = some_v &lt;|&gt; pure []
          some_v = liftA2 (:) v many_v

      -- -| Zero or more.
      many :: f a -&gt; f [a]
      many v = many_v
        where
          many_v = some_v &lt;|&gt; pure []
          some_v = liftA2 (:) v many_v
      -}</span><span>
</span><a name="line-406"></a><span>
</span><a name="line-407"></a><span>  </span><span class="hs-comment">-- -| @'guard' b@ is @'pure' ()@ if @b@ is 'True',</span><span>
</span><a name="line-408"></a><span>  </span><span class="hs-comment">-- and 'empty' if @b@ is 'False'.</span><span>
</span><a name="line-409"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">guard</span></a><span>           </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Alternative</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Bool</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-410"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">guard</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">True</span></a><span>      </span><span class="hs-glyph">=</span><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">pure</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-411"></a><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">guard</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">False</span></a><span>     </span><span class="hs-glyph">=</span><span>  </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-412"></a><span>
</span><a name="line-413"></a><span>  </span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><a name="line-414"></a><span>  </span><span class="hs-comment">-- The MonadPlus class definition</span><span>
</span><a name="line-415"></a><span>
</span><a name="line-416"></a><span>  </span><span class="hs-comment">-- -| Monads that also support choice and failure.</span><span>
</span><a name="line-417"></a><span>  </span><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Alternative</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">,</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Monad</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">MonadPlus</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Type</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">Type</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-418"></a><span>     </span><span class="hs-comment">-- -| The identity of 'mplus'.  It should also satisfy the equations</span><span>
</span><a name="line-419"></a><span>     </span><span class="hs-comment">--</span><span>
</span><a name="line-420"></a><span>     </span><span class="hs-comment">-- &gt; mzero &gt;&gt;= f  =  mzero</span><span>
</span><a name="line-421"></a><span>     </span><span class="hs-comment">-- &gt; v &gt;&gt; mzero   =  mzero</span><span>
</span><a name="line-422"></a><span>     </span><span class="hs-comment">--</span><span>
</span><a name="line-423"></a><span>     </span><span class="hs-comment">-- The default definition is</span><span>
</span><a name="line-424"></a><span>     </span><span class="hs-comment">--</span><span>
</span><a name="line-425"></a><span>     </span><span class="hs-comment">-- @</span><span>
</span><a name="line-426"></a><span>     </span><span class="hs-comment">-- mzero = 'empty'</span><span>
</span><a name="line-427"></a><span>     </span><span class="hs-comment">-- @</span><span>
</span><a name="line-428"></a><span>     </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">mzero</span></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-429"></a><span>     </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">mzero</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-430"></a><span>
</span><a name="line-431"></a><span>     </span><span class="hs-comment">-- -| An associative operation. The default definition is</span><span>
</span><a name="line-432"></a><span>     </span><span class="hs-comment">--</span><span>
</span><a name="line-433"></a><span>     </span><span class="hs-comment">-- @</span><span>
</span><a name="line-434"></a><span>     </span><span class="hs-comment">-- mplus = ('&lt;|&gt;')</span><span>
</span><a name="line-435"></a><span>     </span><span class="hs-comment">-- @</span><span>
</span><a name="line-436"></a><span>     </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">mplus</span></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-437"></a><span>     </span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-identifier hs-var">mplus</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Internal.html#applySing"><span class="hs-operator hs-var">&lt;|&gt;</span></a><span class="hs-special">)</span><span>
</span><a name="line-438"></a><span>  </span><span class="hs-special">|]</span><span class="hs-special">)</span><span>
</span><a name="line-439"></a><span>
</span><a name="line-440"></a><span class="hs-comment">-- Workaround for #326</span><span>
</span><a name="line-441"></a><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">4</span><span> </span><a href="Data.Singletons.Prelude.Monad.Internal.html#%3C%24"><span class="hs-operator hs-var">&lt;$</span></a><span>
</span><a name="line-442"></a><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">4</span><span> </span><a href="Data.Singletons.Prelude.Monad.Internal.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span class="hs-special">,</span><span> </span><a href="Data.Singletons.Prelude.Monad.Internal.html#%3C%2A"><span class="hs-operator hs-var">&lt;*</span></a><span class="hs-special">,</span><span> </span><a href="Data.Singletons.Prelude.Monad.Internal.html#%2A%3E"><span class="hs-operator hs-var">*&gt;</span></a><span class="hs-special">,</span><span> </span><a href="Data.Singletons.Prelude.Monad.Internal.html#%3C%2A%2A%3E"><span class="hs-operator hs-var">&lt;**&gt;</span></a><span>
</span><a name="line-443"></a><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">1</span><span> </span><a href="Data.Singletons.Prelude.Monad.Internal.html#%3E%3E"><span class="hs-operator hs-var">&gt;&gt;</span></a><span class="hs-special">,</span><span> </span><a href="Data.Singletons.Prelude.Monad.Internal.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a><span>
</span><a name="line-444"></a><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">1</span><span> </span><a href="Data.Singletons.Prelude.Monad.Internal.html#%3D%3C%3C"><span class="hs-operator hs-var">=&lt;&lt;</span></a><span>
</span><a name="line-445"></a><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">3</span><span> </span><a href="Data.Singletons.Prelude.Monad.Internal.html#%3C%7C%3E"><span class="hs-operator hs-var">&lt;|&gt;</span></a><span>
</span><a name="line-446"></a><span>
</span><a name="line-447"></a><span class="hs-special">$(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">singletonsOnly</span></a><span> </span><span class="hs-special">[d|</span><span>
</span><a name="line-448"></a><span>  </span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><a name="line-449"></a><span>  </span><span class="hs-comment">-- Instances</span><span>
</span><a name="line-450"></a><span>
</span><a name="line-451"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Functor</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Maybe</span></a><span>
</span><a name="line-452"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Functor</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">NonEmpty</span></a><span>
</span><a name="line-453"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Functor</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-454"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Functor</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Either</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-455"></a><span>
</span><a name="line-456"></a><span>  </span><span class="hs-keyword">instance</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Applicative</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Maybe</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-457"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">pure</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Just</span></a><span>
</span><a name="line-458"></a><span>
</span><a name="line-459"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Just</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">f</span></a><span>  </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">m</span></a><span>       </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">fmap</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">m</span></a><span>
</span><a name="line-460"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Nothing</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">_m</span></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Nothing</span></a><span>
</span><a name="line-461"></a><span>
</span><a name="line-462"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">liftA2</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Just</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Just</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">y</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">y</span></a><span class="hs-special">)</span><span>
</span><a name="line-463"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">liftA2</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">_</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Just</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Nothing</span></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Nothing</span></a><span>
</span><a name="line-464"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">liftA2</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">_</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Nothing</span></a><span>  </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Just</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Nothing</span></a><span>
</span><a name="line-465"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">liftA2</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">_</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Nothing</span></a><span>  </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Nothing</span></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Nothing</span></a><span>
</span><a name="line-466"></a><span>
</span><a name="line-467"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Just</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">_m1</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">*&gt;</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">m2</span></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">m2</span></a><span>
</span><a name="line-468"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Nothing</span></a><span>  </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">*&gt;</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">_m2</span></a><span>     </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Nothing</span></a><span>
</span><a name="line-469"></a><span>
</span><a name="line-470"></a><span>  </span><span class="hs-keyword">instance</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Applicative</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">NonEmpty</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-471"></a><span>    </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">pure</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">:|</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-472"></a><span>    </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">ap</span></a><span>
</span><a name="line-473"></a><span>    </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">liftA2</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">liftM2</span></a><span>
</span><a name="line-474"></a><span>
</span><a name="line-475"></a><span>  </span><span class="hs-keyword">instance</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Applicative</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-476"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">pure</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">]</span><span>
</span><a name="line-477"></a><span>      </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">ap</span></a><span>
</span><a name="line-478"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">liftA2</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">liftM2</span></a><span>
</span><a name="line-479"></a><span>      </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">*&gt;</span></a><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&gt;&gt;</span></a><span class="hs-special">)</span><span>
</span><a name="line-480"></a><span>
</span><a name="line-481"></a><span>  </span><span class="hs-keyword">instance</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Applicative</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Either</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">e</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-482"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">pure</span></a><span>          </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Right</span></a><span>
</span><a name="line-483"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Left</span></a><span>  </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">e</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">_</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Left</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">e</span></a><span>
</span><a name="line-484"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Right</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&lt;*&gt;</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">r</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">fmap</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-485"></a><span>
</span><a name="line-486"></a><span>  </span><span class="hs-keyword">instance</span><span>  </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Monad</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Maybe</span></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-487"></a><span>      </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Just</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&gt;&gt;=</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">k</span></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">k</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-488"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Nothing</span></a><span>  </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&gt;&gt;=</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">_</span></a><span>      </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Nothing</span></a><span>
</span><a name="line-489"></a><span>
</span><a name="line-490"></a><span>      </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&gt;&gt;</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">*&gt;</span></a><span class="hs-special">)</span><span>
</span><a name="line-491"></a><span>
</span><a name="line-492"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">fail</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">_</span></a><span>              </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Nothing</span></a><span>
</span><a name="line-493"></a><span>
</span><a name="line-494"></a><span>  </span><span class="hs-keyword">instance</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Monad</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">NonEmpty</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-495"></a><span>    </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">:|</span></a><span> </span><span class="hs-keyword">as</span><span class="hs-special">)</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&gt;&gt;=</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">b</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">:|</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">bs</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">++</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">bs'</span></a><span class="hs-special">)</span><span>
</span><a name="line-496"></a><span>      </span><span class="hs-keyword">where</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">b</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">:|</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">bs</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-497"></a><span>            </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">bs'</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">as</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&gt;&gt;=</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">toList</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">.</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">f</span></a><span>
</span><a name="line-498"></a><span>            </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">toList</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">c</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">:|</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">cs</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">c</span></a><span> </span><span class="hs-glyph">:</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">cs</span></a><span>
</span><a name="line-499"></a><span>
</span><a name="line-500"></a><span>  </span><span class="hs-keyword">instance</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Monad</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-501"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">xs</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&gt;&gt;=</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">foldr</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">++</span></a><span class="hs-special">)</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">.</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">xs</span></a><span>
</span><a name="line-502"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">fail</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">_</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-503"></a><span>
</span><a name="line-504"></a><span>  </span><span class="hs-keyword">instance</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Monad</span></a><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Either</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">e</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-505"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Left</span></a><span>  </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">l</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&gt;&gt;=</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">_</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Left</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">l</span></a><span>
</span><a name="line-506"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Right</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">r</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&gt;&gt;=</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">k</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">k</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-507"></a><span>
</span><a name="line-508"></a><span>  </span><span class="hs-keyword">instance</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Alternative</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Maybe</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-509"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">empty</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Nothing</span></a><span>
</span><a name="line-510"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Nothing</span></a><span>    </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&lt;|&gt;</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">r</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-511"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">l</span></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Just</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&lt;|&gt;</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">_</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">l</span></a><span>
</span><a name="line-512"></a><span>
</span><a name="line-513"></a><span>  </span><span class="hs-keyword">instance</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Alternative</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-514"></a><span>      </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">empty</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-515"></a><span>      </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">&lt;|&gt;</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-operator hs-var">++</span></a><span class="hs-special">)</span><span>
</span><a name="line-516"></a><span>
</span><a name="line-517"></a><span>  </span><span class="hs-keyword">instance</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">MonadPlus</span></a><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">Maybe</span></a><span>
</span><a name="line-518"></a><span>  </span><span class="hs-keyword">instance</span><span> </span><a href="Data.Singletons.Prelude.Instances.html#SNil"><span class="hs-identifier hs-var">MonadPlus</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-519"></a><span>  </span><span class="hs-special">|]</span><span class="hs-special">)</span><span>
</span><a name="line-520"></a></pre></body></html>