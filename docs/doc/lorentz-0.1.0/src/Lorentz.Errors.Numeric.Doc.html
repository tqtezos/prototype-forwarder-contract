<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- | Autodoc for numeric errors.</span><span>
</span><a name="line-2"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Lorentz.Errors.Numeric.Doc</span><span>
</span><a name="line-3"></a><span>  </span><span class="hs-special">(</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#DDescribeErrorTagMap"><span class="hs-identifier hs-type">DDescribeErrorTagMap</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-4"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#applyErrorTagToErrorsDoc"><span class="hs-identifier hs-var">applyErrorTagToErrorsDoc</span></a><span>
</span><a name="line-5"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#applyErrorTagToErrorsDocWith"><span class="hs-identifier hs-var">applyErrorTagToErrorsDocWith</span></a><span>
</span><a name="line-6"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorDocHandler"><span class="hs-identifier hs-type">NumericErrorDocHandler</span></a><span>
</span><a name="line-7"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorDocHandlerError"><span class="hs-identifier hs-type">NumericErrorDocHandlerError</span></a><span>
</span><a name="line-8"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#customErrorDocHandler"><span class="hs-identifier hs-var">customErrorDocHandler</span></a><span>
</span><a name="line-9"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#voidResultDocHandler"><span class="hs-identifier hs-var">voidResultDocHandler</span></a><span>
</span><a name="line-10"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#baseErrorDocHandlers"><span class="hs-identifier hs-var">baseErrorDocHandlers</span></a><span>
</span><a name="line-11"></a><span>
</span><a name="line-12"></a><span>    </span><span class="hs-comment">-- * Internals</span><span>
</span><a name="line-13"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorWrapper"><span class="hs-identifier hs-type">NumericErrorWrapper</span></a><span>
</span><a name="line-14"></a><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-15"></a><span>
</span><a name="line-16"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad.Cont</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">callCC</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">runCont</span><span class="hs-special">)</span><span>
</span><a name="line-17"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.Bimap</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Bimap</span><span>
</span><a name="line-18"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Constraint</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dict</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-19"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.Kind</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Kind</span><span>
</span><a name="line-20"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Typeable</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator hs-type">:~:</span><span class="hs-special">)</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">eqT</span><span class="hs-special">)</span><span>
</span><a name="line-21"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Typeable</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">typeRep</span><span class="hs-special">)</span><span>
</span><a name="line-22"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Fmt</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">build</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">pretty</span><span class="hs-special">)</span><span>
</span><a name="line-23"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">GHC.TypeNats</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">KnownNat</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Nat</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">natVal</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">someNatVal</span><span class="hs-special">)</span><span>
</span><a name="line-24"></a><span>
</span><a name="line-25"></a><span class="hs-keyword">import</span><span> </span><a href="Lorentz.Base.html"><span class="hs-identifier">Lorentz.Base</span></a><span>
</span><a name="line-26"></a><span class="hs-keyword">import</span><span> </span><a href="Lorentz.Doc.html"><span class="hs-identifier">Lorentz.Doc</span></a><span>
</span><a name="line-27"></a><span class="hs-keyword">import</span><span> </span><a href="Lorentz.Errors.html"><span class="hs-identifier">Lorentz.Errors</span></a><span>
</span><a name="line-28"></a><span class="hs-keyword">import</span><span> </span><a href="Lorentz.Errors.Numeric.Contract.html"><span class="hs-identifier">Lorentz.Errors.Numeric.Contract</span></a><span>
</span><a name="line-29"></a><span class="hs-keyword">import</span><span> </span><a href="Lorentz.Macro.html"><span class="hs-identifier">Lorentz.Macro</span></a><span>
</span><a name="line-30"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Michelson.Text</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">MText</span><span class="hs-special">)</span><span>
</span><a name="line-31"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Michelson.Typed</span><span>
</span><a name="line-32"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Util.Markdown</span><span>
</span><a name="line-33"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Util.Typeable</span><span>
</span><a name="line-34"></a><span>
</span><a name="line-35"></a><span class="hs-comment">-- | Adds a section which explains error tag mapping.</span><span>
</span><a name="line-36"></a><span class="hs-keyword">data</span><span> </span><a name="DDescribeErrorTagMap"><a href="Lorentz.Errors.Numeric.Doc.html#DDescribeErrorTagMap"><span class="hs-identifier">DDescribeErrorTagMap</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="DDescribeErrorTagMap"><a href="Lorentz.Errors.Numeric.Doc.html#DDescribeErrorTagMap"><span class="hs-identifier">DDescribeErrorTagMap</span></a></a><span>
</span><a name="line-37"></a><span>  </span><span class="hs-special">{</span><span> </span><a name="detmSrcLoc"><a href="Lorentz.Errors.Numeric.Doc.html#detmSrcLoc"><span class="hs-identifier">detmSrcLoc</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Text</span><span>
</span><a name="line-38"></a><span>    </span><span class="hs-comment">-- ^ Describes where the error tag map is defined in Haskell code.</span><span>
</span><a name="line-39"></a><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Ord</span><span class="hs-special">)</span><span>
</span><a name="line-40"></a><span>
</span><a name="line-41"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">DocItem</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#DDescribeErrorTagMap"><span class="hs-identifier hs-type">DDescribeErrorTagMap</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-42"></a><span>  </span><span class="hs-keyword">type</span><span> </span><span class="hs-identifier">DocItemPosition</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#DDescribeErrorTagMap"><span class="hs-identifier hs-type">DDescribeErrorTagMap</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-number">4090</span><span>
</span><a name="line-43"></a><span>  </span><span class="hs-keyword">type</span><span> </span><span class="hs-identifier">DocItemPlacement</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#DDescribeErrorTagMap"><span class="hs-identifier hs-type">DDescribeErrorTagMap</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier hs-type">DocItemInDefinitions</span><span>
</span><a name="line-44"></a><span>  </span><a name="local-8214565720323813203"><span class="hs-identifier">docItemSectionName</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-string">&quot;About error tags mapping&quot;</span><span>
</span><a name="line-45"></a><span>  </span><a name="local-8214565720323813200"><span class="hs-identifier">docItemRef</span></a><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#DDescribeErrorTagMap"><span class="hs-identifier hs-var">DDescribeErrorTagMap</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">DocItemRef</span><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-46"></a><span>    </span><span class="hs-identifier hs-var">DocItemId</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-string">&quot;error-mapping-&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679620556"><span class="hs-identifier hs-var">detmSrcLoc</span></a><span>
</span><a name="line-47"></a><span>  </span><a name="local-8214565720323813199"><span class="hs-identifier">docItemToMarkdown</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#DDescribeErrorTagMap"><span class="hs-identifier hs-var">DDescribeErrorTagMap</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="">[md|
    This contract uses numeric representation of error tags.
    Nevertheless, the original Lorentz code operates with string tags which are
    later mapped to naturals.

    If you need to handle errors produced by this contract, we recommend
    converting numeric tags back to strings first, preserving textual tags which
    are already present, and then pattern-match on textual tags.
    This conversion can be performed with the help of the error tag map defined
    at `#{detmSrcLoc}`.

    Note that some errors can still use a textual tag, for instance to
    satisfy rules of an interface.

    In [TM-376](https://issues.serokell.io/issue/TM-376) we are going to provide
    more type-safe and convenient mechanisms for errors handling.
    |]</span><span>
</span><a name="line-64"></a><span>    </span><span class="hs-comment">-- TODO [TM-376]: update the comment above on how to work with our errors</span><span>
</span><a name="line-65"></a><span>    </span><span class="hs-comment">-- from Haskell</span><span>
</span><a name="line-66"></a><span>
</span><a name="line-67"></a><span class="hs-comment">-- | Anchor which refers to the section describing error tag mapping.</span><span>
</span><a name="line-68"></a><span class="hs-identifier">dDescribeErrorTagMapAnchor</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Anchor</span><span>
</span><a name="line-69"></a><a name="dDescribeErrorTagMapAnchor"><a href="Lorentz.Errors.Numeric.Doc.html#dDescribeErrorTagMapAnchor"><span class="hs-identifier">dDescribeErrorTagMapAnchor</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Anchor</span><span> </span><span class="hs-string">&quot;about-error-tags-mapping&quot;</span><span>
</span><a name="line-70"></a><span>
</span><a name="line-71"></a><span class="hs-comment">-- | Errors for 'NumericErrorDocHandler'</span><span>
</span><a name="line-72"></a><span class="hs-keyword">data</span><span> </span><a name="NumericErrorDocHandlerError"><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorDocHandlerError"><span class="hs-identifier">NumericErrorDocHandlerError</span></a></a><span>
</span><a name="line-73"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="EheNotApplicable"><a href="Lorentz.Errors.Numeric.Doc.html#EheNotApplicable"><span class="hs-identifier">EheNotApplicable</span></a></a><span>
</span><a name="line-74"></a><span>    </span><span class="hs-comment">-- ^ Given handler is not suitable, probably another one will fit.</span><span>
</span><a name="line-75"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="EheConversionUnnecessary"><a href="Lorentz.Errors.Numeric.Doc.html#EheConversionUnnecessary"><span class="hs-identifier">EheConversionUnnecessary</span></a></a><span>
</span><a name="line-76"></a><span>    </span><span class="hs-comment">-- ^ Given handler suits and tells that given error should remain unchanged.</span><span>
</span><a name="line-77"></a><span>
</span><a name="line-78"></a><span class="hs-keyword">data</span><span> </span><a name="SomeErrorWithDoc"><a href="Lorentz.Errors.Numeric.Doc.html#SomeErrorWithDoc"><span class="hs-identifier">SomeErrorWithDoc</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679620548"><a href="#local-6989586621679620548"><span class="hs-identifier">err</span></a></a><span class="hs-operator">.</span><span> </span><a href="Lorentz.Errors.html#ErrorHasDoc"><span class="hs-identifier hs-type">ErrorHasDoc</span></a><span> </span><a href="#local-6989586621679620548"><span class="hs-identifier hs-type">err</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a name="SomeErrorWithDoc"><a href="Lorentz.Errors.Numeric.Doc.html#SomeErrorWithDoc"><span class="hs-identifier">SomeErrorWithDoc</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Proxy</span><span> </span><a href="#local-6989586621679620548"><span class="hs-identifier hs-type">err</span></a><span class="hs-special">)</span><span>
</span><a name="line-79"></a><span>
</span><a name="line-80"></a><span class="hs-comment">-- | Handler which changes documentation for one particular error type.</span><span>
</span><a name="line-81"></a><span class="hs-keyword">newtype</span><span> </span><a name="NumericErrorDocHandler"><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorDocHandler"><span class="hs-identifier">NumericErrorDocHandler</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-82"></a><span>  </span><a name="NumericErrorDocHandler"><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorDocHandler"><span class="hs-identifier">NumericErrorDocHandler</span></a></a><span>
</span><a name="line-83"></a><span>  </span><span class="hs-special">{</span><span> </span><a name="_unNumericErrorDocHandler"><a href="Lorentz.Errors.Numeric.Doc.html#_unNumericErrorDocHandler"><span class="hs-identifier">_unNumericErrorDocHandler</span></a></a><span>
</span><a name="line-84"></a><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679620547"><a href="#local-6989586621679620547"><span class="hs-identifier">givenErr</span></a></a><span class="hs-operator">.</span><span>
</span><a name="line-85"></a><span>         </span><span class="hs-special">(</span><a href="Lorentz.Errors.html#ErrorHasDoc"><span class="hs-identifier hs-type">ErrorHasDoc</span></a><span> </span><a href="#local-6989586621679620547"><span class="hs-identifier hs-type">givenErr</span></a><span class="hs-special">)</span><span>
</span><a name="line-86"></a><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lorentz.Errors.Numeric.Contract.html#ErrorTagMap"><span class="hs-identifier hs-type">ErrorTagMap</span></a><span>
</span><a name="line-87"></a><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Proxy</span><span> </span><a href="#local-6989586621679620547"><span class="hs-identifier hs-type">givenErr</span></a><span>
</span><a name="line-88"></a><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorDocHandlerError"><span class="hs-identifier hs-type">NumericErrorDocHandlerError</span></a><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#SomeErrorWithDoc"><span class="hs-identifier hs-type">SomeErrorWithDoc</span></a><span>
</span><a name="line-89"></a><span>  </span><span class="hs-special">}</span><span>
</span><a name="line-90"></a><span>
</span><a name="line-91"></a><span class="hs-comment">-- | Modify documentation generated for given code so that all 'CustomError'</span><span>
</span><a name="line-92"></a><span class="hs-comment">-- mention not their textual error tag rather respective numeric one from the</span><span>
</span><a name="line-93"></a><span class="hs-comment">-- given map.</span><span>
</span><a name="line-94"></a><span class="hs-comment">--</span><span>
</span><a name="line-95"></a><span class="hs-comment">-- If some documented error is not present in the map, it remains unmodified.</span><span>
</span><a name="line-96"></a><span class="hs-comment">-- This function may fail with 'error' if contract uses some uncommon errors,</span><span>
</span><a name="line-97"></a><span class="hs-comment">-- see 'applyErrorTagToErrorsDocWith' for details.</span><span>
</span><a name="line-98"></a><span class="hs-identifier">applyErrorTagToErrorsDoc</span><span>
</span><a name="line-99"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">HasCallStack</span><span>
</span><a name="line-100"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lorentz.Errors.Numeric.Contract.html#ErrorTagMap"><span class="hs-identifier hs-type">ErrorTagMap</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Lorentz.Base.html#%3A-%3E"><span class="hs-identifier hs-type">inp</span></a><span> </span><a href="Lorentz.Base.html#%3A-%3E"><span class="hs-operator hs-type">:-&gt;</span></a><span> </span><a href="#local-6989586621679620566"><span class="hs-identifier hs-type">out</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Lorentz.Base.html#%3A-%3E"><span class="hs-identifier hs-type">inp</span></a><span> </span><a href="Lorentz.Base.html#%3A-%3E"><span class="hs-operator hs-type">:-&gt;</span></a><span> </span><a href="#local-6989586621679620566"><span class="hs-identifier hs-type">out</span></a><span>
</span><a name="line-101"></a><a name="applyErrorTagToErrorsDoc"><a href="Lorentz.Errors.Numeric.Doc.html#applyErrorTagToErrorsDoc"><span class="hs-identifier">applyErrorTagToErrorsDoc</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#applyErrorTagToErrorsDocWith"><span class="hs-identifier hs-var">applyErrorTagToErrorsDocWith</span></a><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#baseErrorDocHandlers"><span class="hs-identifier hs-var">baseErrorDocHandlers</span></a><span>
</span><a name="line-102"></a><span>
</span><a name="line-103"></a><span class="hs-comment">-- | Extended version of 'applyErrorTagToErrorsDoc' which accepts error</span><span>
</span><a name="line-104"></a><span class="hs-comment">-- handlers.</span><span>
</span><a name="line-105"></a><span class="hs-comment">--</span><span>
</span><a name="line-106"></a><span class="hs-comment">-- In most cases that function should be enough for your purposes, but it uses</span><span>
</span><a name="line-107"></a><span class="hs-comment">-- a fixed set of base handlers which may be not enough in case when you define</span><span>
</span><a name="line-108"></a><span class="hs-comment">-- your own errors. In this case define and pass all the necessary handlers to</span><span>
</span><a name="line-109"></a><span class="hs-comment">-- this function.</span><span>
</span><a name="line-110"></a><span class="hs-comment">--</span><span>
</span><a name="line-111"></a><span class="hs-comment">-- It fails with 'error' if some of the errors used in the contract cannot be</span><span>
</span><a name="line-112"></a><span class="hs-comment">-- handled with given handlers.</span><span>
</span><a name="line-113"></a><span class="hs-identifier">applyErrorTagToErrorsDocWith</span><span>
</span><a name="line-114"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">HasCallStack</span><span>
</span><a name="line-115"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorDocHandler"><span class="hs-identifier hs-type">NumericErrorDocHandler</span></a><span class="hs-special">]</span><span>
</span><a name="line-116"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Lorentz.Errors.Numeric.Contract.html#ErrorTagMap"><span class="hs-identifier hs-type">ErrorTagMap</span></a><span>
</span><a name="line-117"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Lorentz.Base.html#%3A-%3E"><span class="hs-identifier hs-type">inp</span></a><span> </span><a href="Lorentz.Base.html#%3A-%3E"><span class="hs-operator hs-type">:-&gt;</span></a><span> </span><a href="#local-6989586621679620564"><span class="hs-identifier hs-type">out</span></a><span>
</span><a name="line-118"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Lorentz.Base.html#%3A-%3E"><span class="hs-identifier hs-type">inp</span></a><span> </span><a href="Lorentz.Base.html#%3A-%3E"><span class="hs-operator hs-type">:-&gt;</span></a><span> </span><a href="#local-6989586621679620564"><span class="hs-identifier hs-type">out</span></a><span>
</span><a name="line-119"></a><a name="applyErrorTagToErrorsDocWith"><a href="Lorentz.Errors.Numeric.Doc.html#applyErrorTagToErrorsDocWith"><span class="hs-identifier">applyErrorTagToErrorsDocWith</span></a></a><span> </span><a name="local-6989586621679620567"><a href="#local-6989586621679620567"><span class="hs-identifier">handlers</span></a></a><span> </span><a name="local-6989586621679620568"><a href="#local-6989586621679620568"><span class="hs-identifier">errorTagMap</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-120"></a><span>  </span><a href="Lorentz.Base.html#iMapAnyCode"><span class="hs-identifier hs-var">iMapAnyCode</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">modifyInstrDoc</span><span> </span><span class="hs-glyph">@</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">@</span><a href="Lorentz.Errors.html#DThrows"><span class="hs-identifier hs-type">DThrows</span></a><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-121"></a><span>  </span><span class="hs-glyph">\</span><span class="hs-special">(</span><a href="Lorentz.Errors.html#DThrows"><span class="hs-identifier hs-var">DThrows</span></a><span> </span><a name="local-6989586621679620570"><a href="#local-6989586621679620570"><span class="hs-identifier">ep</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-122"></a><span>    </span><span class="hs-identifier hs-var">flip</span><span> </span><span class="hs-identifier hs-var">runCont</span><span> </span><span class="hs-identifier hs-var">id</span><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-123"></a><span>    </span><span class="hs-identifier hs-var">callCC</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679620685"><a href="#local-6989586621679620685"><span class="hs-identifier">quitWith</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-124"></a><span>      </span><span class="hs-identifier hs-var">forM_</span><span> </span><a href="#local-6989586621679620567"><span class="hs-identifier hs-var">handlers</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorDocHandler"><span class="hs-identifier hs-var">NumericErrorDocHandler</span></a><span> </span><a name="local-6989586621679620686"><a href="#local-6989586621679620686"><span class="hs-identifier">handler</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-125"></a><span>        </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679620686"><span class="hs-identifier hs-var">handler</span></a><span> </span><a href="#local-6989586621679620568"><span class="hs-identifier hs-var">errorTagMap</span></a><span> </span><a href="#local-6989586621679620570"><span class="hs-identifier hs-var">ep</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-126"></a><span>          </span><span class="hs-identifier hs-var">Left</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#EheNotApplicable"><span class="hs-identifier hs-var">EheNotApplicable</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">pass</span><span>
</span><a name="line-127"></a><span>          </span><span class="hs-identifier hs-var">Left</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#EheConversionUnnecessary"><span class="hs-identifier hs-var">EheConversionUnnecessary</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679620685"><span class="hs-identifier hs-var">quitWith</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-128"></a><span>          </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a href="Lorentz.Errors.Numeric.Doc.html#SomeErrorWithDoc"><span class="hs-identifier hs-var">SomeErrorWithDoc</span></a><span> </span><a name="local-6989586621679620698"><a href="#local-6989586621679620698"><span class="hs-identifier">nep</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679620685"><span class="hs-identifier hs-var">quitWith</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><a href="Lorentz.Errors.html#DThrows"><span class="hs-identifier hs-var">DThrows</span></a><span> </span><a href="#local-6989586621679620698"><span class="hs-identifier hs-var">nep</span></a><span class="hs-special">)</span><span>
</span><a name="line-129"></a><span>      </span><span class="hs-identifier hs-var">error</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-string">&quot;No handler found for error &quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">typeRep</span><span> </span><a href="#local-6989586621679620570"><span class="hs-identifier hs-var">ep</span></a><span class="hs-special">)</span><span>
</span><a name="line-130"></a><span>
</span><a name="line-131"></a><span class="hs-identifier">mkGeneralNumericWrapper</span><span>
</span><a name="line-132"></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679620562"><a href="#local-6989586621679620562"><span class="hs-identifier">err</span></a></a><span class="hs-operator">.</span><span>
</span><a name="line-133"></a><span>     </span><span class="hs-special">(</span><a href="Lorentz.Errors.html#ErrorHasDoc"><span class="hs-identifier hs-type">ErrorHasDoc</span></a><span> </span><a href="#local-6989586621679620562"><span class="hs-identifier hs-type">err</span></a><span class="hs-special">,</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#ErrorHasNumericDoc"><span class="hs-identifier hs-type">ErrorHasNumericDoc</span></a><span> </span><a href="#local-6989586621679620562"><span class="hs-identifier hs-type">err</span></a><span class="hs-special">)</span><span>
</span><a name="line-134"></a><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Lorentz.Errors.Numeric.Contract.html#ErrorTagMap"><span class="hs-identifier hs-type">ErrorTagMap</span></a><span>
</span><a name="line-135"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">MText</span><span>
</span><a name="line-136"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorDocHandlerError"><span class="hs-identifier hs-type">NumericErrorDocHandlerError</span></a><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#SomeErrorWithDoc"><span class="hs-identifier hs-type">SomeErrorWithDoc</span></a><span>
</span><a name="line-137"></a><a name="mkGeneralNumericWrapper"><a href="Lorentz.Errors.Numeric.Doc.html#mkGeneralNumericWrapper"><span class="hs-identifier">mkGeneralNumericWrapper</span></a></a><span> </span><a name="local-6989586621679620699"><a href="#local-6989586621679620699"><span class="hs-identifier">errorTagMap</span></a></a><span> </span><a name="local-6989586621679620700"><a href="#local-6989586621679620700"><span class="hs-identifier">strTag</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-138"></a><span>  </span><a name="local-6989586621679620721"><a href="#local-6989586621679620721"><span class="hs-identifier">numErrTag</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">Bimap.lookupR</span><span> </span><a href="#local-6989586621679620700"><span class="hs-identifier hs-var">strTag</span></a><span> </span><a href="#local-6989586621679620699"><span class="hs-identifier hs-var">errorTagMap</span></a><span>
</span><a name="line-139"></a><span>              </span><span class="hs-operator hs-var">&amp;</span><span> </span><span class="hs-identifier hs-var">maybeToRight</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#EheConversionUnnecessary"><span class="hs-identifier hs-var">EheConversionUnnecessary</span></a><span>
</span><a name="line-140"></a><span>  </span><span class="hs-identifier hs-var">SomeNat</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Proxy</span><span> </span><a href="#local-6989586621679620722"><span class="hs-identifier hs-type">numTag</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">someNatVal</span><span> </span><a href="#local-6989586621679620721"><span class="hs-identifier hs-var">numErrTag</span></a><span>
</span><a name="line-141"></a><span>  </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#SomeErrorWithDoc"><span class="hs-identifier hs-var">SomeErrorWithDoc</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorWrapper"><span class="hs-identifier hs-type">NumericErrorWrapper</span></a><span> </span><a href="#local-6989586621679620722"><span class="hs-identifier hs-type">numTag</span></a><span> </span><a href="#local-6989586621679620562"><span class="hs-identifier hs-type">err</span></a><span class="hs-special">)</span><span>
</span><a name="line-142"></a><span>
</span><a name="line-143"></a><span class="hs-comment">-- | Handler for all 'CustomError's.</span><span>
</span><a name="line-144"></a><span class="hs-identifier">customErrorDocHandler</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorDocHandler"><span class="hs-identifier hs-type">NumericErrorDocHandler</span></a><span>
</span><a name="line-145"></a><a name="customErrorDocHandler"><a href="Lorentz.Errors.Numeric.Doc.html#customErrorDocHandler"><span class="hs-identifier">customErrorDocHandler</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorDocHandler"><span class="hs-identifier hs-var">NumericErrorDocHandler</span></a><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-146"></a><span>  </span><span class="hs-glyph">\</span><a name="local-6989586621679620723"><a href="#local-6989586621679620723"><span class="hs-identifier">errorTagMap</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Proxy</span><span> </span><a href="#local-6989586621679620724"><span class="hs-identifier hs-type">givenErr</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-147"></a><span>    </span><span class="hs-identifier hs-var">join</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">maybeToRight</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#EheNotApplicable"><span class="hs-identifier hs-var">EheNotApplicable</span></a><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-148"></a><span>    </span><span class="hs-identifier hs-var">eqTypeIgnoringPhantom</span><span> </span><span class="hs-glyph">@</span><a href="Lorentz.Errors.html#CustomError"><span class="hs-identifier hs-type">CustomError</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620724"><span class="hs-identifier hs-type">givenErr</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier hs-var">Refl</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Proxy</span><span> </span><a href="#local-6989586621679620725"><span class="hs-identifier hs-type">strTag</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-149"></a><span>      </span><span class="hs-keyword">case</span><span> </span><a href="Lorentz.Errors.html#errorDocRequirements"><span class="hs-identifier hs-var">errorDocRequirements</span></a><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="Lorentz.Errors.html#CustomError"><span class="hs-identifier hs-type">CustomError</span></a><span> </span><a href="#local-6989586621679620725"><span class="hs-identifier hs-type">strTag</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-150"></a><span>        </span><span class="hs-identifier hs-var">Dict</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-151"></a><span>          </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679620726"><a href="#local-6989586621679620726"><span class="hs-identifier">strTag</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lorentz.Errors.html#errorTagToMText"><span class="hs-identifier hs-var">errorTagToMText</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fromLabel</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620725"><span class="hs-identifier hs-type">strTag</span></a><span class="hs-special">)</span><span>
</span><a name="line-152"></a><span>          </span><a href="Lorentz.Errors.Numeric.Doc.html#mkGeneralNumericWrapper"><span class="hs-identifier hs-var">mkGeneralNumericWrapper</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620724"><span class="hs-identifier hs-type">givenErr</span></a><span> </span><a href="#local-6989586621679620723"><span class="hs-identifier hs-var">errorTagMap</span></a><span> </span><a href="#local-6989586621679620726"><span class="hs-identifier hs-var">strTag</span></a><span>
</span><a name="line-153"></a><span>
</span><a name="line-154"></a><span class="hs-comment">-- | Handler for 'VoidResult'.</span><span>
</span><a name="line-155"></a><span class="hs-identifier">voidResultDocHandler</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorDocHandler"><span class="hs-identifier hs-type">NumericErrorDocHandler</span></a><span>
</span><a name="line-156"></a><a name="voidResultDocHandler"><a href="Lorentz.Errors.Numeric.Doc.html#voidResultDocHandler"><span class="hs-identifier">voidResultDocHandler</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorDocHandler"><span class="hs-identifier hs-var">NumericErrorDocHandler</span></a><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-157"></a><span>  </span><span class="hs-glyph">\</span><a name="local-6989586621679620727"><a href="#local-6989586621679620727"><span class="hs-identifier">errorTagMap</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Proxy</span><span> </span><a href="#local-6989586621679620728"><span class="hs-identifier hs-type">givenErr</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-158"></a><span>    </span><span class="hs-identifier hs-var">join</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">maybeToRight</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#EheNotApplicable"><span class="hs-identifier hs-var">EheNotApplicable</span></a><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-159"></a><span>    </span><span class="hs-identifier hs-var">eqTypeIgnoringPhantom</span><span> </span><span class="hs-glyph">@</span><a href="Lorentz.Macro.html#VoidResult"><span class="hs-identifier hs-type">VoidResult</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620728"><span class="hs-identifier hs-type">givenErr</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier hs-var">Refl</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Proxy</span><span> </span><a href="#local-6989586621679620729"><span class="hs-identifier hs-type">res</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-160"></a><span>      </span><a href="Lorentz.Errors.Numeric.Doc.html#mkGeneralNumericWrapper"><span class="hs-identifier hs-var">mkGeneralNumericWrapper</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620728"><span class="hs-identifier hs-type">givenErr</span></a><span> </span><a href="#local-6989586621679620727"><span class="hs-identifier hs-var">errorTagMap</span></a><span> </span><a href="Lorentz.Macro.html#voidResultTag"><span class="hs-identifier hs-var">voidResultTag</span></a><span>
</span><a name="line-161"></a><span>
</span><a name="line-162"></a><span class="hs-comment">-- | Handler for textual error messages.</span><span>
</span><a name="line-163"></a><span class="hs-identifier">textErrorDocHandler</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorDocHandler"><span class="hs-identifier hs-type">NumericErrorDocHandler</span></a><span>
</span><a name="line-164"></a><a name="textErrorDocHandler"><a href="Lorentz.Errors.Numeric.Doc.html#textErrorDocHandler"><span class="hs-identifier">textErrorDocHandler</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorDocHandler"><span class="hs-identifier hs-var">NumericErrorDocHandler</span></a><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-165"></a><span>  </span><span class="hs-glyph">\</span><a name="local-6989586621679620730"><a href="#local-6989586621679620730"><span class="hs-identifier">_errorTagMap</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Proxy</span><span> </span><a href="#local-6989586621679620731"><span class="hs-identifier hs-type">givenErr</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-166"></a><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier hs-var">eqT</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620731"><span class="hs-identifier hs-type">givenErr</span></a><span> </span><span class="hs-glyph">@</span><span class="hs-identifier hs-type">MText</span><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-167"></a><span>      </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">Left</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#EheNotApplicable"><span class="hs-identifier hs-var">EheNotApplicable</span></a><span>
</span><a name="line-168"></a><span>      </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-identifier hs-var">Refl</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#SomeErrorWithDoc"><span class="hs-identifier hs-var">SomeErrorWithDoc</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="Lorentz.Errors.Numeric.Doc.html#NumericTextError"><span class="hs-identifier hs-type">NumericTextError</span></a><span>
</span><a name="line-169"></a><span>
</span><a name="line-170"></a><span class="hs-comment">-- | Handlers for most common errors defined in Lorentz.</span><span>
</span><a name="line-171"></a><span class="hs-identifier">baseErrorDocHandlers</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorDocHandler"><span class="hs-identifier hs-type">NumericErrorDocHandler</span></a><span class="hs-special">]</span><span>
</span><a name="line-172"></a><a name="baseErrorDocHandlers"><a href="Lorentz.Errors.Numeric.Doc.html#baseErrorDocHandlers"><span class="hs-identifier">baseErrorDocHandlers</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-173"></a><span>  </span><span class="hs-special">[</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#customErrorDocHandler"><span class="hs-identifier hs-var">customErrorDocHandler</span></a><span>
</span><a name="line-174"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#voidResultDocHandler"><span class="hs-identifier hs-var">voidResultDocHandler</span></a><span>
</span><a name="line-175"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#textErrorDocHandler"><span class="hs-identifier hs-var">textErrorDocHandler</span></a><span>
</span><a name="line-176"></a><span>  </span><span class="hs-special">]</span><span>
</span><a name="line-177"></a><span>
</span><a name="line-178"></a><span class="hs-comment">-- | Pseudo error which stands for textual errors converted to numeric codes.</span><span>
</span><a name="line-179"></a><span class="hs-keyword">data</span><span> </span><a name="NumericTextError"><a href="Lorentz.Errors.Numeric.Doc.html#NumericTextError"><span class="hs-identifier">NumericTextError</span></a></a><span>
</span><a name="line-180"></a><span>
</span><a name="line-181"></a><span class="hs-keyword">instance</span><span> </span><a href="Lorentz.Errors.html#ErrorHasDoc"><span class="hs-identifier hs-type">ErrorHasDoc</span></a><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#NumericTextError"><span class="hs-identifier hs-type">NumericTextError</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-182"></a><span>  </span><a name="local-8214565720324195363"><a href="Lorentz.Errors.html#errorDocName"><span class="hs-identifier">errorDocName</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lorentz.Errors.html#errorDocName"><span class="hs-identifier hs-var">errorDocName</span></a><span> </span><span class="hs-glyph">@</span><span class="hs-identifier hs-type">MText</span><span>
</span><a name="line-183"></a><span>  </span><a name="local-8214565720324195364"><a href="Lorentz.Errors.html#errorDocMdCause"><span class="hs-identifier">errorDocMdCause</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lorentz.Errors.html#errorDocMdCause"><span class="hs-identifier hs-var">errorDocMdCause</span></a><span> </span><span class="hs-glyph">@</span><span class="hs-identifier hs-type">MText</span><span>
</span><a name="line-184"></a><span>  </span><a name="local-8214565720324195365"><a href="Lorentz.Errors.html#errorDocMdCauseInEntrypoint"><span class="hs-identifier">errorDocMdCauseInEntrypoint</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lorentz.Errors.html#errorDocMdCauseInEntrypoint"><span class="hs-identifier hs-var">errorDocMdCauseInEntrypoint</span></a><span> </span><span class="hs-glyph">@</span><span class="hs-identifier hs-type">MText</span><span>
</span><a name="line-185"></a><span>  </span><a name="local-8214565720324195367"><a href="Lorentz.Errors.html#errorDocClass"><span class="hs-identifier">errorDocClass</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lorentz.Errors.html#errorDocClass"><span class="hs-identifier hs-var">errorDocClass</span></a><span> </span><span class="hs-glyph">@</span><span class="hs-identifier hs-type">MText</span><span>
</span><a name="line-186"></a><span>  </span><a name="local-8214565720324195368"><a href="Lorentz.Errors.html#errorDocDependencies"><span class="hs-identifier">errorDocDependencies</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-var">SomeDocDefinitionItem</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">DType</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><span class="hs-identifier hs-type">Natural</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-187"></a><span>  </span><a name="local-8214565720324195366"><a href="Lorentz.Errors.html#errorDocHaskellRep"><span class="hs-identifier">errorDocHaskellRep</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-188"></a><span>    </span><span class="hs-string">&quot;Numeric code for an error message, see also &quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span>
</span><a name="line-189"></a><span>    </span><span class="hs-identifier hs-var">mdLocalRef</span><span> </span><span class="hs-string">&quot;error tags mapping&quot;</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#dDescribeErrorTagMapAnchor"><span class="hs-identifier hs-var">dDescribeErrorTagMapAnchor</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot;.&quot;</span><span>
</span><a name="line-190"></a><span>
</span><a name="line-191"></a><span class="hs-comment">-- | Some error with a numeric tag attached.</span><span>
</span><a name="line-192"></a><span class="hs-keyword">data</span><span> </span><a name="NumericErrorWrapper"><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorWrapper"><span class="hs-identifier">NumericErrorWrapper</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679620545"><a href="#local-6989586621679620545"><span class="hs-identifier">numTag</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Nat</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679620546"><a href="#local-6989586621679620546"><span class="hs-identifier">err</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Kind.Type</span><span class="hs-special">)</span><span>
</span><a name="line-193"></a><span>
</span><a name="line-194"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span> </span><a href="Lorentz.Errors.html#ErrorHasDoc"><span class="hs-identifier hs-type">ErrorHasDoc</span></a><span> </span><a href="#local-6989586621679620553"><span class="hs-identifier hs-type">err</span></a><span>
</span><a name="line-195"></a><span>         </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">KnownNat</span><span> </span><a href="#local-6989586621679620554"><span class="hs-identifier hs-type">numTag</span></a><span class="hs-special">,</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#ErrorHasNumericDoc"><span class="hs-identifier hs-type">ErrorHasNumericDoc</span></a><span> </span><a href="#local-6989586621679620553"><span class="hs-identifier hs-type">err</span></a><span>
</span><a name="line-196"></a><span>         </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><a name="line-197"></a><span>         </span><a href="Lorentz.Errors.html#ErrorHasDoc"><span class="hs-identifier hs-type">ErrorHasDoc</span></a><span> </span><span class="hs-special">(</span><a href="Lorentz.Errors.Numeric.Doc.html#NumericErrorWrapper"><span class="hs-identifier hs-type">NumericErrorWrapper</span></a><span> </span><a href="#local-6989586621679620554"><span class="hs-identifier hs-type">numTag</span></a><span> </span><a href="#local-6989586621679620553"><span class="hs-identifier hs-type">err</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-198"></a><span>  </span><a name="local-8214565720324195363"><a href="Lorentz.Errors.html#errorDocName"><span class="hs-identifier">errorDocName</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lorentz.Errors.html#errorDocName"><span class="hs-identifier hs-var">errorDocName</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620553"><span class="hs-identifier hs-type">err</span></a><span>
</span><a name="line-199"></a><span>  </span><a name="local-8214565720324195364"><a href="Lorentz.Errors.html#errorDocMdCause"><span class="hs-identifier">errorDocMdCause</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lorentz.Errors.html#errorDocMdCause"><span class="hs-identifier hs-var">errorDocMdCause</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620553"><span class="hs-identifier hs-type">err</span></a><span>
</span><a name="line-200"></a><span>  </span><a name="local-8214565720324195365"><a href="Lorentz.Errors.html#errorDocMdCauseInEntrypoint"><span class="hs-identifier">errorDocMdCauseInEntrypoint</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lorentz.Errors.html#errorDocMdCauseInEntrypoint"><span class="hs-identifier hs-var">errorDocMdCauseInEntrypoint</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620553"><span class="hs-identifier hs-type">err</span></a><span>
</span><a name="line-201"></a><span>  </span><a name="local-8214565720324195367"><a href="Lorentz.Errors.html#errorDocClass"><span class="hs-identifier">errorDocClass</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lorentz.Errors.html#errorDocClass"><span class="hs-identifier hs-var">errorDocClass</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620553"><span class="hs-identifier hs-type">err</span></a><span>
</span><a name="line-202"></a><span>  </span><a name="local-8214565720324195368"><a href="Lorentz.Errors.html#errorDocDependencies"><span class="hs-identifier">errorDocDependencies</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lorentz.Errors.html#errorDocDependencies"><span class="hs-identifier hs-var">errorDocDependencies</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620553"><span class="hs-identifier hs-type">err</span></a><span>
</span><a name="line-203"></a><span>  </span><a name="local-8214565720324195366"><a href="Lorentz.Errors.html#errorDocHaskellRep"><span class="hs-identifier">errorDocHaskellRep</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-204"></a><span>    </span><span class="hs-keyword">case</span><span> </span><a href="Lorentz.Errors.html#errorDocRequirements"><span class="hs-identifier hs-var">errorDocRequirements</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620553"><span class="hs-identifier hs-type">err</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-205"></a><span>      </span><span class="hs-identifier hs-var">Dict</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">mconcat</span><span>
</span><a name="line-206"></a><span>        </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679620555"><a href="#local-6989586621679620555"><span class="hs-identifier">numTag</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">pretty</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">natVal</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620554"><span class="hs-identifier hs-type">numTag</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot; :: nat&quot;</span><span>
</span><a name="line-207"></a><span>          </span><span class="hs-keyword">in</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#numericErrorDocHaskellRep"><span class="hs-identifier hs-var">numericErrorDocHaskellRep</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620553"><span class="hs-identifier hs-type">err</span></a><span> </span><a href="#local-6989586621679620555"><span class="hs-identifier hs-var">numTag</span></a><span>
</span><a name="line-208"></a><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;\n\n&quot;</span><span>
</span><a name="line-209"></a><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">mdSubsection</span><span> </span><span class="hs-string">&quot;Respective textual tag&quot;</span><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-210"></a><span>            </span><span class="hs-identifier hs-var">mdTicked</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">build</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#numericErrorDocTextualTag"><span class="hs-identifier hs-var">numericErrorDocTextualTag</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620553"><span class="hs-identifier hs-type">err</span></a><span class="hs-special">)</span><span>
</span><a name="line-211"></a><span>        </span><span class="hs-special">]</span><span>
</span><a name="line-212"></a><span>
</span><a name="line-213"></a><span class="hs-comment">-- | Helper typeclass which overloads representation for errors.</span><span>
</span><a name="line-214"></a><span class="hs-keyword">class</span><span> </span><a name="ErrorHasNumericDoc"><a href="Lorentz.Errors.Numeric.Doc.html#ErrorHasNumericDoc"><span class="hs-identifier">ErrorHasNumericDoc</span></a></a><span> </span><a name="local-6989586621679620544"><a href="#local-6989586621679620544"><span class="hs-identifier">err</span></a></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-215"></a><span>  </span><span class="hs-comment">-- | Error representation with respect to tags being changed to numeric ones.</span><span>
</span><a name="line-216"></a><span>  </span><a name="numericErrorDocHaskellRep"><a href="Lorentz.Errors.Numeric.Doc.html#numericErrorDocHaskellRep"><span class="hs-identifier">numericErrorDocHaskellRep</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Lorentz.Errors.html#ErrorRequirements"><span class="hs-identifier hs-type">ErrorRequirements</span></a><span> </span><a href="#local-6989586621679620544"><span class="hs-identifier hs-type">err</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Text</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Markdown</span><span>
</span><a name="line-217"></a><span>  </span><a name="numericErrorDocTextualTag"><a href="Lorentz.Errors.Numeric.Doc.html#numericErrorDocTextualTag"><span class="hs-identifier">numericErrorDocTextualTag</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Lorentz.Errors.html#ErrorRequirements"><span class="hs-identifier hs-type">ErrorRequirements</span></a><span> </span><a href="#local-6989586621679620544"><span class="hs-identifier hs-type">err</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Text</span><span>
</span><a name="line-218"></a><span>
</span><a name="line-219"></a><span class="hs-keyword">instance</span><span> </span><a href="Lorentz.Errors.Numeric.Doc.html#ErrorHasNumericDoc"><span class="hs-identifier hs-type">ErrorHasNumericDoc</span></a><span> </span><span class="hs-special">(</span><a href="Lorentz.Errors.html#CustomError"><span class="hs-identifier hs-type">CustomError</span></a><span> </span><a href="#local-6989586621679620551"><span class="hs-identifier hs-type">tag</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-220"></a><span>  </span><a name="local-8214565720324395432"><a href="Lorentz.Errors.Numeric.Doc.html#numericErrorDocHaskellRep"><span class="hs-identifier">numericErrorDocHaskellRep</span></a></a><span> </span><a name="local-6989586621679620552"><a href="#local-6989586621679620552"><span class="hs-identifier">numTag</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-221"></a><span>    </span><a href="Lorentz.Errors.html#customErrorDocHaskellRepGeneral"><span class="hs-identifier hs-var">customErrorDocHaskellRepGeneral</span></a><span> </span><a href="#local-6989586621679620552"><span class="hs-identifier hs-var">numTag</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620551"><span class="hs-identifier hs-type">tag</span></a><span class="hs-special">)</span><span>
</span><a name="line-222"></a><span>  </span><a name="local-8214565720324395433"><a href="Lorentz.Errors.Numeric.Doc.html#numericErrorDocTextualTag"><span class="hs-identifier">numericErrorDocTextualTag</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lorentz.Errors.html#errorTagToText"><span class="hs-identifier hs-var">errorTagToText</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679620551"><span class="hs-identifier hs-type">tag</span></a><span>
</span><a name="line-223"></a><span>
</span><a name="line-224"></a><span class="hs-keyword">instance</span><span> </span><a href="Lorentz.Errors.html#ErrorHasDoc"><span class="hs-identifier hs-type">ErrorHasDoc</span></a><span> </span><span class="hs-special">(</span><a href="Lorentz.Macro.html#VoidResult"><span class="hs-identifier hs-type">VoidResult</span></a><span> </span><a href="#local-6989586621679620549"><span class="hs-identifier hs-type">res</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><a name="line-225"></a><span>         </span><a href="Lorentz.Errors.Numeric.Doc.html#ErrorHasNumericDoc"><span class="hs-identifier hs-type">ErrorHasNumericDoc</span></a><span> </span><span class="hs-special">(</span><a href="Lorentz.Macro.html#VoidResult"><span class="hs-identifier hs-type">VoidResult</span></a><span> </span><a href="#local-6989586621679620549"><span class="hs-identifier hs-type">res</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-226"></a><span>  </span><a name="local-8214565720324395432"><a href="Lorentz.Errors.Numeric.Doc.html#numericErrorDocHaskellRep"><span class="hs-identifier">numericErrorDocHaskellRep</span></a></a><span> </span><a name="local-6989586621679620550"><a href="#local-6989586621679620550"><span class="hs-identifier">numTag</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-227"></a><span>    </span><span class="hs-keyword">case</span><span> </span><a href="Lorentz.Errors.html#errorDocRequirements"><span class="hs-identifier hs-var">errorDocRequirements</span></a><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="Lorentz.Macro.html#VoidResult"><span class="hs-identifier hs-type">VoidResult</span></a><span> </span><a href="#local-6989586621679620549"><span class="hs-identifier hs-type">res</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-228"></a><span>      </span><span class="hs-identifier hs-var">Dict</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">mdTicked</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-string">&quot;(&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">build</span><span> </span><a href="#local-6989586621679620550"><span class="hs-identifier hs-var">numTag</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot;, &quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot;&lt;return value&gt;&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot;)&quot;</span><span>
</span><a name="line-229"></a><span>  </span><a name="local-8214565720324395433"><a href="Lorentz.Errors.Numeric.Doc.html#numericErrorDocTextualTag"><span class="hs-identifier">numericErrorDocTextualTag</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">toText</span><span> </span><a href="Lorentz.Macro.html#voidResultTag"><span class="hs-identifier hs-var">voidResultTag</span></a><span>
</span><a name="line-230"></a></pre></body></html>