<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><a name="line-2"></a><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><a name="line-3"></a><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><a name="line-4"></a><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><a name="line-5"></a><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><a name="line-6"></a><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><a name="line-7"></a><span>
</span><a name="line-8"></a><span>
</span><a name="line-9"></a><span class="hs-comment">-- | Old-style formatting a la @text-format@.</span><span>
</span><a name="line-10"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Fmt.Internal.Template</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-11"></a><span>
</span><a name="line-12"></a><span>
</span><a name="line-13"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.CallStack</span><span>
</span><a name="line-14"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.String</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">IsString</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-15"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Text</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Text</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">splitOn</span><span class="hs-special">)</span><span>
</span><a name="line-16"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Text.Lazy.Builder</span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fromString</span><span class="hs-special">)</span><span>
</span><a name="line-17"></a><span class="hs-cpp">#if !(MIN_VERSION_base(4,11,0))
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Semigroup</span><span>
</span><a name="line-19"></a><span class="hs-cpp">#endif
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Formatting.Buildable</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Buildable</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-21"></a><span class="hs-keyword">import</span><span> </span><a href="Fmt.Internal.Core.html"><span class="hs-identifier">Fmt.Internal.Core</span></a><span> </span><span class="hs-special">(</span><a href="Fmt.Internal.Core.html#FromBuilder"><span class="hs-identifier hs-type">FromBuilder</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-22"></a><span>
</span><a name="line-23"></a><span>
</span><a name="line-24"></a><span class="hs-comment">-- $setup</span><span>
</span><a name="line-25"></a><span class="hs-comment">-- &gt;&gt;&gt; import Fmt</span><span>
</span><a name="line-26"></a><span>
</span><a name="line-27"></a><span class="hs-comment">{- | An old-style formatting function taken from @text-format@ (see
&quot;Data.Text.Format&quot;). Unlike 'Data.Text.Format.format' from
&quot;Data.Text.Format&quot;, it can produce 'String' and strict 'Text' as well (and
print to console too). Also it's polyvariadic:

&gt;&gt;&gt; format &quot;{} + {} = {}&quot; 2 2 4
2 + 2 = 4

You can use arbitrary formatters:

&gt;&gt;&gt; format &quot;0x{} + 0x{} = 0x{}&quot; (hexF 130) (hexF 270) (hexF (130+270))
0x82 + 0x10e = 0x190
-}</span><span>
</span><a name="line-40"></a><span class="hs-identifier">format</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">HasCallStack</span><span class="hs-special">,</span><span> </span><a href="Fmt.Internal.Template.html#FormatType"><span class="hs-identifier hs-type">FormatType</span></a><span> </span><a href="#local-6989586621679057034"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Fmt.Internal.Template.html#Format"><span class="hs-identifier hs-type">Format</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679057034"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-41"></a><a name="format"><a href="Fmt.Internal.Template.html#format"><span class="hs-identifier">format</span></a></a><span> </span><a name="local-6989586621679057035"><a href="#local-6989586621679057035"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Fmt.Internal.Template.html#format%27"><span class="hs-identifier hs-var">format'</span></a><span> </span><a href="#local-6989586621679057035"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-42"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">format</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-43"></a><span>
</span><a name="line-44"></a><span class="hs-comment">{- | Like 'format', but adds a newline.
-}</span><span>
</span><a name="line-46"></a><span class="hs-identifier">formatLn</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">HasCallStack</span><span class="hs-special">,</span><span> </span><a href="Fmt.Internal.Template.html#FormatType"><span class="hs-identifier hs-type">FormatType</span></a><span> </span><a href="#local-6989586621679057033"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Fmt.Internal.Template.html#Format"><span class="hs-identifier hs-type">Format</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679057033"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-47"></a><a name="formatLn"><a href="Fmt.Internal.Template.html#formatLn"><span class="hs-identifier">formatLn</span></a></a><span> </span><a name="local-6989586621679057036"><a href="#local-6989586621679057036"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Fmt.Internal.Template.html#format%27"><span class="hs-identifier hs-var">format'</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679057036"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot;\n&quot;</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-48"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">formatLn</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-49"></a><span>
</span><a name="line-50"></a><span class="hs-comment">-- | A format string. This is intentionally incompatible with other</span><span>
</span><a name="line-51"></a><span class="hs-comment">-- string types, to make it difficult to construct a format string by</span><span>
</span><a name="line-52"></a><span class="hs-comment">-- concatenating string fragments (a very common way to accidentally</span><span>
</span><a name="line-53"></a><span class="hs-comment">-- make code vulnerable to malicious data).</span><span>
</span><a name="line-54"></a><span class="hs-comment">--</span><span>
</span><a name="line-55"></a><span class="hs-comment">-- This type is an instance of 'IsString', so the easiest way to</span><span>
</span><a name="line-56"></a><span class="hs-comment">-- construct a query is to enable the @OverloadedStrings@ language</span><span>
</span><a name="line-57"></a><span class="hs-comment">-- extension and then simply write the query in double quotes.</span><span>
</span><a name="line-58"></a><span class="hs-comment">--</span><span>
</span><a name="line-59"></a><span class="hs-comment">-- &gt; {-# LANGUAGE OverloadedStrings #-}</span><span>
</span><a name="line-60"></a><span class="hs-comment">-- &gt;</span><span>
</span><a name="line-61"></a><span class="hs-comment">-- &gt; import Fmt</span><span>
</span><a name="line-62"></a><span class="hs-comment">-- &gt;</span><span>
</span><a name="line-63"></a><span class="hs-comment">-- &gt; f :: Format</span><span>
</span><a name="line-64"></a><span class="hs-comment">-- &gt; f = &quot;hello {}&quot;</span><span>
</span><a name="line-65"></a><span class="hs-comment">--</span><span>
</span><a name="line-66"></a><span class="hs-comment">-- The underlying type is 'Text', so literal Haskell strings that</span><span>
</span><a name="line-67"></a><span class="hs-comment">-- contain Unicode characters will be correctly handled.</span><span>
</span><a name="line-68"></a><span class="hs-keyword">newtype</span><span> </span><a name="Format"><a href="Fmt.Internal.Template.html#Format"><span class="hs-identifier">Format</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Format"><a href="Fmt.Internal.Template.html#Format"><span class="hs-identifier">Format</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="fromFormat"><a href="Fmt.Internal.Template.html#fromFormat"><span class="hs-identifier">fromFormat</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Text</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-69"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Ord</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-70"></a><span>
</span><a name="line-71"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Semigroup</span><span> </span><a href="Fmt.Internal.Template.html#Format"><span class="hs-identifier hs-type">Format</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-72"></a><span>  </span><a href="Fmt.Internal.Template.html#Format"><span class="hs-identifier hs-var">Format</span></a><span> </span><a name="local-6989586621679057031"><a href="#local-6989586621679057031"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-3458764513820541482"><span class="hs-operator">&lt;&gt;</span></a><span> </span><a href="Fmt.Internal.Template.html#Format"><span class="hs-identifier hs-var">Format</span></a><span> </span><a name="local-6989586621679057032"><a href="#local-6989586621679057032"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Fmt.Internal.Template.html#Format"><span class="hs-identifier hs-var">Format</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679057031"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679057032"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-73"></a><span>
</span><a name="line-74"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="Fmt.Internal.Template.html#Format"><span class="hs-identifier hs-type">Format</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-75"></a><span>  </span><a name="local-3458764513820541483"><span class="hs-identifier">mempty</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Fmt.Internal.Template.html#Format"><span class="hs-identifier hs-var">Format</span></a><span> </span><span class="hs-identifier hs-var">mempty</span><span>
</span><a name="line-76"></a><span class="hs-cpp">#if !(MIN_VERSION_base(4,11,0))
</span><span>  </span><span class="hs-identifier">mappend</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator">&lt;&gt;</span><span class="hs-special">)</span><span>
</span><a name="line-78"></a><span class="hs-cpp">#endif
</span><span>
</span><a name="line-80"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">IsString</span><span> </span><a href="Fmt.Internal.Template.html#Format"><span class="hs-identifier hs-type">Format</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-81"></a><span>  </span><a name="local-3458764513820541114"><span class="hs-identifier">fromString</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Fmt.Internal.Template.html#Format"><span class="hs-identifier hs-var">Format</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">fromString</span><span>
</span><a name="line-82"></a><span>
</span><a name="line-83"></a><span class="hs-comment">-- Format strings are almost always constants, and they're expensive</span><span>
</span><a name="line-84"></a><span class="hs-comment">-- to interpret (which we refer to as &quot;cracking&quot; here).  We'd really</span><span>
</span><a name="line-85"></a><span class="hs-comment">-- like to have GHC memoize the cracking of a known-constant format</span><span>
</span><a name="line-86"></a><span class="hs-comment">-- string, so that it occurs at most once.</span><span>
</span><a name="line-87"></a><span class="hs-comment">--</span><span>
</span><a name="line-88"></a><span class="hs-comment">-- To achieve this, we arrange to have the cracked version of a format</span><span>
</span><a name="line-89"></a><span class="hs-comment">-- string let-floated out as a CAF, by inlining the definitions of</span><span>
</span><a name="line-90"></a><span class="hs-comment">-- build and functions that invoke it.  This works well with GHC 7.</span><span>
</span><a name="line-91"></a><span>
</span><a name="line-92"></a><span class="hs-comment">-- | Render a format string and arguments to a 'Builder'.</span><span>
</span><a name="line-93"></a><span class="hs-identifier">renderFormat</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Fmt.Internal.Template.html#Format"><span class="hs-identifier hs-type">Format</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Builder</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Builder</span><span>
</span><a name="line-94"></a><a name="renderFormat"><a href="Fmt.Internal.Template.html#renderFormat"><span class="hs-identifier">renderFormat</span></a></a><span> </span><a name="local-6989586621679057037"><a href="#local-6989586621679057037"><span class="hs-identifier">fmt</span></a></a><span> </span><a name="local-6989586621679057038"><a href="#local-6989586621679057038"><span class="hs-identifier">ps</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Fmt.Internal.Template.html#zipParams"><span class="hs-identifier hs-var">zipParams</span></a><span> </span><span class="hs-special">(</span><a href="Fmt.Internal.Template.html#crack"><span class="hs-identifier hs-var">crack</span></a><span> </span><a href="#local-6989586621679057037"><span class="hs-identifier hs-var">fmt</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679057038"><span class="hs-identifier hs-var">ps</span></a><span>
</span><a name="line-95"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">renderFormat</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-96"></a><span>
</span><a name="line-97"></a><span class="hs-identifier">zipParams</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Builder</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Builder</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Builder</span><span>
</span><a name="line-98"></a><a name="zipParams"><a href="Fmt.Internal.Template.html#zipParams"><span class="hs-identifier">zipParams</span></a></a><span> </span><a name="local-6989586621679057039"><a href="#local-6989586621679057039"><span class="hs-identifier">fragments</span></a></a><span> </span><a name="local-6989586621679057040"><a href="#local-6989586621679057040"><span class="hs-identifier">params</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679057041"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679057039"><span class="hs-identifier hs-var">fragments</span></a><span> </span><a href="#local-6989586621679057040"><span class="hs-identifier hs-var">params</span></a><span>
</span><a name="line-99"></a><span>  </span><span class="hs-keyword">where</span><span> </span><a name="local-6989586621679057041"><a href="#local-6989586621679057041"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679057042"><a href="#local-6989586621679057042"><span class="hs-identifier">f</span></a></a><span class="hs-glyph">:</span><a name="local-6989586621679057043"><a href="#local-6989586621679057043"><span class="hs-identifier">fs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679057044"><a href="#local-6989586621679057044"><span class="hs-identifier">y</span></a></a><span class="hs-glyph">:</span><a name="local-6989586621679057045"><a href="#local-6989586621679057045"><span class="hs-identifier">ys</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679057042"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679057044"><span class="hs-identifier hs-var">y</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679057041"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679057043"><span class="hs-identifier hs-var">fs</span></a><span> </span><a href="#local-6989586621679057045"><span class="hs-identifier hs-var">ys</span></a><span>
</span><a name="line-100"></a><span>        </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">[</span><a name="local-6989586621679057046"><a href="#local-6989586621679057046"><span class="hs-identifier">f</span></a></a><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>        </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679057046"><span class="hs-identifier hs-var">f</span></a><span>
</span><a name="line-101"></a><span>        </span><span class="hs-identifier">go</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">error</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-string">&quot;Fmt.format: there were &quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">length</span><span> </span><a href="#local-6989586621679057039"><span class="hs-identifier hs-var">fragments</span></a><span> </span><span class="hs-glyph">-</span><span> </span><span class="hs-number">1</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span>
</span><a name="line-102"></a><span>                          </span><span class="hs-string">&quot; sites, but &quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">length</span><span> </span><a href="#local-6989586621679057040"><span class="hs-identifier hs-var">params</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot; parameters&quot;</span><span>
</span><a name="line-103"></a><span>
</span><a name="line-104"></a><span class="hs-identifier">crack</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Fmt.Internal.Template.html#Format"><span class="hs-identifier hs-type">Format</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Builder</span><span class="hs-special">]</span><span>
</span><a name="line-105"></a><a name="crack"><a href="Fmt.Internal.Template.html#crack"><span class="hs-identifier">crack</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier hs-var">fromText</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">splitOn</span><span> </span><span class="hs-string">&quot;{}&quot;</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">fromFormat</span><span>
</span><a name="line-106"></a><span>
</span><a name="line-107"></a><span class="hs-comment">-- | Something like 'Text.Printf.PrintfType' in &quot;Text.Printf&quot;.</span><span>
</span><a name="line-108"></a><span class="hs-keyword">class</span><span> </span><a name="FormatType"><a href="Fmt.Internal.Template.html#FormatType"><span class="hs-identifier">FormatType</span></a></a><span> </span><a name="local-6989586621679057022"><a href="#local-6989586621679057022"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-109"></a><span>  </span><a name="format%27"><a href="Fmt.Internal.Template.html#format%27"><span class="hs-identifier">format'</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Fmt.Internal.Template.html#Format"><span class="hs-identifier hs-type">Format</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Builder</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679057022"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-110"></a><span>
</span><a name="line-111"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Buildable</span><span> </span><a href="#local-6989586621679057026"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">,</span><span> </span><a href="Fmt.Internal.Template.html#FormatType"><span class="hs-identifier hs-type">FormatType</span></a><span> </span><a href="#local-6989586621679057027"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Fmt.Internal.Template.html#FormatType"><span class="hs-identifier hs-type">FormatType</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679057026"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679057027"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-112"></a><span>  </span><a name="local-8214565720323831924"><a href="Fmt.Internal.Template.html#format%27"><span class="hs-identifier">format'</span></a></a><span> </span><a name="local-6989586621679057028"><a href="#local-6989586621679057028"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679057029"><a href="#local-6989586621679057029"><span class="hs-identifier">xs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679057030"><a href="#local-6989586621679057030"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Fmt.Internal.Template.html#format%27"><span class="hs-identifier hs-var">format'</span></a><span> </span><a href="#local-6989586621679057028"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">build</span><span> </span><a href="#local-6989586621679057030"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679057029"><span class="hs-identifier hs-var">xs</span></a><span class="hs-special">)</span><span>
</span><a name="line-113"></a><span>
</span><a name="line-114"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPABLE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><a href="Fmt.Internal.Core.html#FromBuilder"><span class="hs-identifier hs-type">FromBuilder</span></a><span> </span><a href="#local-6989586621679057023"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Fmt.Internal.Template.html#FormatType"><span class="hs-identifier hs-type">FormatType</span></a><span> </span><a href="#local-6989586621679057023"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-115"></a><span>  </span><a name="local-8214565720323831924"><a href="Fmt.Internal.Template.html#format%27"><span class="hs-identifier">format'</span></a></a><span> </span><a name="local-6989586621679057024"><a href="#local-6989586621679057024"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679057025"><a href="#local-6989586621679057025"><span class="hs-identifier">xs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Fmt.Internal.Core.html#fromBuilder"><span class="hs-identifier hs-var">fromBuilder</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Fmt.Internal.Template.html#renderFormat"><span class="hs-identifier hs-var">renderFormat</span></a><span> </span><a href="#local-6989586621679057024"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">reverse</span><span> </span><a href="#local-6989586621679057025"><span class="hs-identifier hs-var">xs</span></a><span class="hs-special">)</span><span>
</span><a name="line-116"></a></pre></body></html>