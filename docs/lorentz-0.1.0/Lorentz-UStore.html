<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Lorentz.UStore</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Lorentz.UStore.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">lorentz-0.1.0: EDSL for the Michelson Language</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Lorentz.UStore</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">UStore and related type definitions</a><ul><li><a href="#g:2">Type-lookup-by-name</a></li><li><a href="#g:3">Instructions</a></li><li><a href="#g:4">Instruction constraints</a></li></ul></li><li><a href="#g:5">UStore composability</a></li><li><a href="#g:6">UStore management from Haskell</a></li><li><a href="#g:7">Migrations</a></li><li><a href="#g:8">Extras</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contains implementation of <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code>.</p><p><code>UStore</code> is essentially <code><a href="Lorentz-Store.html#v:Store" title="Lorentz.Store">Store</a></code> modified for the sake of
upgradeability.</p><p>In API it differs from <code>Store</code> in the following ways:
1. It keeps both virtual <code>big_map</code>s and plain fields;
2. Neat conversion between Michelson and Haskell values
is implemented;
3. Regarding composabililty, one can operate with one <code>UStore</code>
and then lift it to a bigger one which includes the former.
This allows for simpler management of stores and clearer error messages.
In spite of this, operations with <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code>s over deeply nested templates will
still work as before.</p><p>We represent <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code> as <code>big_map bytes bytes</code>.</p><ul><li>Plain fields are stored as
<code>key = pack fieldName; value = pack originalValue</code>.</li><li>Virtual <code>big_map</code>s are kept as
<code>key = pack (bigMapName, originalKey); value = pack originalValue</code>.</li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:UStore">UStore</a> (a :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>)</li><li class="src short"><span class="keyword">newtype</span> k <a href="#t:-124--126--62-">|~&gt;</a> v = <a href="#v:UStoreSubMap">UStoreSubMap</a> {<ul class="subs"><li><a href="#v:unUStoreSubMap">unUStoreSubMap</a> :: <a href="Lorentz-Value.html#t:Map" title="Lorentz.Value">Map</a> k v</li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:UStoreFieldExt">UStoreFieldExt</a> (m :: <a href="Lorentz-UStore.html#t:UStoreMarkerType" title="Lorentz.UStore">UStoreMarkerType</a>) (v :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) = <a href="#v:UStoreField">UStoreField</a> {<ul class="subs"><li><a href="#v:unUStoreField">unUStoreField</a> :: v</li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:UStoreField">UStoreField</a> = <a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> <a href="Lorentz-UStore-Types.html#t:UMarkerPlainField" title="Lorentz.UStore.Types">UMarkerPlainField</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:UStoreMarkerType">UStoreMarkerType</a> = UStoreMarker -&gt; <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a></li><li class="src short"><span class="keyword">class</span> <a href="#t:KnownUStoreMarker">KnownUStoreMarker</a> (marker :: <a href="Lorentz-UStore.html#t:UStoreMarkerType" title="Lorentz.UStore">UStoreMarkerType</a>) <span class="keyword">where</span><ul class="subs"><li><span class="keyword">type</span> <a href="#t:ShowUStoreField">ShowUStoreField</a> marker v :: <a href="../base-4.12.0.0/GHC-TypeLits.html#t:ErrorMessage" title="GHC.TypeLits">ErrorMessage</a></li><li><a href="#v:mkFieldMarkerUKey">mkFieldMarkerUKey</a> :: <a href="Lorentz-Value.html#t:MText" title="Lorentz.Value">MText</a> -&gt; <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:GetUStoreKey">GetUStoreKey</a> store name = <a href="Lorentz-UStore-Types.html#t:MSKey" title="Lorentz.UStore.Types">MSKey</a> (<a href="Lorentz-UStore-Types.html#t:GetUStore" title="Lorentz.UStore.Types">GetUStore</a> name store)</li><li class="src short"><span class="keyword">type</span> <a href="#t:GetUStoreValue">GetUStoreValue</a> store name = <a href="Lorentz-UStore-Types.html#t:MSValue" title="Lorentz.UStore.Types">MSValue</a> (<a href="Lorentz-UStore-Types.html#t:GetUStore" title="Lorentz.UStore.Types">GetUStore</a> name store)</li><li class="src short"><span class="keyword">type</span> <a href="#t:GetUStoreField">GetUStoreField</a> store name = <a href="Lorentz-UStore-Types.html#t:FSValue" title="Lorentz.UStore.Types">FSValue</a> (<a href="Lorentz-UStore-Types.html#t:GetUStore" title="Lorentz.UStore.Types">GetUStore</a> name store)</li><li class="src short"><span class="keyword">type</span> <a href="#t:GetUStoreFieldMarker">GetUStoreFieldMarker</a> store name = <a href="Lorentz-UStore-Types.html#t:FSMarker" title="Lorentz.UStore.Types">FSMarker</a> (<a href="Lorentz-UStore-Types.html#t:GetUStore" title="Lorentz.UStore.Types">GetUStore</a> name store)</li><li class="src short"><a href="#v:ustoreMem">ustoreMem</a> :: <span class="keyword">forall</span> store name s. KeyAccessC store name =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:GetUStoreKey" title="Lorentz.UStore">GetUStoreKey</a> store name ': (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s)) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-Value.html#t:Bool" title="Lorentz.Value">Bool</a> ': s)</li><li class="src short"><a href="#v:ustoreGet">ustoreGet</a> :: <span class="keyword">forall</span> store name s. (KeyAccessC store name, ValueAccessC store name) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:GetUStoreKey" title="Lorentz.UStore">GetUStoreKey</a> store name ': (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s)) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-Prelude.html#t:Maybe" title="Lorentz.Prelude">Maybe</a> (<a href="Lorentz-UStore.html#t:GetUStoreValue" title="Lorentz.UStore">GetUStoreValue</a> store name) ': s)</li><li class="src short"><a href="#v:ustoreUpdate">ustoreUpdate</a> :: <span class="keyword">forall</span> store name s. (KeyAccessC store name, ValueAccessC store name) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:GetUStoreKey" title="Lorentz.UStore">GetUStoreKey</a> store name ': (<a href="Lorentz-Prelude.html#t:Maybe" title="Lorentz.Prelude">Maybe</a> (<a href="Lorentz-UStore.html#t:GetUStoreValue" title="Lorentz.UStore">GetUStoreValue</a> store name) ': (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s))) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s)</li><li class="src short"><a href="#v:ustoreInsert">ustoreInsert</a> :: <span class="keyword">forall</span> store name s. (KeyAccessC store name, ValueAccessC store name) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:GetUStoreKey" title="Lorentz.UStore">GetUStoreKey</a> store name ': (<a href="Lorentz-UStore.html#t:GetUStoreValue" title="Lorentz.UStore">GetUStoreValue</a> store name ': (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s))) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s)</li><li class="src short"><a href="#v:ustoreInsertNew">ustoreInsertNew</a> :: <span class="keyword">forall</span> store name s. (KeyAccessC store name, ValueAccessC store name) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<span class="keyword">forall</span> s0 any. (<a href="Lorentz-UStore.html#t:GetUStoreKey" title="Lorentz.UStore">GetUStoreKey</a> store name ': s0) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> any) -&gt; (<a href="Lorentz-UStore.html#t:GetUStoreKey" title="Lorentz.UStore">GetUStoreKey</a> store name ': (<a href="Lorentz-UStore.html#t:GetUStoreValue" title="Lorentz.UStore">GetUStoreValue</a> store name ': (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s))) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s)</li><li class="src short"><a href="#v:ustoreDelete">ustoreDelete</a> :: <span class="keyword">forall</span> store name s. KeyAccessC store name =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:GetUStoreKey" title="Lorentz.UStore">GetUStoreKey</a> store name ': (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s)) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s)</li><li class="src short"><a href="#v:ustoreToField">ustoreToField</a> :: <span class="keyword">forall</span> store name s. FieldAccessC store name =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:GetUStoreField" title="Lorentz.UStore">GetUStoreField</a> store name ': s)</li><li class="src short"><a href="#v:ustoreGetField">ustoreGetField</a> :: <span class="keyword">forall</span> store name s. FieldAccessC store name =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:GetUStoreField" title="Lorentz.UStore">GetUStoreField</a> store name ': (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s))</li><li class="src short"><a href="#v:ustoreSetField">ustoreSetField</a> :: <span class="keyword">forall</span> store name s. FieldAccessC store name =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:GetUStoreField" title="Lorentz.UStore">GetUStoreField</a> store name ': (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s)) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s)</li><li class="src short"><span class="keyword">type</span> <a href="#t:HasUStore">HasUStore</a> name key value store = (KeyAccessC store name, ValueAccessC store name, <a href="Lorentz-UStore.html#t:GetUStoreKey" title="Lorentz.UStore">GetUStoreKey</a> store name ~ key, <a href="Lorentz-UStore.html#t:GetUStoreValue" title="Lorentz.UStore">GetUStoreValue</a> store name ~ value)</li><li class="src short"><span class="keyword">type</span> <a href="#t:HasUField">HasUField</a> name ty store = (FieldAccessC store name, <a href="Lorentz-UStore.html#t:GetUStoreField" title="Lorentz.UStore">GetUStoreField</a> store name ~ ty)</li><li class="src short"><span class="keyword">type</span> <a href="#t:HasUStoreForAllIn">HasUStoreForAllIn</a> store constrained = (<a href="Lorentz-Prelude.html#t:Generic" title="Lorentz.Prelude">Generic</a> store, GHasStoreForAllIn constrained (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> store))</li><li class="src short"><a href="#v:liftUStore">liftUStore</a> :: (<a href="Lorentz-Prelude.html#t:Generic" title="Lorentz.Prelude">Generic</a> template, RequireAllUniqueFields template) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> (<a href="../morley-1.0.0/Michelson-Typed-Haskell-Instr-Product.html#t:GetFieldType" title="Michelson.Typed.Haskell.Instr.Product">GetFieldType</a> template name) ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template ': s)</li><li class="src short"><a href="#v:unliftUStore">unliftUStore</a> :: <a href="Lorentz-Prelude.html#t:Generic" title="Lorentz.Prelude">Generic</a> template =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> (<a href="../morley-1.0.0/Michelson-Typed-Haskell-Instr-Product.html#t:GetFieldType" title="Michelson.Typed.Haskell.Instr.Product">GetFieldType</a> template name) ': s)</li><li class="src short"><span class="keyword">class</span> (<a href="Lorentz-Prelude.html#t:Generic" title="Lorentz.Prelude">Generic</a> template, GUStoreConversible (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> template)) =&gt; <a href="#t:UStoreConversible">UStoreConversible</a> template</li><li class="src short"><a href="#v:mkUStore">mkUStore</a> :: <a href="Lorentz-UStore.html#t:UStoreConversible" title="Lorentz.UStore">UStoreConversible</a> template =&gt; template -&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template</li><li class="src short"><a href="#v:ustoreDecompose">ustoreDecompose</a> :: <span class="keyword">forall</span> template. <a href="Lorentz-UStore.html#t:UStoreConversible" title="Lorentz.UStore">UStoreConversible</a> template =&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template -&gt; <a href="Lorentz-Prelude.html#t:Either" title="Lorentz.Prelude">Either</a> <a href="Lorentz-Prelude.html#t:Text" title="Lorentz.Prelude">Text</a> (<a href="Lorentz-UStore-Haskell.html#t:UStoreContent" title="Lorentz.UStore.Haskell">UStoreContent</a>, template)</li><li class="src short"><a href="#v:ustoreDecomposeFull">ustoreDecomposeFull</a> :: <span class="keyword">forall</span> template. <a href="Lorentz-UStore.html#t:UStoreConversible" title="Lorentz.UStore">UStoreConversible</a> template =&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template -&gt; <a href="Lorentz-Prelude.html#t:Either" title="Lorentz.Prelude">Either</a> <a href="Lorentz-Prelude.html#t:Text" title="Lorentz.Prelude">Text</a> template</li><li class="src short"><a href="#v:fillUStore">fillUStore</a> :: <a href="Lorentz-UStore.html#t:UStoreConversible" title="Lorentz.UStore">UStoreConversible</a> template =&gt; template -&gt; <a href="Lorentz-UStore.html#t:UStoreMigration" title="Lorentz.UStore">UStoreMigration</a> () template</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:MigrationScript">MigrationScript</a> (oldStore :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (newStore :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) = <a href="#v:MigrationScript">MigrationScript</a> {<ul class="subs"><li><a href="#v:unMigrationScript">unMigrationScript</a> :: <a href="Lorentz-Base.html#t:Lambda" title="Lorentz.Base">Lambda</a> <a href="Lorentz-UStore-Migration-Base.html#t:UStore_" title="Lorentz.UStore.Migration.Base">UStore_</a> <a href="Lorentz-UStore-Migration-Base.html#t:UStore_" title="Lorentz.UStore.Migration.Base">UStore_</a></li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:MigrationScript_">MigrationScript_</a> = <a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> <a href="Lorentz-UStore-Migration-Base.html#t:SomeUTemplate" title="Lorentz.UStore.Migration.Base">SomeUTemplate</a> <a href="Lorentz-UStore-Migration-Base.html#t:SomeUTemplate" title="Lorentz.UStore.Migration.Base">SomeUTemplate</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:UStoreMigration">UStoreMigration</a> (oldTempl :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (newTempl :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>)</li><li class="src short"><a href="#v:migrationToScript">migrationToScript</a> :: <a href="Lorentz-UStore.html#t:UStoreMigration" title="Lorentz.UStore">UStoreMigration</a> os ns -&gt; <a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> os ns</li><li class="src short"><a href="#v:migrationToScriptI">migrationToScriptI</a> :: <a href="Lorentz-UStore.html#t:UStoreMigration" title="Lorentz.UStore">UStoreMigration</a> os ns -&gt; <a href="../base-4.12.0.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> os ns)</li><li class="src short"><a href="#v:migrationToLambda">migrationToLambda</a> :: <a href="Lorentz-UStore.html#t:UStoreMigration" title="Lorentz.UStore">UStoreMigration</a> oldTemplate newTemplate -&gt; <a href="Lorentz-Base.html#t:Lambda" title="Lorentz.Base">Lambda</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> oldTemplate) (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> newTemplate)</li><li class="src short"><a href="#v:mkUStoreMigration">mkUStoreMigration</a> :: <a href="Lorentz-Base.html#t:Lambda" title="Lorentz.Base">Lambda</a> (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl (<a href="Lorentz-UStore-Migration-Diff.html#t:BuildDiff" title="Lorentz.UStore.Migration.Diff">BuildDiff</a> oldTempl newTempl) '[]) (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl '[] _1) -&gt; <a href="Lorentz-UStore.html#t:UStoreMigration" title="Lorentz.UStore">UStoreMigration</a> oldTempl newTempl</li><li class="src short"><a href="#v:mustoreToOld">mustoreToOld</a> :: RequireBeInitial touched =&gt; (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTemplate newTemplate remDiff touched ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> oldTemplate ': s)</li><li class="src short"><a href="#v:migrateGetField">migrateGetField</a> :: <span class="keyword">forall</span> field oldTempl newTempl diff touched fieldTy s. (<a href="Lorentz-UStore.html#t:HasUField" title="Lorentz.UStore">HasUField</a> field fieldTy oldTempl, RequireUntouched field (field <a href="../morley-1.0.0/Util-Type.html#t:IsElem" title="Util.Type">`IsElem`</a> touched)) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> field -&gt; (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl diff touched ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (fieldTy ': (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl diff touched ': s))</li><li class="src short"><a href="#v:migrateAddField">migrateAddField</a> :: <span class="keyword">forall</span> field oldTempl newTempl diff touched fieldTy newDiff marker s. ('(<a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> marker fieldTy, newDiff) ~ <a href="Lorentz-UStore-Migration-Diff.html#t:CoverDiff" title="Lorentz.UStore.Migration.Diff">CoverDiff</a> <a href="Lorentz-UStore-Migration-Diff.html#v:DcAdd" title="Lorentz.UStore.Migration.Diff">DcAdd</a> field diff, <a href="Lorentz-UStore.html#t:HasUField" title="Lorentz.UStore">HasUField</a> field fieldTy newTempl) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> field -&gt; (fieldTy ': (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl diff touched ': s)) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl newDiff (field ': touched) ': s)</li><li class="src short"><a href="#v:migrateRemoveField">migrateRemoveField</a> :: <span class="keyword">forall</span> field oldTempl newTempl diff touched fieldTy newDiff marker s. ('(<a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> marker fieldTy, newDiff) ~ <a href="Lorentz-UStore-Migration-Diff.html#t:CoverDiff" title="Lorentz.UStore.Migration.Diff">CoverDiff</a> <a href="Lorentz-UStore-Migration-Diff.html#v:DcRemove" title="Lorentz.UStore.Migration.Diff">DcRemove</a> field diff, <a href="Lorentz-UStore.html#t:HasUField" title="Lorentz.UStore">HasUField</a> field fieldTy oldTempl) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> field -&gt; (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl diff touched ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl newDiff (field ': touched) ': s)</li><li class="src short"><a href="#v:migrateExtractField">migrateExtractField</a> :: <span class="keyword">forall</span> field oldTempl newTempl diff touched fieldTy newDiff marker s. ('(<a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> marker fieldTy, newDiff) ~ <a href="Lorentz-UStore-Migration-Diff.html#t:CoverDiff" title="Lorentz.UStore.Migration.Diff">CoverDiff</a> <a href="Lorentz-UStore-Migration-Diff.html#v:DcRemove" title="Lorentz.UStore.Migration.Diff">DcRemove</a> field diff, <a href="Lorentz-UStore.html#t:HasUField" title="Lorentz.UStore">HasUField</a> field fieldTy oldTempl, RequireUntouched field (field <a href="../morley-1.0.0/Util-Type.html#t:IsElem" title="Util.Type">`IsElem`</a> touched)) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> field -&gt; (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl diff touched ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (fieldTy ': (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl newDiff (field ': touched) ': s))</li><li class="src short"><a href="#v:migrateOverwriteField">migrateOverwriteField</a> :: <span class="keyword">forall</span> field oldTempl newTempl diff touched fieldTy oldFieldTy marker oldMarker newDiff newDiff0 s. ('(<a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> oldMarker oldFieldTy, newDiff0) ~ <a href="Lorentz-UStore-Migration-Diff.html#t:CoverDiff" title="Lorentz.UStore.Migration.Diff">CoverDiff</a> <a href="Lorentz-UStore-Migration-Diff.html#v:DcRemove" title="Lorentz.UStore.Migration.Diff">DcRemove</a> field diff, '(<a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> marker fieldTy, newDiff) ~ <a href="Lorentz-UStore-Migration-Diff.html#t:CoverDiff" title="Lorentz.UStore.Migration.Diff">CoverDiff</a> <a href="Lorentz-UStore-Migration-Diff.html#v:DcAdd" title="Lorentz.UStore.Migration.Diff">DcAdd</a> field newDiff0, <a href="Lorentz-UStore.html#t:HasUField" title="Lorentz.UStore">HasUField</a> field fieldTy newTempl) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> field -&gt; (fieldTy ': (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl diff touched ': s)) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl newDiff (field ': touched) ': s)</li><li class="src short"><a href="#v:migrateModifyField">migrateModifyField</a> :: <span class="keyword">forall</span> field oldTempl newTempl diff touched fieldTy s. (<a href="Lorentz-UStore.html#t:HasUField" title="Lorentz.UStore">HasUField</a> field fieldTy oldTempl, <a href="Lorentz-UStore.html#t:HasUField" title="Lorentz.UStore">HasUField</a> field fieldTy newTempl) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> field -&gt; (fieldTy ': (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl diff touched ': s)) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl diff touched ': s)</li><li class="src short"><span class="keyword">type</span> <a href="#t:PickMarkedFields">PickMarkedFields</a> marker template = GPickMarkedFields marker (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> template)</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>UStore and related type definitions</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:UStore" class="def">UStore</a> (a :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) <a href="src/Lorentz.UStore.Types.html#UStore" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></p><div class="doc"><p>Gathers multple fields and <code><a href="Lorentz-Value.html#t:BigMap" title="Lorentz.Value">BigMap</a></code>s under one object.</p><p>Type argument of this datatype stands for a &quot;store template&quot; -
 a datatype with one constructor and multiple fields, each containing
 an object of type <code><a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a></code> or <code><a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a></code> and corresponding to single
 virtual field or <code><a href="Lorentz-Value.html#t:BigMap" title="Lorentz.Value">BigMap</a></code> respectively.
 It's also possible to parameterize it with a larger type which is
 a product of types satisfying the above property.</p></div><div class="subs instances"><details id="i:UStore" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:Eq:1"></span> <a href="Lorentz-Prelude.html#t:Eq" title="Lorentz.Prelude">Eq</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-66" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a -&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a -&gt; <a href="Lorentz-Value.html#t:Bool" title="Lorentz.Value">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a -&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a -&gt; <a href="Lorentz-Value.html#t:Bool" title="Lorentz.Value">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:Show:2"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-66" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:Generic:3"></span> <a href="Lorentz-Prelude.html#t:Generic" title="Lorentz.Prelude">Generic</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-66" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:Generic:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a -&gt; <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) x -&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:Semigroup:4"></span> <a href="Lorentz-Prelude.html#t:Semigroup" title="Lorentz.Prelude">Semigroup</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-67" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:Semigroup:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a -&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a -&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) -&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a -&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:Monoid:5"></span> <a href="Lorentz-Prelude.html#t:Monoid" title="Lorentz.Prelude">Monoid</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-67" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:Monoid:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a -&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a -&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a] -&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:Default:6"></span> <a href="Lorentz-Value.html#t:Default" title="Lorentz.Value">Default</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-67" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:Default:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:def">def</a> :: <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a <a href="#v:def" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:Wrapped:7"></span> <a href="Lorentz-Coercions.html#t:Wrapped" title="Lorentz.Coercions">Wrapped</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-71" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:Wrapped:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Lorentz-Coercions.html#t:Unwrapped" title="Lorentz.Coercions">Unwrapped</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Unwrapped" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:_Wrapped-39-">_Wrapped'</a> :: <a href="../lens-4.17.1/Control-Lens-Type.html#t:Iso-39-" title="Control.Lens.Type">Iso'</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) (<a href="Lorentz-Coercions.html#t:Unwrapped" title="Lorentz.Coercions">Unwrapped</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)) <a href="#v:_Wrapped-39-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:TypeHasDoc:8"></span> <a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> template =&gt; <a href="Lorentz-Doc.html#t:TypeHasDoc" title="Lorentz.Doc">TypeHasDoc</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template)</span> <a href="src/Lorentz.UStore.Types.html#line-100" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:TypeHasDoc:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:typeDocName">typeDocName</a> :: <a href="Lorentz-Prelude.html#t:Proxy" title="Lorentz.Prelude">Proxy</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template) -&gt; <a href="Lorentz-Prelude.html#t:Text" title="Lorentz.Prelude">Text</a> <a href="#v:typeDocName" class="selflink">#</a></p><p class="src"><a href="#v:typeDocMdDescription">typeDocMdDescription</a> :: <a href="Lorentz-Doc.html#t:Markdown" title="Lorentz.Doc">Markdown</a> <a href="#v:typeDocMdDescription" class="selflink">#</a></p><p class="src"><a href="#v:typeDocMdReference">typeDocMdReference</a> :: <a href="Lorentz-Prelude.html#t:Proxy" title="Lorentz.Prelude">Proxy</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template) -&gt; <a href="../morley-1.0.0/Michelson-Typed-Haskell-Doc.html#t:WithinParens" title="Michelson.Typed.Haskell.Doc">WithinParens</a> -&gt; <a href="Lorentz-Doc.html#t:Markdown" title="Lorentz.Doc">Markdown</a> <a href="#v:typeDocMdReference" class="selflink">#</a></p><p class="src"><a href="#v:typeDocDependencies">typeDocDependencies</a> :: <a href="Lorentz-Prelude.html#t:Proxy" title="Lorentz.Prelude">Proxy</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template) -&gt; [<a href="Lorentz-Doc.html#t:SomeTypeWithDoc" title="Lorentz.Doc">SomeTypeWithDoc</a>] <a href="#v:typeDocDependencies" class="selflink">#</a></p><p class="src"><a href="#v:typeDocHaskellRep">typeDocHaskellRep</a> :: <a href="../morley-1.0.0/Michelson-Typed-Haskell-Doc.html#t:TypeDocHaskellRep" title="Michelson.Typed.Haskell.Doc">TypeDocHaskellRep</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template) <a href="#v:typeDocHaskellRep" class="selflink">#</a></p><p class="src"><a href="#v:typeDocMichelsonRep">typeDocMichelsonRep</a> :: <a href="../morley-1.0.0/Michelson-Typed-Haskell-Doc.html#t:TypeDocMichelsonRep" title="Michelson.Typed.Haskell.Doc">TypeDocMichelsonRep</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template) <a href="#v:typeDocMichelsonRep" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:IsoValue:9"></span> <a href="Lorentz-Value.html#t:IsoValue" title="Lorentz.Value">IsoValue</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-67" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:IsoValue:9"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Lorentz-Value.html#t:ToT" title="Lorentz.Value">ToT</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) :: <a href="../morley-1.0.0/Michelson-Typed-T.html#t:T" title="Michelson.Typed.T">T</a> <a href="#t:ToT" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toVal">toVal</a> :: <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a -&gt; <a href="Lorentz-Value.html#t:Value" title="Lorentz.Value">Value</a> (<a href="Lorentz-Value.html#t:ToT" title="Lorentz.Value">ToT</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)) <a href="#v:toVal" class="selflink">#</a></p><p class="src"><a href="#v:fromVal">fromVal</a> :: <a href="Lorentz-Value.html#t:Value" title="Lorentz.Value">Value</a> (<a href="Lorentz-Value.html#t:ToT" title="Lorentz.Value">ToT</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)) -&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a <a href="#v:fromVal" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:GetOpHs:10"></span> <a href="Lorentz-Polymorphic.html#t:GetOpHs" title="Lorentz.Polymorphic">GetOpHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-68" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:GetOpHs:10"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Lorentz-Polymorphic.html#t:GetOpKeyHs" title="Lorentz.Polymorphic">GetOpKeyHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="src/Lorentz.Polymorphic.html#GetOpKeyHs" class="link">Source</a> <a href="#t:GetOpKeyHs" class="selflink">#</a></p><p class="src"><span class="keyword">type</span> <a href="Lorentz-Polymorphic.html#t:GetOpValHs" title="Lorentz.Polymorphic">GetOpValHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="src/Lorentz.Polymorphic.html#GetOpValHs" class="link">Source</a> <a href="#t:GetOpValHs" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:UpdOpHs:11"></span> <a href="Lorentz-Polymorphic.html#t:UpdOpHs" title="Lorentz.Polymorphic">UpdOpHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-68" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:UpdOpHs:11"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Lorentz-Polymorphic.html#t:UpdOpKeyHs" title="Lorentz.Polymorphic">UpdOpKeyHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="src/Lorentz.Polymorphic.html#UpdOpKeyHs" class="link">Source</a> <a href="#t:UpdOpKeyHs" class="selflink">#</a></p><p class="src"><span class="keyword">type</span> <a href="Lorentz-Polymorphic.html#t:UpdOpParamsHs" title="Lorentz.Polymorphic">UpdOpParamsHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="src/Lorentz.Polymorphic.html#UpdOpParamsHs" class="link">Source</a> <a href="#t:UpdOpParamsHs" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:MemOpHs:12"></span> <a href="Lorentz-Polymorphic.html#t:MemOpHs" title="Lorentz.Polymorphic">MemOpHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-68" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:MemOpHs:12"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Lorentz-Polymorphic.html#t:MemOpKeyHs" title="Lorentz.Polymorphic">MemOpKeyHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="src/Lorentz.Polymorphic.html#MemOpKeyHs" class="link">Source</a> <a href="#t:MemOpKeyHs" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:HasTypeAnn:13"></span> <a href="Lorentz-TypeAnns.html#t:HasTypeAnn" title="Lorentz.TypeAnns">HasTypeAnn</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-69" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:HasTypeAnn:13"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getTypeAnn">getTypeAnn</a> :: <a href="../morley-1.0.0/Michelson-Typed-Annotation.html#t:Notes" title="Michelson.Typed.Annotation">Notes</a> (<a href="Lorentz-Value.html#t:ToT" title="Lorentz.Value">ToT</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)) <a href="src/Lorentz.TypeAnns.html#getTypeAnn" class="link">Source</a> <a href="#v:getTypeAnn" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:StoreHasField:14"></span> <a href="Lorentz-UStore.html#t:HasUField" title="Lorentz.UStore">HasUField</a> fname ftype templ =&gt; <a href="Lorentz-StoreClass.html#t:StoreHasField" title="Lorentz.StoreClass">StoreHasField</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> templ) fname ftype</span> <a href="src/Lorentz.UStore.Instances.html#line-9" class="link">Source</a> <a href="#t:StoreHasField" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:StoreHasField:14"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Instances.html">Lorentz.UStore.Instances</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:storeFieldOps">storeFieldOps</a> :: <a href="Lorentz-StoreClass.html#t:StoreFieldOps" title="Lorentz.StoreClass">StoreFieldOps</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> templ) fname ftype <a href="src/Lorentz.StoreClass.html#storeFieldOps" class="link">Source</a> <a href="#v:storeFieldOps" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:StoreHasSubmap:15"></span> <a href="Lorentz-UStore.html#t:HasUStore" title="Lorentz.UStore">HasUStore</a> mname key value templ =&gt; <a href="Lorentz-StoreClass.html#t:StoreHasSubmap" title="Lorentz.StoreClass">StoreHasSubmap</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> templ) mname key value</span> <a href="src/Lorentz.UStore.Instances.html#line-16" class="link">Source</a> <a href="#t:StoreHasSubmap" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:StoreHasSubmap:15"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Instances.html">Lorentz.UStore.Instances</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:storeSubmapOps">storeSubmapOps</a> :: <a href="Lorentz-StoreClass.html#t:StoreSubmapOps" title="Lorentz.StoreClass">StoreSubmapOps</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> templ) mname key value <a href="src/Lorentz.StoreClass.html#storeSubmapOps" class="link">Source</a> <a href="#v:storeSubmapOps" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:CanCastTo:16"></span> SameUStoreTemplate template1 template2 =&gt; <a href="Lorentz-Coercions.html#t:CanCastTo" title="Lorentz.Coercions">CanCastTo</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template1 :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template2 :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>)</span> <a href="src/Lorentz.UStore.Migration.Base.html#line-132" class="link">Source</a> <a href="#t:CanCastTo" class="selflink">#</a></td><td class="doc"><p>We allow casting between <code><a href="Lorentz-UStore-Migration-Base.html#t:UStore_" title="Lorentz.UStore.Migration.Base">UStore_</a></code> and <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code> freely.</p></td></tr><tr><td colspan="2"><details id="i:id:UStore:CanCastTo:16"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Migration-Base.html">Lorentz.UStore.Migration.Base</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:castDummy">castDummy</a> :: <a href="Lorentz-Prelude.html#t:Proxy" title="Lorentz.Prelude">Proxy</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template1) -&gt; <a href="Lorentz-Prelude.html#t:Proxy" title="Lorentz.Prelude">Proxy</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template2) -&gt; () <a href="src/Lorentz.Coercions.html#castDummy" class="link">Source</a> <a href="#v:castDummy" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:Rep:17"></span> <span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-66" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:Rep:17"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="src"><span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) = <a href="../base-4.12.0.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;UStore&quot; &quot;Lorentz.UStore.Types&quot; &quot;lorentz-0.1.0-34InOYPWuH88380O5o3fdq&quot; <a href="Lorentz-Value.html#v:True" title="Lorentz.Value">True</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;UStore&quot; <a href="../base-4.12.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> <a href="Lorentz-Value.html#v:True" title="Lorentz.Value">True</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="Lorentz-Prelude.html#v:Just" title="Lorentz.Prelude">Just</a> &quot;unUStore&quot;) <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> (<a href="Lorentz-Value.html#t:BigMap" title="Lorentz.Value">BigMap</a> <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a> <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a>))))</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:Unwrapped:18"></span> <span class="keyword">type</span> <a href="Lorentz-Coercions.html#t:Unwrapped" title="Lorentz.Coercions">Unwrapped</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-71" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:Unwrapped:18"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="src"><span class="keyword">type</span> <a href="Lorentz-Coercions.html#t:Unwrapped" title="Lorentz.Coercions">Unwrapped</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) = GUnwrapped (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a))</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:ToT:19"></span> <span class="keyword">type</span> <a href="Lorentz-Value.html#t:ToT" title="Lorentz.Value">ToT</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-67" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:ToT:19"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="src"><span class="keyword">type</span> <a href="Lorentz-Value.html#t:ToT" title="Lorentz.Value">ToT</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) = <a href="Lorentz-Value.html#t:ToT" title="Lorentz.Value">ToT</a> (<a href="Lorentz-Value.html#t:BigMap" title="Lorentz.Value">BigMap</a> <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a> <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a>)</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:GetOpKeyHs:20"></span> <span class="keyword">type</span> <a href="Lorentz-Polymorphic.html#t:GetOpKeyHs" title="Lorentz.Polymorphic">GetOpKeyHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-68" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:GetOpKeyHs:20"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="src"><span class="keyword">type</span> <a href="Lorentz-Polymorphic.html#t:GetOpKeyHs" title="Lorentz.Polymorphic">GetOpKeyHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) = <a href="Lorentz-Polymorphic.html#t:GetOpKeyHs" title="Lorentz.Polymorphic">GetOpKeyHs</a> (<a href="Lorentz-Value.html#t:BigMap" title="Lorentz.Value">BigMap</a> <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a> <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a>)</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:GetOpValHs:21"></span> <span class="keyword">type</span> <a href="Lorentz-Polymorphic.html#t:GetOpValHs" title="Lorentz.Polymorphic">GetOpValHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-68" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:GetOpValHs:21"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="src"><span class="keyword">type</span> <a href="Lorentz-Polymorphic.html#t:GetOpValHs" title="Lorentz.Polymorphic">GetOpValHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) = <a href="Lorentz-Polymorphic.html#t:GetOpValHs" title="Lorentz.Polymorphic">GetOpValHs</a> (<a href="Lorentz-Value.html#t:BigMap" title="Lorentz.Value">BigMap</a> <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a> <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a>)</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:UpdOpKeyHs:22"></span> <span class="keyword">type</span> <a href="Lorentz-Polymorphic.html#t:UpdOpKeyHs" title="Lorentz.Polymorphic">UpdOpKeyHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-68" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:UpdOpKeyHs:22"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="src"><span class="keyword">type</span> <a href="Lorentz-Polymorphic.html#t:UpdOpKeyHs" title="Lorentz.Polymorphic">UpdOpKeyHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) = <a href="Lorentz-Polymorphic.html#t:UpdOpKeyHs" title="Lorentz.Polymorphic">UpdOpKeyHs</a> (<a href="Lorentz-Value.html#t:BigMap" title="Lorentz.Value">BigMap</a> <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a> <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a>)</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:UpdOpParamsHs:23"></span> <span class="keyword">type</span> <a href="Lorentz-Polymorphic.html#t:UpdOpParamsHs" title="Lorentz.Polymorphic">UpdOpParamsHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-68" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:UpdOpParamsHs:23"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="src"><span class="keyword">type</span> <a href="Lorentz-Polymorphic.html#t:UpdOpParamsHs" title="Lorentz.Polymorphic">UpdOpParamsHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) = <a href="Lorentz-Polymorphic.html#t:UpdOpParamsHs" title="Lorentz.Polymorphic">UpdOpParamsHs</a> (<a href="Lorentz-Value.html#t:BigMap" title="Lorentz.Value">BigMap</a> <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a> <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a>)</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStore:MemOpKeyHs:24"></span> <span class="keyword">type</span> <a href="Lorentz-Polymorphic.html#t:MemOpKeyHs" title="Lorentz.Polymorphic">MemOpKeyHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a)</span> <a href="src/Lorentz.UStore.Types.html#line-68" class="link">Source</a> <a href="#t:UStore" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStore:MemOpKeyHs:24"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="src"><span class="keyword">type</span> <a href="Lorentz-Polymorphic.html#t:MemOpKeyHs" title="Lorentz.Polymorphic">MemOpKeyHs</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> a) = <a href="Lorentz-Polymorphic.html#t:MemOpKeyHs" title="Lorentz.Polymorphic">MemOpKeyHs</a> (<a href="Lorentz-Value.html#t:BigMap" title="Lorentz.Value">BigMap</a> <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a> <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a>)</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> k <a id="t:-124--126--62-" class="def">|~&gt;</a> v <a href="src/Lorentz.UStore.Types.html#%7C~%3E" class="link">Source</a> <a href="#t:-124--126--62-" class="selflink">#</a></p><div class="doc"><p>Describes one virtual big map in the storage.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:UStoreSubMap" class="def">UStoreSubMap</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:unUStoreSubMap" class="def">unUStoreSubMap</a> :: <a href="Lorentz-Value.html#t:Map" title="Lorentz.Value">Map</a> k v</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:-124--126--62-" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:-124--126--62-:Eq:1"></span> (<a href="Lorentz-Prelude.html#t:Eq" title="Lorentz.Prelude">Eq</a> k, <a href="Lorentz-Prelude.html#t:Eq" title="Lorentz.Prelude">Eq</a> v) =&gt; <a href="Lorentz-Prelude.html#t:Eq" title="Lorentz.Prelude">Eq</a> (k <a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a> v)</span> <a href="src/Lorentz.UStore.Types.html#line-75" class="link">Source</a> <a href="#t:-124--126--62-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:-124--126--62-:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: (k <a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a> v) -&gt; (k <a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a> v) -&gt; <a href="Lorentz-Value.html#t:Bool" title="Lorentz.Value">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: (k <a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a> v) -&gt; (k <a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a> v) -&gt; <a href="Lorentz-Value.html#t:Bool" title="Lorentz.Value">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:-124--126--62-:Show:2"></span> (<a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> k, <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> v) =&gt; <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (k <a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a> v)</span> <a href="src/Lorentz.UStore.Types.html#line-75" class="link">Source</a> <a href="#t:-124--126--62-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:-124--126--62-:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (k <a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a> v) -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: (k <a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a> v) -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [k <a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a> v] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:-124--126--62-:Arbitrary:3"></span> (<a href="Lorentz-Prelude.html#t:Ord" title="Lorentz.Prelude">Ord</a> k, <a href="../QuickCheck-2.13.2/Test-QuickCheck-Arbitrary.html#t:Arbitrary" title="Test.QuickCheck.Arbitrary">Arbitrary</a> k, <a href="../QuickCheck-2.13.2/Test-QuickCheck-Arbitrary.html#t:Arbitrary" title="Test.QuickCheck.Arbitrary">Arbitrary</a> v) =&gt; <a href="../QuickCheck-2.13.2/Test-QuickCheck-Arbitrary.html#t:Arbitrary" title="Test.QuickCheck.Arbitrary">Arbitrary</a> (k <a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a> v)</span> <a href="src/Lorentz.UStore.Types.html#line-76" class="link">Source</a> <a href="#t:-124--126--62-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:-124--126--62-:Arbitrary:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arbitrary">arbitrary</a> :: <a href="../QuickCheck-2.13.2/Test-QuickCheck-Gen.html#t:Gen" title="Test.QuickCheck.Gen">Gen</a> (k <a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a> v) <a href="#v:arbitrary" class="selflink">#</a></p><p class="src"><a href="#v:shrink">shrink</a> :: (k <a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a> v) -&gt; [k <a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a> v] <a href="#v:shrink" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:-124--126--62-:Default:4"></span> <a href="Lorentz-Value.html#t:Default" title="Lorentz.Value">Default</a> (k <a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a> v)</span> <a href="src/Lorentz.UStore.Types.html#line-76" class="link">Source</a> <a href="#t:-124--126--62-" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:-124--126--62-:Default:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:def">def</a> :: k <a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a> v <a href="#v:def" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:UStoreFieldExt" class="def">UStoreFieldExt</a> (m :: <a href="Lorentz-UStore.html#t:UStoreMarkerType" title="Lorentz.UStore">UStoreMarkerType</a>) (v :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) <a href="src/Lorentz.UStore.Types.html#UStoreFieldExt" class="link">Source</a> <a href="#t:UStoreFieldExt" class="selflink">#</a></p><div class="doc"><p>Describes plain field in the storage.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:UStoreField" class="def">UStoreField</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:unUStoreField" class="def">unUStoreField</a> :: v</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:UStoreFieldExt" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStoreFieldExt:Eq:1"></span> <a href="Lorentz-Prelude.html#t:Eq" title="Lorentz.Prelude">Eq</a> v =&gt; <a href="Lorentz-Prelude.html#t:Eq" title="Lorentz.Prelude">Eq</a> (<a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> m v)</span> <a href="src/Lorentz.UStore.Types.html#line-80" class="link">Source</a> <a href="#t:UStoreFieldExt" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStoreFieldExt:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> m v -&gt; <a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> m v -&gt; <a href="Lorentz-Value.html#t:Bool" title="Lorentz.Value">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> m v -&gt; <a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> m v -&gt; <a href="Lorentz-Value.html#t:Bool" title="Lorentz.Value">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStoreFieldExt:Show:2"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> v =&gt; <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> m v)</span> <a href="src/Lorentz.UStore.Types.html#line-80" class="link">Source</a> <a href="#t:UStoreFieldExt" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStoreFieldExt:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> m v -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> m v -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> m v] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UStoreFieldExt:Arbitrary:3"></span> <a href="../QuickCheck-2.13.2/Test-QuickCheck-Arbitrary.html#t:Arbitrary" title="Test.QuickCheck.Arbitrary">Arbitrary</a> v =&gt; <a href="../QuickCheck-2.13.2/Test-QuickCheck-Arbitrary.html#t:Arbitrary" title="Test.QuickCheck.Arbitrary">Arbitrary</a> (<a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> m v)</span> <a href="src/Lorentz.UStore.Types.html#line-81" class="link">Source</a> <a href="#t:UStoreFieldExt" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UStoreFieldExt:Arbitrary:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arbitrary">arbitrary</a> :: <a href="../QuickCheck-2.13.2/Test-QuickCheck-Gen.html#t:Gen" title="Test.QuickCheck.Gen">Gen</a> (<a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> m v) <a href="#v:arbitrary" class="selflink">#</a></p><p class="src"><a href="#v:shrink">shrink</a> :: <a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> m v -&gt; [<a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> m v] <a href="#v:shrink" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:UStoreField" class="def">UStoreField</a> = <a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> <a href="Lorentz-UStore-Types.html#t:UMarkerPlainField" title="Lorentz.UStore.Types">UMarkerPlainField</a> <a href="src/Lorentz.UStore.Types.html#UStoreField" class="link">Source</a> <a href="#t:UStoreField" class="selflink">#</a></p><div class="doc"><p>Just a plain field used as data.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:UStoreMarkerType" class="def">UStoreMarkerType</a> = UStoreMarker -&gt; <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="src/Lorentz.UStore.Types.html#UStoreMarkerType" class="link">Source</a> <a href="#t:UStoreMarkerType" class="selflink">#</a></p><div class="doc"><p>Specific kind used to designate markers for <code><a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a></code>.</p><p>We suggest that fields may serve different purposes and so annotated with
 special markers accordingly. See example below.</p><p>This kind is implemented like that because we want markers to differ from all
 other types in kind; herewith <code><a href="Lorentz-UStore.html#t:UStoreMarkerType" title="Lorentz.UStore">UStoreMarkerType</a></code> is still an open kind
 (has potentially infinite number of inhabitants).</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:KnownUStoreMarker" class="def">KnownUStoreMarker</a> (marker :: <a href="Lorentz-UStore.html#t:UStoreMarkerType" title="Lorentz.UStore">UStoreMarkerType</a>) <span class="keyword">where</span> <a href="src/Lorentz.UStore.Types.html#KnownUStoreMarker" class="link">Source</a> <a href="#t:KnownUStoreMarker" class="selflink">#</a></p><div class="doc"><p>Allows to specify format of key under which fields of this type are stored.
 Useful to avoid collisions.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src">Nothing</p></div><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a id="t:ShowUStoreField" class="def">ShowUStoreField</a> marker v :: <a href="../base-4.12.0.0/GHC-TypeLits.html#t:ErrorMessage" title="GHC.TypeLits">ErrorMessage</a> <a href="src/Lorentz.UStore.Types.html#ShowUStoreField" class="link">Source</a> <a href="#t:ShowUStoreField" class="selflink">#</a></p><div class="doc"><p>Display type-level information about UStore field with given marker and
 field value type.
 Used for error messages.</p></div></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:mkFieldMarkerUKey" class="def">mkFieldMarkerUKey</a> :: <a href="Lorentz-Value.html#t:MText" title="Lorentz.Value">MText</a> -&gt; <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a> <a href="src/Lorentz.UStore.Types.html#mkFieldMarkerUKey" class="link">Source</a> <a href="#v:mkFieldMarkerUKey" class="selflink">#</a></p><div class="doc"><p>By field name derive key under which field should be stored.</p></div><p class="src"><a id="v:mkFieldMarkerUKey" class="def">mkFieldMarkerUKey</a> :: <a href="Lorentz-Value.html#t:MText" title="Lorentz.Value">MText</a> -&gt; <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a> <a href="src/Lorentz.UStore.Types.html#mkFieldMarkerUKey" class="link">Source</a> <a href="#v:mkFieldMarkerUKey" class="selflink">#</a></p><div class="doc"><p>By field name derive key under which field should be stored.</p></div></div><div class="subs instances"><details id="i:KnownUStoreMarker" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:KnownUStoreMarker:KnownUStoreMarker:1"></span> <a href="Lorentz-UStore.html#t:KnownUStoreMarker" title="Lorentz.UStore">KnownUStoreMarker</a> <a href="Lorentz-UStore-Types.html#t:UMarkerPlainField" title="Lorentz.UStore.Types">UMarkerPlainField</a></span> <a href="src/Lorentz.UStore.Types.html#line-150" class="link">Source</a> <a href="#t:KnownUStoreMarker" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:KnownUStoreMarker:KnownUStoreMarker:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Types.html">Lorentz.UStore.Types</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Lorentz-UStore.html#t:ShowUStoreField" title="Lorentz.UStore">ShowUStoreField</a> <a href="Lorentz-UStore-Types.html#t:UMarkerPlainField" title="Lorentz.UStore.Types">UMarkerPlainField</a> v :: <a href="../base-4.12.0.0/GHC-TypeLits.html#t:ErrorMessage" title="GHC.TypeLits">ErrorMessage</a> <a href="src/Lorentz.UStore.Types.html#ShowUStoreField" class="link">Source</a> <a href="#t:ShowUStoreField" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mkFieldMarkerUKey">mkFieldMarkerUKey</a> :: <a href="Lorentz-Value.html#t:MText" title="Lorentz.Value">MText</a> -&gt; <a href="Lorentz-Value.html#t:ByteString" title="Lorentz.Value">ByteString</a> <a href="src/Lorentz.UStore.Types.html#mkFieldMarkerUKey" class="link">Source</a> <a href="#v:mkFieldMarkerUKey" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h2>Type-lookup-by-name</h2></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:GetUStoreKey" class="def">GetUStoreKey</a> store name = <a href="Lorentz-UStore-Types.html#t:MSKey" title="Lorentz.UStore.Types">MSKey</a> (<a href="Lorentz-UStore-Types.html#t:GetUStore" title="Lorentz.UStore.Types">GetUStore</a> name store) <a href="src/Lorentz.UStore.Types.html#GetUStoreKey" class="link">Source</a> <a href="#t:GetUStoreKey" class="selflink">#</a></p><div class="doc"><p>Get type of submap key.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:GetUStoreValue" class="def">GetUStoreValue</a> store name = <a href="Lorentz-UStore-Types.html#t:MSValue" title="Lorentz.UStore.Types">MSValue</a> (<a href="Lorentz-UStore-Types.html#t:GetUStore" title="Lorentz.UStore.Types">GetUStore</a> name store) <a href="src/Lorentz.UStore.Types.html#GetUStoreValue" class="link">Source</a> <a href="#t:GetUStoreValue" class="selflink">#</a></p><div class="doc"><p>Get type of submap value.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:GetUStoreField" class="def">GetUStoreField</a> store name = <a href="Lorentz-UStore-Types.html#t:FSValue" title="Lorentz.UStore.Types">FSValue</a> (<a href="Lorentz-UStore-Types.html#t:GetUStore" title="Lorentz.UStore.Types">GetUStore</a> name store) <a href="src/Lorentz.UStore.Types.html#GetUStoreField" class="link">Source</a> <a href="#t:GetUStoreField" class="selflink">#</a></p><div class="doc"><p>Get type of plain field.
 This ignores marker with field type.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:GetUStoreFieldMarker" class="def">GetUStoreFieldMarker</a> store name = <a href="Lorentz-UStore-Types.html#t:FSMarker" title="Lorentz.UStore.Types">FSMarker</a> (<a href="Lorentz-UStore-Types.html#t:GetUStore" title="Lorentz.UStore.Types">GetUStore</a> name store) <a href="src/Lorentz.UStore.Types.html#GetUStoreFieldMarker" class="link">Source</a> <a href="#t:GetUStoreFieldMarker" class="selflink">#</a></p><div class="doc"><p>Get kind of field.</p></div></div><a href="#g:3" id="g:3"><h2>Instructions</h2></a><div class="top"><p class="src"><a id="v:ustoreMem" class="def">ustoreMem</a> :: <span class="keyword">forall</span> store name s. KeyAccessC store name =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:GetUStoreKey" title="Lorentz.UStore">GetUStoreKey</a> store name ': (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s)) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-Value.html#t:Bool" title="Lorentz.Value">Bool</a> ': s) <a href="src/Lorentz.UStore.Instr.html#ustoreMem" class="link">Source</a> <a href="#v:ustoreMem" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ustoreGet" class="def">ustoreGet</a> :: <span class="keyword">forall</span> store name s. (KeyAccessC store name, ValueAccessC store name) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:GetUStoreKey" title="Lorentz.UStore">GetUStoreKey</a> store name ': (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s)) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-Prelude.html#t:Maybe" title="Lorentz.Prelude">Maybe</a> (<a href="Lorentz-UStore.html#t:GetUStoreValue" title="Lorentz.UStore">GetUStoreValue</a> store name) ': s) <a href="src/Lorentz.UStore.Instr.html#ustoreGet" class="link">Source</a> <a href="#v:ustoreGet" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ustoreUpdate" class="def">ustoreUpdate</a> :: <span class="keyword">forall</span> store name s. (KeyAccessC store name, ValueAccessC store name) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:GetUStoreKey" title="Lorentz.UStore">GetUStoreKey</a> store name ': (<a href="Lorentz-Prelude.html#t:Maybe" title="Lorentz.Prelude">Maybe</a> (<a href="Lorentz-UStore.html#t:GetUStoreValue" title="Lorentz.UStore">GetUStoreValue</a> store name) ': (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s))) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s) <a href="src/Lorentz.UStore.Instr.html#ustoreUpdate" class="link">Source</a> <a href="#v:ustoreUpdate" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ustoreInsert" class="def">ustoreInsert</a> :: <span class="keyword">forall</span> store name s. (KeyAccessC store name, ValueAccessC store name) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:GetUStoreKey" title="Lorentz.UStore">GetUStoreKey</a> store name ': (<a href="Lorentz-UStore.html#t:GetUStoreValue" title="Lorentz.UStore">GetUStoreValue</a> store name ': (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s))) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s) <a href="src/Lorentz.UStore.Instr.html#ustoreInsert" class="link">Source</a> <a href="#v:ustoreInsert" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ustoreInsertNew" class="def">ustoreInsertNew</a> :: <span class="keyword">forall</span> store name s. (KeyAccessC store name, ValueAccessC store name) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<span class="keyword">forall</span> s0 any. (<a href="Lorentz-UStore.html#t:GetUStoreKey" title="Lorentz.UStore">GetUStoreKey</a> store name ': s0) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> any) -&gt; (<a href="Lorentz-UStore.html#t:GetUStoreKey" title="Lorentz.UStore">GetUStoreKey</a> store name ': (<a href="Lorentz-UStore.html#t:GetUStoreValue" title="Lorentz.UStore">GetUStoreValue</a> store name ': (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s))) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s) <a href="src/Lorentz.UStore.Instr.html#ustoreInsertNew" class="link">Source</a> <a href="#v:ustoreInsertNew" class="selflink">#</a></p><div class="doc"><p>Insert a key-value pair, but fail if it will overwrite some existing entry.</p></div></div><div class="top"><p class="src"><a id="v:ustoreDelete" class="def">ustoreDelete</a> :: <span class="keyword">forall</span> store name s. KeyAccessC store name =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:GetUStoreKey" title="Lorentz.UStore">GetUStoreKey</a> store name ': (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s)) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s) <a href="src/Lorentz.UStore.Instr.html#ustoreDelete" class="link">Source</a> <a href="#v:ustoreDelete" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:ustoreToField" class="def">ustoreToField</a> :: <span class="keyword">forall</span> store name s. FieldAccessC store name =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:GetUStoreField" title="Lorentz.UStore">GetUStoreField</a> store name ': s) <a href="src/Lorentz.UStore.Instr.html#ustoreToField" class="link">Source</a> <a href="#v:ustoreToField" class="selflink">#</a></p><div class="doc"><p>Like <code>toField</code>, but for <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code>.</p><p>This may fail only if <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code> was made up incorrectly during contract
 initialization.</p></div></div><div class="top"><p class="src"><a id="v:ustoreGetField" class="def">ustoreGetField</a> :: <span class="keyword">forall</span> store name s. FieldAccessC store name =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:GetUStoreField" title="Lorentz.UStore">GetUStoreField</a> store name ': (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s)) <a href="src/Lorentz.UStore.Instr.html#ustoreGetField" class="link">Source</a> <a href="#v:ustoreGetField" class="selflink">#</a></p><div class="doc"><p>Like <code>getField</code>, but for <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code>.</p><p>This may fail only if <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code> was made up incorrectly during contract
 initialization.</p></div></div><div class="top"><p class="src"><a id="v:ustoreSetField" class="def">ustoreSetField</a> :: <span class="keyword">forall</span> store name s. FieldAccessC store name =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:GetUStoreField" title="Lorentz.UStore">GetUStoreField</a> store name ': (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s)) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> store ': s) <a href="src/Lorentz.UStore.Instr.html#ustoreSetField" class="link">Source</a> <a href="#v:ustoreSetField" class="selflink">#</a></p><div class="doc"><p>Like <code>setField</code>, but for <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code>.</p></div></div><a href="#g:4" id="g:4"><h2>Instruction constraints</h2></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:HasUStore" class="def">HasUStore</a> name key value store = (KeyAccessC store name, ValueAccessC store name, <a href="Lorentz-UStore.html#t:GetUStoreKey" title="Lorentz.UStore">GetUStoreKey</a> store name ~ key, <a href="Lorentz-UStore.html#t:GetUStoreValue" title="Lorentz.UStore">GetUStoreValue</a> store name ~ value) <a href="src/Lorentz.UStore.Instr.html#HasUStore" class="link">Source</a> <a href="#t:HasUStore" class="selflink">#</a></p><div class="doc"><p>This constraint can be used if a function needs to work with
 <em>big</em> store, but needs to know only about some submap(s) of it.</p><p>It can use all UStore operations for a particular name, key and
 value without knowing whole template.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:HasUField" class="def">HasUField</a> name ty store = (FieldAccessC store name, <a href="Lorentz-UStore.html#t:GetUStoreField" title="Lorentz.UStore">GetUStoreField</a> store name ~ ty) <a href="src/Lorentz.UStore.Instr.html#HasUField" class="link">Source</a> <a href="#t:HasUField" class="selflink">#</a></p><div class="doc"><p>This constraint can be used if a function needs to work with
 <em>big</em> store, but needs to know only about some field of it.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:HasUStoreForAllIn" class="def">HasUStoreForAllIn</a> store constrained = (<a href="Lorentz-Prelude.html#t:Generic" title="Lorentz.Prelude">Generic</a> store, GHasStoreForAllIn constrained (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> store)) <a href="src/Lorentz.UStore.Instr.html#HasUStoreForAllIn" class="link">Source</a> <a href="#t:HasUStoreForAllIn" class="selflink">#</a></p><div class="doc"><p>Write down all sensisble constraints which given <code>store</code> satisfies
 and apply them to <code>constrained</code>.</p><p>This store should have <code><a href="Lorentz-UStore.html#t:-124--126--62-" title="Lorentz.UStore">|~&gt;</a></code> and <code><a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a></code> fields in its immediate fields,
 no deep inspection is performed.</p></div></div><a href="#g:5" id="g:5"><h1>UStore composability</h1></a><div class="top"><p class="src"><a id="v:liftUStore" class="def">liftUStore</a> :: (<a href="Lorentz-Prelude.html#t:Generic" title="Lorentz.Prelude">Generic</a> template, RequireAllUniqueFields template) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> (<a href="../morley-1.0.0/Michelson-Typed-Haskell-Instr-Product.html#t:GetFieldType" title="Michelson.Typed.Haskell.Instr.Product">GetFieldType</a> template name) ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template ': s) <a href="src/Lorentz.UStore.Lift.html#liftUStore" class="link">Source</a> <a href="#v:liftUStore" class="selflink">#</a></p><div class="doc"><p>Lift an <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code> to another <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code> which contains all the entries
 of the former under given field.</p><p>This function is not intended for use in migrations, only in normal
 entry points.</p><p>Note that this function ensures that template of resulting store
 does not contain inner nested templates with duplicated fields,
 otherwise <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code> invariants could get broken.</p></div></div><div class="top"><p class="src"><a id="v:unliftUStore" class="def">unliftUStore</a> :: <a href="Lorentz-Prelude.html#t:Generic" title="Lorentz.Prelude">Generic</a> template =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> (<a href="../morley-1.0.0/Michelson-Typed-Haskell-Instr-Product.html#t:GetFieldType" title="Michelson.Typed.Haskell.Instr.Product">GetFieldType</a> template name) ': s) <a href="src/Lorentz.UStore.Lift.html#unliftUStore" class="link">Source</a> <a href="#v:unliftUStore" class="selflink">#</a></p><div class="doc"><p>Unlift an <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code> to a smaller <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code> which is part of the former.</p><p>This function is not intended for use in migrations, only in normal
 entry points.</p><p>Surprisingly, despite smaller <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code> may have extra entries,
 this function is safe when used in contract code.
 Truly, all getters and setters are still safe to use.
 Also, there is no way for the resulting small <code>UStore</code> to leak outside
 of the contract since the only place where <code>big_map</code> can appear
 is contract storage, so this small <code>UStore</code> can be either dropped
 or lifted back via <code><a href="Lorentz-UStore.html#v:liftUStore" title="Lorentz.UStore">liftUStore</a></code> to appear as part of the new contract's state.</p><p>When this function is run as part of standalone instructions sequence,
 not as part of contract code (e.g. in tests), you may get an <code>UStore</code>
 with entries not inherent to it.</p></div></div><a href="#g:6" id="g:6"><h1>UStore management from Haskell</h1></a><div class="top"><p class="src"><span class="keyword">class</span> (<a href="Lorentz-Prelude.html#t:Generic" title="Lorentz.Prelude">Generic</a> template, GUStoreConversible (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> template)) =&gt; <a id="t:UStoreConversible" class="def">UStoreConversible</a> template <a href="src/Lorentz.UStore.Haskell.html#UStoreConversible" class="link">Source</a> <a href="#t:UStoreConversible" class="selflink">#</a></p><div class="doc"><p>Given template can be converted to <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code> value.</p></div><div class="subs instances"><details id="i:UStoreConversible" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:UStoreConversible:UStoreConversible:1"></span> (<a href="Lorentz-Prelude.html#t:Generic" title="Lorentz.Prelude">Generic</a> template, GUStoreConversible (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> template)) =&gt; <a href="Lorentz-UStore.html#t:UStoreConversible" title="Lorentz.UStore">UStoreConversible</a> template</span> <a href="src/Lorentz.UStore.Haskell.html#line-153" class="link">Source</a> <a href="#t:UStoreConversible" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:UStoreConversible:UStoreConversible:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Haskell.html">Lorentz.UStore.Haskell</a></p></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:mkUStore" class="def">mkUStore</a> :: <a href="Lorentz-UStore.html#t:UStoreConversible" title="Lorentz.UStore">UStoreConversible</a> template =&gt; template -&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template <a href="src/Lorentz.UStore.Haskell.html#mkUStore" class="link">Source</a> <a href="#v:mkUStore" class="selflink">#</a></p><div class="doc"><p>Make <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code> from separate <code>big_map</code>s and fields.</p></div></div><div class="top"><p class="src"><a id="v:ustoreDecompose" class="def">ustoreDecompose</a> :: <span class="keyword">forall</span> template. <a href="Lorentz-UStore.html#t:UStoreConversible" title="Lorentz.UStore">UStoreConversible</a> template =&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template -&gt; <a href="Lorentz-Prelude.html#t:Either" title="Lorentz.Prelude">Either</a> <a href="Lorentz-Prelude.html#t:Text" title="Lorentz.Prelude">Text</a> (<a href="Lorentz-UStore-Haskell.html#t:UStoreContent" title="Lorentz.UStore.Haskell">UStoreContent</a>, template) <a href="src/Lorentz.UStore.Haskell.html#ustoreDecompose" class="link">Source</a> <a href="#v:ustoreDecompose" class="selflink">#</a></p><div class="doc"><p>Decompose <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code> into separate <code>big_map</code>s and fields.</p><p>Since this function needs to <code>UNPACK</code> content of <code>UStore</code> to actual
 keys and values, you have to provide <code>UnpackEnv</code>.</p><p>Along with resulting value, you get a list of <code>UStore</code> entries which
 were not recognized as belonging to any submap or field according to
 <code>UStore</code>'s template - this should be empty unless <code>UStore</code> invariants
 were violated.</p></div></div><div class="top"><p class="src"><a id="v:ustoreDecomposeFull" class="def">ustoreDecomposeFull</a> :: <span class="keyword">forall</span> template. <a href="Lorentz-UStore.html#t:UStoreConversible" title="Lorentz.UStore">UStoreConversible</a> template =&gt; <a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> template -&gt; <a href="Lorentz-Prelude.html#t:Either" title="Lorentz.Prelude">Either</a> <a href="Lorentz-Prelude.html#t:Text" title="Lorentz.Prelude">Text</a> template <a href="src/Lorentz.UStore.Haskell.html#ustoreDecomposeFull" class="link">Source</a> <a href="#v:ustoreDecomposeFull" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Lorentz-UStore.html#v:ustoreDecompose" title="Lorentz.UStore">ustoreDecompose</a></code>, but requires all entries from <code>UStore</code> to be
 recognized.</p></div></div><div class="top"><p class="src"><a id="v:fillUStore" class="def">fillUStore</a> :: <a href="Lorentz-UStore.html#t:UStoreConversible" title="Lorentz.UStore">UStoreConversible</a> template =&gt; template -&gt; <a href="Lorentz-UStore.html#t:UStoreMigration" title="Lorentz.UStore">UStoreMigration</a> () template <a href="src/Lorentz.UStore.Haskell.html#fillUStore" class="link">Source</a> <a href="#v:fillUStore" class="selflink">#</a></p><div class="doc"><p>Make migration script which initializes <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code> from scratch.</p></div></div><a href="#g:7" id="g:7"><h1>Migrations</h1></a><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:MigrationScript" class="def">MigrationScript</a> (oldStore :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (newStore :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) <a href="src/Lorentz.UStore.Migration.Base.html#MigrationScript" class="link">Source</a> <a href="#t:MigrationScript" class="selflink">#</a></p><div class="doc"><p>Code of migration for <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code>.</p><p>Invariant: preferably should fit into op size / gas limits (quite obvious).
 Often this stands for exactly one stage of migration (one Tezos transaction).</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MigrationScript" class="def">MigrationScript</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:unMigrationScript" class="def">unMigrationScript</a> :: <a href="Lorentz-Base.html#t:Lambda" title="Lorentz.Base">Lambda</a> <a href="Lorentz-UStore-Migration-Base.html#t:UStore_" title="Lorentz.UStore.Migration.Base">UStore_</a> <a href="Lorentz-UStore-Migration-Base.html#t:UStore_" title="Lorentz.UStore.Migration.Base">UStore_</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:MigrationScript" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MigrationScript:CanCastTo:1"></span> <a href="Lorentz-Coercions.html#t:CanCastTo" title="Lorentz.Coercions">CanCastTo</a> (<a href="Lorentz-Base.html#t:Lambda" title="Lorentz.Base">Lambda</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> ot1) (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> nt1)) (<a href="Lorentz-Base.html#t:Lambda" title="Lorentz.Base">Lambda</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> ot2) (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> nt2)) =&gt; <a href="Lorentz-Coercions.html#t:CanCastTo" title="Lorentz.Coercions">CanCastTo</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> ot1 nt1 :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> ot2 nt2 :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>)</span> <a href="src/Lorentz.UStore.Migration.Base.html#line-167" class="link">Source</a> <a href="#t:MigrationScript" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MigrationScript:CanCastTo:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Migration-Base.html">Lorentz.UStore.Migration.Base</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:castDummy">castDummy</a> :: <a href="Lorentz-Prelude.html#t:Proxy" title="Lorentz.Prelude">Proxy</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> ot1 nt1) -&gt; <a href="Lorentz-Prelude.html#t:Proxy" title="Lorentz.Prelude">Proxy</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> ot2 nt2) -&gt; () <a href="src/Lorentz.Coercions.html#castDummy" class="link">Source</a> <a href="#v:castDummy" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MigrationScript:Show:2"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore)</span> <a href="src/Lorentz.UStore.Migration.Base.html#line-153" class="link">Source</a> <a href="#t:MigrationScript" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MigrationScript:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Migration-Base.html">Lorentz.UStore.Migration.Base</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MigrationScript:Generic:3"></span> <a href="Lorentz-Prelude.html#t:Generic" title="Lorentz.Prelude">Generic</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore)</span> <a href="src/Lorentz.UStore.Migration.Base.html#line-153" class="link">Source</a> <a href="#t:MigrationScript" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MigrationScript:Generic:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Migration-Base.html">Lorentz.UStore.Migration.Base</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore) :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore -&gt; <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore) x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore) x -&gt; <a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MigrationScript:Wrapped:4"></span> <a href="Lorentz-Coercions.html#t:Wrapped" title="Lorentz.Coercions">Wrapped</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore)</span> <a href="src/Lorentz.UStore.Migration.Base.html#line-156" class="link">Source</a> <a href="#t:MigrationScript" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MigrationScript:Wrapped:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Migration-Base.html">Lorentz.UStore.Migration.Base</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Lorentz-Coercions.html#t:Unwrapped" title="Lorentz.Coercions">Unwrapped</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore) :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Unwrapped" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:_Wrapped-39-">_Wrapped'</a> :: <a href="../lens-4.17.1/Control-Lens-Type.html#t:Iso-39-" title="Control.Lens.Type">Iso'</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore) (<a href="Lorentz-Coercions.html#t:Unwrapped" title="Lorentz.Coercions">Unwrapped</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore)) <a href="#v:_Wrapped-39-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MigrationScript:TypeHasDoc:5"></span> (<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> oldStore, <a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> newStore) =&gt; <a href="Lorentz-Doc.html#t:TypeHasDoc" title="Lorentz.Doc">TypeHasDoc</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore)</span> <a href="src/Lorentz.UStore.Migration.Base.html#line-158" class="link">Source</a> <a href="#t:MigrationScript" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MigrationScript:TypeHasDoc:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Migration-Base.html">Lorentz.UStore.Migration.Base</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:typeDocName">typeDocName</a> :: <a href="Lorentz-Prelude.html#t:Proxy" title="Lorentz.Prelude">Proxy</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore) -&gt; <a href="Lorentz-Prelude.html#t:Text" title="Lorentz.Prelude">Text</a> <a href="#v:typeDocName" class="selflink">#</a></p><p class="src"><a href="#v:typeDocMdDescription">typeDocMdDescription</a> :: <a href="Lorentz-Doc.html#t:Markdown" title="Lorentz.Doc">Markdown</a> <a href="#v:typeDocMdDescription" class="selflink">#</a></p><p class="src"><a href="#v:typeDocMdReference">typeDocMdReference</a> :: <a href="Lorentz-Prelude.html#t:Proxy" title="Lorentz.Prelude">Proxy</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore) -&gt; <a href="../morley-1.0.0/Michelson-Typed-Haskell-Doc.html#t:WithinParens" title="Michelson.Typed.Haskell.Doc">WithinParens</a> -&gt; <a href="Lorentz-Doc.html#t:Markdown" title="Lorentz.Doc">Markdown</a> <a href="#v:typeDocMdReference" class="selflink">#</a></p><p class="src"><a href="#v:typeDocDependencies">typeDocDependencies</a> :: <a href="Lorentz-Prelude.html#t:Proxy" title="Lorentz.Prelude">Proxy</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore) -&gt; [<a href="Lorentz-Doc.html#t:SomeTypeWithDoc" title="Lorentz.Doc">SomeTypeWithDoc</a>] <a href="#v:typeDocDependencies" class="selflink">#</a></p><p class="src"><a href="#v:typeDocHaskellRep">typeDocHaskellRep</a> :: <a href="../morley-1.0.0/Michelson-Typed-Haskell-Doc.html#t:TypeDocHaskellRep" title="Michelson.Typed.Haskell.Doc">TypeDocHaskellRep</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore) <a href="#v:typeDocHaskellRep" class="selflink">#</a></p><p class="src"><a href="#v:typeDocMichelsonRep">typeDocMichelsonRep</a> :: <a href="../morley-1.0.0/Michelson-Typed-Haskell-Doc.html#t:TypeDocMichelsonRep" title="Michelson.Typed.Haskell.Doc">TypeDocMichelsonRep</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore) <a href="#v:typeDocMichelsonRep" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MigrationScript:IsoValue:6"></span> <a href="Lorentz-Value.html#t:IsoValue" title="Lorentz.Value">IsoValue</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore)</span> <a href="src/Lorentz.UStore.Migration.Base.html#line-154" class="link">Source</a> <a href="#t:MigrationScript" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MigrationScript:IsoValue:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Migration-Base.html">Lorentz.UStore.Migration.Base</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Lorentz-Value.html#t:ToT" title="Lorentz.Value">ToT</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore) :: <a href="../morley-1.0.0/Michelson-Typed-T.html#t:T" title="Michelson.Typed.T">T</a> <a href="#t:ToT" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toVal">toVal</a> :: <a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore -&gt; <a href="Lorentz-Value.html#t:Value" title="Lorentz.Value">Value</a> (<a href="Lorentz-Value.html#t:ToT" title="Lorentz.Value">ToT</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore)) <a href="#v:toVal" class="selflink">#</a></p><p class="src"><a href="#v:fromVal">fromVal</a> :: <a href="Lorentz-Value.html#t:Value" title="Lorentz.Value">Value</a> (<a href="Lorentz-Value.html#t:ToT" title="Lorentz.Value">ToT</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore)) -&gt; <a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore <a href="#v:fromVal" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MigrationScript:HasTypeAnn:7"></span> <a href="Lorentz-TypeAnns.html#t:HasTypeAnn" title="Lorentz.TypeAnns">HasTypeAnn</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore)</span> <a href="src/Lorentz.UStore.Migration.Base.html#line-154" class="link">Source</a> <a href="#t:MigrationScript" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MigrationScript:HasTypeAnn:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Migration-Base.html">Lorentz.UStore.Migration.Base</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getTypeAnn">getTypeAnn</a> :: <a href="../morley-1.0.0/Michelson-Typed-Annotation.html#t:Notes" title="Michelson.Typed.Annotation">Notes</a> (<a href="Lorentz-Value.html#t:ToT" title="Lorentz.Value">ToT</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore)) <a href="src/Lorentz.TypeAnns.html#getTypeAnn" class="link">Source</a> <a href="#v:getTypeAnn" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MigrationScript:Rep:8"></span> <span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore)</span> <a href="src/Lorentz.UStore.Migration.Base.html#line-153" class="link">Source</a> <a href="#t:MigrationScript" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MigrationScript:Rep:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Migration-Base.html">Lorentz.UStore.Migration.Base</a></p> <div class="src"><span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore) = <a href="../base-4.12.0.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;MigrationScript&quot; &quot;Lorentz.UStore.Migration.Base&quot; &quot;lorentz-0.1.0-34InOYPWuH88380O5o3fdq&quot; <a href="Lorentz-Value.html#v:True" title="Lorentz.Value">True</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;MigrationScript&quot; <a href="../base-4.12.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> <a href="Lorentz-Value.html#v:True" title="Lorentz.Value">True</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="Lorentz-Prelude.html#v:Just" title="Lorentz.Prelude">Just</a> &quot;unMigrationScript&quot;) <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> (<a href="Lorentz-Base.html#t:Lambda" title="Lorentz.Base">Lambda</a> <a href="Lorentz-UStore-Migration-Base.html#t:UStore_" title="Lorentz.UStore.Migration.Base">UStore_</a> <a href="Lorentz-UStore-Migration-Base.html#t:UStore_" title="Lorentz.UStore.Migration.Base">UStore_</a>))))</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MigrationScript:Unwrapped:9"></span> <span class="keyword">type</span> <a href="Lorentz-Coercions.html#t:Unwrapped" title="Lorentz.Coercions">Unwrapped</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore)</span> <a href="src/Lorentz.UStore.Migration.Base.html#line-156" class="link">Source</a> <a href="#t:MigrationScript" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MigrationScript:Unwrapped:9"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Migration-Base.html">Lorentz.UStore.Migration.Base</a></p> <div class="src"><span class="keyword">type</span> <a href="Lorentz-Coercions.html#t:Unwrapped" title="Lorentz.Coercions">Unwrapped</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore) = GUnwrapped (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore))</div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MigrationScript:ToT:10"></span> <span class="keyword">type</span> <a href="Lorentz-Value.html#t:ToT" title="Lorentz.Value">ToT</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore)</span> <a href="src/Lorentz.UStore.Migration.Base.html#line-154" class="link">Source</a> <a href="#t:MigrationScript" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MigrationScript:ToT:10"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Lorentz-UStore-Migration-Base.html">Lorentz.UStore.Migration.Base</a></p> <div class="src"><span class="keyword">type</span> <a href="Lorentz-Value.html#t:ToT" title="Lorentz.Value">ToT</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore) = <a href="../morley-1.0.0/Michelson-Typed-Haskell-Value.html#t:GValueType" title="Michelson.Typed.Haskell.Value">GValueType</a> (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> oldStore newStore))</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MigrationScript_" class="def">MigrationScript_</a> = <a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> <a href="Lorentz-UStore-Migration-Base.html#t:SomeUTemplate" title="Lorentz.UStore.Migration.Base">SomeUTemplate</a> <a href="Lorentz-UStore-Migration-Base.html#t:SomeUTemplate" title="Lorentz.UStore.Migration.Base">SomeUTemplate</a> <a href="src/Lorentz.UStore.Migration.Base.html#MigrationScript_" class="link">Source</a> <a href="#t:MigrationScript_" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:UStoreMigration" class="def">UStoreMigration</a> (oldTempl :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (newTempl :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) <a href="src/Lorentz.UStore.Migration.Base.html#UStoreMigration" class="link">Source</a> <a href="#t:UStoreMigration" class="selflink">#</a></p><div class="doc"><p>Keeps information about migration between <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code>s with two given
 templates.</p></div></div><div class="top"><p class="src"><a id="v:migrationToScript" class="def">migrationToScript</a> :: <a href="Lorentz-UStore.html#t:UStoreMigration" title="Lorentz.UStore">UStoreMigration</a> os ns -&gt; <a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> os ns <a href="src/Lorentz.UStore.Migration.Base.html#migrationToScript" class="link">Source</a> <a href="#v:migrationToScript" class="selflink">#</a></p><div class="doc"><p>Get migration script in case of simple (non-batched) migration.</p></div></div><div class="top"><p class="src"><a id="v:migrationToScriptI" class="def">migrationToScriptI</a> :: <a href="Lorentz-UStore.html#t:UStoreMigration" title="Lorentz.UStore">UStoreMigration</a> os ns -&gt; <a href="../base-4.12.0.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> (<a href="Lorentz-UStore.html#t:MigrationScript" title="Lorentz.UStore">MigrationScript</a> os ns) <a href="src/Lorentz.UStore.Migration.Base.html#migrationToScriptI" class="link">Source</a> <a href="#v:migrationToScriptI" class="selflink">#</a></p><div class="doc"><p>Get migration script in case of simple (non-batched) migration.</p></div></div><div class="top"><p class="src"><a id="v:migrationToLambda" class="def">migrationToLambda</a> :: <a href="Lorentz-UStore.html#t:UStoreMigration" title="Lorentz.UStore">UStoreMigration</a> oldTemplate newTemplate -&gt; <a href="Lorentz-Base.html#t:Lambda" title="Lorentz.Base">Lambda</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> oldTemplate) (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> newTemplate) <a href="src/Lorentz.UStore.Migration.Base.html#migrationToLambda" class="link">Source</a> <a href="#v:migrationToLambda" class="selflink">#</a></p><div class="doc"><p>Turn <code>Migration</code> into a whole piece of code for transforming storage.</p><p>This is not want you'd want to use for contract deployment because of
 gas and operation size limits that Tezos applies to transactions.</p></div></div><div class="top"><p class="src"><a id="v:mkUStoreMigration" class="def">mkUStoreMigration</a> :: <a href="Lorentz-Base.html#t:Lambda" title="Lorentz.Base">Lambda</a> (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl (<a href="Lorentz-UStore-Migration-Diff.html#t:BuildDiff" title="Lorentz.UStore.Migration.Diff">BuildDiff</a> oldTempl newTempl) '[]) (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl '[] _1) -&gt; <a href="Lorentz-UStore.html#t:UStoreMigration" title="Lorentz.UStore">UStoreMigration</a> oldTempl newTempl <a href="src/Lorentz.UStore.Migration.Base.html#mkUStoreMigration" class="link">Source</a> <a href="#v:mkUStoreMigration" class="selflink">#</a></p><div class="doc"><p>Safe way to create migration scripts for <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code>.</p><p>You have to supply a code which would transform <code><a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a></code>,
 coverring required diff step-by-step.
 All basic instructions work, also use <code>migrate*</code> functions
 from this module to operate with <code><a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a></code>.</p><p>This method produces a whole migration, it cannot be splitted in batches.
 In case if your migration is too big to be applied within a single
 transaction, use <code><a href="Lorentz-UStore-Migration-Base.html#v:mkUStoreBatchedMigration" title="Lorentz.UStore.Migration.Base">mkUStoreBatchedMigration</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mustoreToOld" class="def">mustoreToOld</a> :: RequireBeInitial touched =&gt; (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTemplate newTemplate remDiff touched ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a> oldTemplate ': s) <a href="src/Lorentz.UStore.Migration.Blocks.html#mustoreToOld" class="link">Source</a> <a href="#v:mustoreToOld" class="selflink">#</a></p><div class="doc"><p>Get the old version of storage.</p><p>This can be applied only in the beginning of migration.</p><p>In fact this function is not very useful, all required operations should
 be available for <code><a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a></code>, but leaving it here just in case.</p></div></div><div class="top"><p class="src"><a id="v:migrateGetField" class="def">migrateGetField</a> :: <span class="keyword">forall</span> field oldTempl newTempl diff touched fieldTy s. (<a href="Lorentz-UStore.html#t:HasUField" title="Lorentz.UStore">HasUField</a> field fieldTy oldTempl, RequireUntouched field (field <a href="../morley-1.0.0/Util-Type.html#t:IsElem" title="Util.Type">`IsElem`</a> touched)) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> field -&gt; (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl diff touched ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (fieldTy ': (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl diff touched ': s)) <a href="src/Lorentz.UStore.Migration.Blocks.html#migrateGetField" class="link">Source</a> <a href="#v:migrateGetField" class="selflink">#</a></p><div class="doc"><p>Get a field present in old version of <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:migrateAddField" class="def">migrateAddField</a> :: <span class="keyword">forall</span> field oldTempl newTempl diff touched fieldTy newDiff marker s. ('(<a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> marker fieldTy, newDiff) ~ <a href="Lorentz-UStore-Migration-Diff.html#t:CoverDiff" title="Lorentz.UStore.Migration.Diff">CoverDiff</a> <a href="Lorentz-UStore-Migration-Diff.html#v:DcAdd" title="Lorentz.UStore.Migration.Diff">DcAdd</a> field diff, <a href="Lorentz-UStore.html#t:HasUField" title="Lorentz.UStore">HasUField</a> field fieldTy newTempl) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> field -&gt; (fieldTy ': (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl diff touched ': s)) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl newDiff (field ': touched) ': s) <a href="src/Lorentz.UStore.Migration.Blocks.html#migrateAddField" class="link">Source</a> <a href="#v:migrateAddField" class="selflink">#</a></p><div class="doc"><p>Add a field which was not present before.
 This covers one addition from the diff and any removals of field with given
 name.</p><p>This function cannot overwrite existing field with the same name, if this
 is necessary use <code><a href="Lorentz-UStore.html#v:migrateOverwriteField" title="Lorentz.UStore">migrateOverwriteField</a></code> which would declare removal
 explicitly.</p></div></div><div class="top"><p class="src"><a id="v:migrateRemoveField" class="def">migrateRemoveField</a> :: <span class="keyword">forall</span> field oldTempl newTempl diff touched fieldTy newDiff marker s. ('(<a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> marker fieldTy, newDiff) ~ <a href="Lorentz-UStore-Migration-Diff.html#t:CoverDiff" title="Lorentz.UStore.Migration.Diff">CoverDiff</a> <a href="Lorentz-UStore-Migration-Diff.html#v:DcRemove" title="Lorentz.UStore.Migration.Diff">DcRemove</a> field diff, <a href="Lorentz-UStore.html#t:HasUField" title="Lorentz.UStore">HasUField</a> field fieldTy oldTempl) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> field -&gt; (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl diff touched ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl newDiff (field ': touched) ': s) <a href="src/Lorentz.UStore.Migration.Blocks.html#migrateRemoveField" class="link">Source</a> <a href="#v:migrateRemoveField" class="selflink">#</a></p><div class="doc"><p>Remove a field which should not be present in new version of storage.
 This covers one removal from the diff.</p><p>In fact, this action could be performed automatically, but since
 removal is a destructive operation, being explicit about it seems
 like a good thing.</p></div></div><div class="top"><p class="src"><a id="v:migrateExtractField" class="def">migrateExtractField</a> :: <span class="keyword">forall</span> field oldTempl newTempl diff touched fieldTy newDiff marker s. ('(<a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> marker fieldTy, newDiff) ~ <a href="Lorentz-UStore-Migration-Diff.html#t:CoverDiff" title="Lorentz.UStore.Migration.Diff">CoverDiff</a> <a href="Lorentz-UStore-Migration-Diff.html#v:DcRemove" title="Lorentz.UStore.Migration.Diff">DcRemove</a> field diff, <a href="Lorentz-UStore.html#t:HasUField" title="Lorentz.UStore">HasUField</a> field fieldTy oldTempl, RequireUntouched field (field <a href="../morley-1.0.0/Util-Type.html#t:IsElem" title="Util.Type">`IsElem`</a> touched)) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> field -&gt; (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl diff touched ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (fieldTy ': (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl newDiff (field ': touched) ': s)) <a href="src/Lorentz.UStore.Migration.Blocks.html#migrateExtractField" class="link">Source</a> <a href="#v:migrateExtractField" class="selflink">#</a></p><div class="doc"><p>Get and remove a field from old version of <code><a href="Lorentz-UStore.html#t:UStore" title="Lorentz.UStore">UStore</a></code>.</p><p>You probably want to use this more often than plain <code><a href="Lorentz-UStore.html#v:migrateRemoveField" title="Lorentz.UStore">migrateRemoveField</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:migrateOverwriteField" class="def">migrateOverwriteField</a> :: <span class="keyword">forall</span> field oldTempl newTempl diff touched fieldTy oldFieldTy marker oldMarker newDiff newDiff0 s. ('(<a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> oldMarker oldFieldTy, newDiff0) ~ <a href="Lorentz-UStore-Migration-Diff.html#t:CoverDiff" title="Lorentz.UStore.Migration.Diff">CoverDiff</a> <a href="Lorentz-UStore-Migration-Diff.html#v:DcRemove" title="Lorentz.UStore.Migration.Diff">DcRemove</a> field diff, '(<a href="Lorentz-UStore.html#t:UStoreFieldExt" title="Lorentz.UStore">UStoreFieldExt</a> marker fieldTy, newDiff) ~ <a href="Lorentz-UStore-Migration-Diff.html#t:CoverDiff" title="Lorentz.UStore.Migration.Diff">CoverDiff</a> <a href="Lorentz-UStore-Migration-Diff.html#v:DcAdd" title="Lorentz.UStore.Migration.Diff">DcAdd</a> field newDiff0, <a href="Lorentz-UStore.html#t:HasUField" title="Lorentz.UStore">HasUField</a> field fieldTy newTempl) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> field -&gt; (fieldTy ': (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl diff touched ': s)) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl newDiff (field ': touched) ': s) <a href="src/Lorentz.UStore.Migration.Blocks.html#migrateOverwriteField" class="link">Source</a> <a href="#v:migrateOverwriteField" class="selflink">#</a></p><div class="doc"><p>Remove field and write new one in place of it.</p><p>This is semantically equivalent to
 <code>dip (migrateRemoveField label) &gt;&gt; migrateAddField label</code>,
 but is cheaper.</p></div></div><div class="top"><p class="src"><a id="v:migrateModifyField" class="def">migrateModifyField</a> :: <span class="keyword">forall</span> field oldTempl newTempl diff touched fieldTy s. (<a href="Lorentz-UStore.html#t:HasUField" title="Lorentz.UStore">HasUField</a> field fieldTy oldTempl, <a href="Lorentz-UStore.html#t:HasUField" title="Lorentz.UStore">HasUField</a> field fieldTy newTempl) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> field -&gt; (fieldTy ': (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl diff touched ': s)) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore-Migration-Base.html#t:MUStore" title="Lorentz.UStore.Migration.Base">MUStore</a> oldTempl newTempl diff touched ': s) <a href="src/Lorentz.UStore.Migration.Blocks.html#migrateModifyField" class="link">Source</a> <a href="#v:migrateModifyField" class="selflink">#</a></p><div class="doc"><p>Modify field which should stay in new version of storage.
 This does not affect remaining diff.</p></div></div><a href="#g:8" id="g:8"><h1>Extras</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:PickMarkedFields" class="def">PickMarkedFields</a> marker template = GPickMarkedFields marker (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> template) <a href="src/Lorentz.UStore.Types.html#PickMarkedFields" class="link">Source</a> <a href="#t:PickMarkedFields" class="selflink">#</a></p><div class="doc"><p>Collect all fields with the given marker.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>