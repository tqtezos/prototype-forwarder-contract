<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Indigo.Compilation</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Indigo.Compilation.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">indigo-0.1.0.0: Convenient imperative eDSL over Lorentz.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Indigo.Compilation</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contains everything related to compilation from Indigo to Lorentz,
 including plain Indigo code, as well as Indigo contracts.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:compileIndigo">compileIndigo</a> :: <span class="keyword">forall</span> n inp out a. (<a href="../morley-1.0.0/Michelson-Typed-Scope.html#t:SingI" title="Michelson.Typed.Scope">SingI</a> (<a href="../morley-1.0.0/Util-Peano.html#t:ToPeano" title="Util.Peano">ToPeano</a> n), <a href="Indigo-Lorentz.html#t:Default" title="Indigo.Lorentz">Default</a> (<a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> inp), AreIndigoParams (<a href="../morley-1.0.0/Util-Peano.html#t:ToPeano" title="Util.Peano">ToPeano</a> n) inp, <a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> a) =&gt; IndigoWithParams (<a href="../morley-1.0.0/Util-Peano.html#t:ToPeano" title="Util.Peano">ToPeano</a> n) inp out a -&gt; inp <a href="Indigo-Lorentz.html#t::-45--62-" title="Indigo.Lorentz">:-&gt;</a> out</li><li class="src short"><span class="keyword">type</span> <a href="#t:IndigoContract">IndigoContract</a> param st = <a href="Indigo-Compilation.html#t:IndigoContract-39-" title="Indigo.Compilation">IndigoContract'</a> param st '[param, st, <a href="Indigo-Compilation.html#t:Ops" title="Indigo.Compilation">Ops</a>]</li><li class="src short"><span class="keyword">type</span> <a href="#t:IndigoContract-39-">IndigoContract'</a> param st out = (<a href="Indigo-Compilation.html#t:HasStorage" title="Indigo.Compilation">HasStorage</a> st, <a href="Indigo-Compilation.html#t:HasSideEffects" title="Indigo.Compilation">HasSideEffects</a>) =&gt; <a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> param -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> '[param, st, <a href="Indigo-Compilation.html#t:Ops" title="Indigo.Compilation">Ops</a>] out ()</li><li class="src short"><a href="#v:compileIndigoContract">compileIndigoContract</a> :: <span class="keyword">forall</span> param st out. (<a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> param, <a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> st) =&gt; <a href="Indigo-Compilation.html#t:IndigoContract-39-" title="Indigo.Compilation">IndigoContract'</a> param st out -&gt; <a href="Indigo-Lorentz.html#t:ContractCode" title="Indigo.Lorentz">ContractCode</a> param st</li><li class="src short"><span class="keyword">type</span> <a href="#t:Ops">Ops</a> = [<a href="Indigo-Lorentz.html#t:Operation" title="Indigo.Lorentz">Operation</a>]</li><li class="src short"><span class="keyword">type</span> <a href="#t:HasSideEffects">HasSideEffects</a> = <a href="../reflection-2.1.5/Data-Reflection.html#t:Given" title="Data.Reflection">Given</a> (<a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> <a href="Indigo-Compilation.html#t:Ops" title="Indigo.Compilation">Ops</a>)</li><li class="src short"><a href="#v:operationsVar">operationsVar</a> :: <a href="Indigo-Compilation.html#t:HasSideEffects" title="Indigo.Compilation">HasSideEffects</a> =&gt; <a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> <a href="Indigo-Compilation.html#t:Ops" title="Indigo.Compilation">Ops</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:HasStorage">HasStorage</a> st = <a href="../reflection-2.1.5/Data-Reflection.html#t:Given" title="Data.Reflection">Given</a> (<a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> st)</li><li class="src short"><a href="#v:storageVar">storageVar</a> :: <a href="Indigo-Compilation.html#t:HasStorage" title="Indigo.Compilation">HasStorage</a> st =&gt; <a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> st</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:compileIndigo" class="def">compileIndigo</a> :: <span class="keyword">forall</span> n inp out a. (<a href="../morley-1.0.0/Michelson-Typed-Scope.html#t:SingI" title="Michelson.Typed.Scope">SingI</a> (<a href="../morley-1.0.0/Util-Peano.html#t:ToPeano" title="Util.Peano">ToPeano</a> n), <a href="Indigo-Lorentz.html#t:Default" title="Indigo.Lorentz">Default</a> (<a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> inp), AreIndigoParams (<a href="../morley-1.0.0/Util-Peano.html#t:ToPeano" title="Util.Peano">ToPeano</a> n) inp, <a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> a) =&gt; IndigoWithParams (<a href="../morley-1.0.0/Util-Peano.html#t:ToPeano" title="Util.Peano">ToPeano</a> n) inp out a -&gt; inp <a href="Indigo-Lorentz.html#t::-45--62-" title="Indigo.Lorentz">:-&gt;</a> out <a href="src/Indigo.Compilation.html#compileIndigo" class="link">Source</a> <a href="#v:compileIndigo" class="selflink">#</a></p><div class="doc"><p>Compile Indigo code to Lorentz.</p><p>Note: it is necessary to specify the number of parameters (using the first
 type variable) of the Indigo function. Also, these should be on the top of
 the input stack in inverse order (see <code>IndigoWithParams</code>).</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:IndigoContract" class="def">IndigoContract</a> param st = <a href="Indigo-Compilation.html#t:IndigoContract-39-" title="Indigo.Compilation">IndigoContract'</a> param st '[param, st, <a href="Indigo-Compilation.html#t:Ops" title="Indigo.Compilation">Ops</a>] <a href="src/Indigo.Compilation.html#IndigoContract" class="link">Source</a> <a href="#t:IndigoContract" class="selflink">#</a></p><div class="doc"><p>A utility type for a contract written in Indigo.</p><p>Note that is a more restrictive type than what is needed for compilation with
 <code><a href="Indigo-Compilation.html#v:compileIndigoContract" title="Indigo.Compilation">compileIndigoContract</a></code> and it's mainly intended to hide arbitrary outputs and
 be similar to Lorentz's <code><a href="Indigo-Lorentz.html#t:ContractCode" title="Indigo.Lorentz">ContractCode</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:IndigoContract-39-" class="def">IndigoContract'</a> param st out = (<a href="Indigo-Compilation.html#t:HasStorage" title="Indigo.Compilation">HasStorage</a> st, <a href="Indigo-Compilation.html#t:HasSideEffects" title="Indigo.Compilation">HasSideEffects</a>) =&gt; <a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> param -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> '[param, st, <a href="Indigo-Compilation.html#t:Ops" title="Indigo.Compilation">Ops</a>] out () <a href="src/Indigo.Compilation.html#IndigoContract%27" class="link">Source</a> <a href="#t:IndigoContract-39-" class="selflink">#</a></p><div class="doc"><p>Type of a contract that can be compiled to Lorentz with <code><a href="Indigo-Compilation.html#v:compileIndigoContract" title="Indigo.Compilation">compileIndigoContract</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:compileIndigoContract" class="def">compileIndigoContract</a> :: <span class="keyword">forall</span> param st out. (<a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> param, <a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> st) =&gt; <a href="Indigo-Compilation.html#t:IndigoContract-39-" title="Indigo.Compilation">IndigoContract'</a> param st out -&gt; <a href="Indigo-Lorentz.html#t:ContractCode" title="Indigo.Lorentz">ContractCode</a> param st <a href="src/Indigo.Compilation.html#compileIndigoContract" class="link">Source</a> <a href="#v:compileIndigoContract" class="selflink">#</a></p><div class="doc"><p>Compile Indigo code to Lorentz contract.
 Drop elements from the stack to return only [Operation] and Storage.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Ops" class="def">Ops</a> = [<a href="Indigo-Lorentz.html#t:Operation" title="Indigo.Lorentz">Operation</a>] <a href="src/Indigo.Compilation.html#Ops" class="link">Source</a> <a href="#t:Ops" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:HasSideEffects" class="def">HasSideEffects</a> = <a href="../reflection-2.1.5/Data-Reflection.html#t:Given" title="Data.Reflection">Given</a> (<a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> <a href="Indigo-Compilation.html#t:Ops" title="Indigo.Compilation">Ops</a>) <a href="src/Indigo.Compilation.html#HasSideEffects" class="link">Source</a> <a href="#t:HasSideEffects" class="selflink">#</a></p><div class="doc"><p>Allows to get a variable with operations</p></div></div><div class="top"><p class="src"><a id="v:operationsVar" class="def">operationsVar</a> :: <a href="Indigo-Compilation.html#t:HasSideEffects" title="Indigo.Compilation">HasSideEffects</a> =&gt; <a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> <a href="Indigo-Compilation.html#t:Ops" title="Indigo.Compilation">Ops</a> <a href="src/Indigo.Compilation.html#operationsVar" class="link">Source</a> <a href="#v:operationsVar" class="selflink">#</a></p><div class="doc"><p>Return a variable which refers to a stack cell with operations</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:HasStorage" class="def">HasStorage</a> st = <a href="../reflection-2.1.5/Data-Reflection.html#t:Given" title="Data.Reflection">Given</a> (<a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> st) <a href="src/Indigo.Compilation.html#HasStorage" class="link">Source</a> <a href="#t:HasStorage" class="selflink">#</a></p><div class="doc"><p>Allows to get a variable with storage</p></div></div><div class="top"><p class="src"><a id="v:storageVar" class="def">storageVar</a> :: <a href="Indigo-Compilation.html#t:HasStorage" title="Indigo.Compilation">HasStorage</a> st =&gt; <a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> st <a href="src/Indigo.Compilation.html#storageVar" class="link">Source</a> <a href="#v:storageVar" class="selflink">#</a></p><div class="doc"><p>Return a variable which refers to a stack cell with storage</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>