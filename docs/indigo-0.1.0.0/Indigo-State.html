<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Indigo.State</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Indigo.State.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">indigo-0.1.0.0: Convenient imperative eDSL over Lorentz.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Indigo.State</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contains core of Indigo language:
IndigoM monad, datatype to represent its state and variables.
It also includes some convenient functions to work with state in IndigoM,
to provide rebindable syntax.</p><p>IndigoM monad implements functionality of a symbolic interpreter.
During its execution Lorentz code is being generated.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">newtype</span> <a href="#t:IndigoM">IndigoM</a> inp out a = <a href="#v:IndigoM">IndigoM</a> {<ul class="subs"><li><a href="#v:runIndigoM">runIndigoM</a> :: <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> inp -&gt; <a href="Indigo-State.html#t:GenCode" title="Indigo.State">GenCode</a> inp out a</li></ul>}</li><li class="src short"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out a -&gt; (a -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> out out1 b) -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out1 b</li><li class="src short"><a href="#v:-61--60--60-">(=&lt;&lt;)</a> :: (a -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> out out1 b) -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out a -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out1 b</li><li class="src short"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out a -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> out out1 b -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out1 b</li><li class="src short"><a href="#v:-60--36--62-">(&lt;$&gt;)</a> :: <a href="Indigo-Prelude.html#t:Functor" title="Indigo.Prelude">Functor</a> f =&gt; (a -&gt; b) -&gt; f a -&gt; f b</li><li class="src short"><a href="#v:return">return</a> :: a -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp inp a</li><li class="src short"><a href="#v:iget">iget</a> :: <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp inp (<a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> inp)</li><li class="src short"><a href="#v:iput">iput</a> :: <a href="Indigo-State.html#t:GenCode" title="Indigo.State">GenCode</a> inp out a -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out a</li><li class="src short"><span class="keyword">type</span> <a href="#t:TypeValue">TypeValue</a> a = (<a href="Indigo-Prelude.html#t:Typeable" title="Indigo.Prelude">Typeable</a> a, <a href="Indigo-Prelude.html#t:Typeable" title="Indigo.Prelude">Typeable</a> (<a href="Indigo-Lorentz.html#t:ToT" title="Indigo.Lorentz">ToT</a> a))</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Var">Var</a> a = <a href="#v:Var">Var</a> <a href="Indigo-Prelude.html#t:Word" title="Indigo.Prelude">Word</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:StkEl">StkEl</a> a<ul class="subs"><li>= <a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> a =&gt; <a href="#v:NoRef">NoRef</a></li><li>| <a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> a =&gt; <a href="#v:Ref">Ref</a> (<a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> a)</li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:StackVars">StackVars</a> (stk :: [<a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>]) = <a href="Indigo-Lorentz.html#t:Rec" title="Indigo.Lorentz">Rec</a> <a href="Indigo-State.html#t:StkEl" title="Indigo.State">StkEl</a> stk</li><li class="src short"><span class="keyword">data</span> <a href="#t:GenCode">GenCode</a> inp out a = <a href="#v:GenCode">GenCode</a> {<ul class="subs"><li><a href="#v:gcOut">gcOut</a> :: ~a</li><li><a href="#v:gcMeta">gcMeta</a> :: ~(<a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> out)</li><li><a href="#v:gcCode">gcCode</a> :: inp <a href="Indigo-Lorentz.html#t::-45--62-" title="Indigo.Lorentz">:-&gt;</a> out</li><li><a href="#v:gcClear">gcClear</a> :: out <a href="Indigo-Lorentz.html#t::-45--62-" title="Indigo.Lorentz">:-&gt;</a> inp</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:MetaData">MetaData</a> stk = <a href="#v:MetaData">MetaData</a> {<ul class="subs"><li><a href="#v:mdStack">mdStack</a> :: <a href="Indigo-State.html#t:StackVars" title="Indigo.State">StackVars</a> stk</li><li><a href="#v:mdRefCount">mdRefCount</a> :: <a href="Indigo-Prelude.html#t:Word" title="Indigo.Prelude">Word</a></li></ul>}</li><li class="src short"><a href="#v:makeTopVar">makeTopVar</a> :: <a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> x =&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> (x <a href="Indigo-Lorentz.html#t:-38-" title="Indigo.Lorentz">&amp;</a> inp) (x <a href="Indigo-Lorentz.html#t:-38-" title="Indigo.Lorentz">&amp;</a> inp) (<a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> x)</li><li class="src short"><a href="#v:pushRefMd">pushRefMd</a> :: <a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> x =&gt; <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> stk -&gt; (<a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> x, <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> (x <a href="Indigo-Lorentz.html#t:-38-" title="Indigo.Lorentz">&amp;</a> stk))</li><li class="src short"><a href="#v:pushNoRefMd">pushNoRefMd</a> :: <a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> a =&gt; <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> inp -&gt; <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> (a <a href="Indigo-Lorentz.html#t:-38-" title="Indigo.Lorentz">&amp;</a> inp)</li><li class="src short"><a href="#v:popNoRefMd">popNoRefMd</a> :: <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> (a <a href="Indigo-Lorentz.html#t:-38-" title="Indigo.Lorentz">&amp;</a> inp) -&gt; <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> inp</li><li class="src short"><a href="#v:withVarAt">withVarAt</a> :: (<a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> a, a ~ <a href="../morley-1.0.0/Util-Peano.html#t:At" title="Util.Peano">At</a> n inp, <a href="../morley-1.0.0/Util-Peano.html#t:RequireLongerThan" title="Util.Peano">RequireLongerThan</a> inp n) =&gt; <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> inp -&gt; <a href="../morley-1.0.0/Michelson-Typed-Sing.html#t:Sing" title="Michelson.Typed.Sing">Sing</a> n -&gt; (<a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> inp, <a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> a)</li><li class="src short"><a href="#v:cleanGenCode">cleanGenCode</a> :: <a href="Indigo-State.html#t:GenCode" title="Indigo.State">GenCode</a> inp out a -&gt; inp <a href="Indigo-Lorentz.html#t::-45--62-" title="Indigo.Lorentz">:-&gt;</a> inp</li><li class="src short"><span class="keyword">type</span> <a href="#t:DefaultStack">DefaultStack</a> stk = <a href="Indigo-Lorentz.html#t:Default" title="Indigo.Lorentz">Default</a> (<a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> stk)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:IndigoM" class="def">IndigoM</a> inp out a <a href="src/Indigo.State.html#IndigoM" class="link">Source</a> <a href="#t:IndigoM" class="selflink">#</a></p><div class="doc"><p>IndigoM monad. It's basically
 <a href="https://hackage.haskell.org/package/category-extras-0.53.5/docs/Control-Monad-Indexed-State.html">https://hackage.haskell.org/package/category-extras-0.53.5/docs/Control-Monad-Indexed-State.html</a>
 however, this package is not in the used lts and it doesn't compile.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:IndigoM" class="def">IndigoM</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:runIndigoM" class="def">runIndigoM</a> :: <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> inp -&gt; <a href="Indigo-State.html#t:GenCode" title="Indigo.State">GenCode</a> inp out a</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:IndigoM" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:IndigoM:Functor:1"></span> <a href="Indigo-Prelude.html#t:Functor" title="Indigo.Prelude">Functor</a> (<a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out)</span> <a href="src/Indigo.State.html#line-63" class="link">Source</a> <a href="#t:IndigoM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:IndigoM:Functor:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Indigo-State.html">Indigo.State</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out a -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out b -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:-62--62--61-" class="def">(&gt;&gt;=)</a> :: <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out a -&gt; (a -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> out out1 b) -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out1 b <a href="src/Indigo.State.html#%3E%3E%3D" class="link">Source</a> <a href="#v:-62--62--61-" class="selflink">#</a></p><div class="doc"><p>Bind for rebindable syntax.
 It's basically like bind for State monad but also compose
 generated code from _m a_ and _a -&gt; m b_.</p></div></div><div class="top"><p class="src"><a id="v:-61--60--60-" class="def">(=&lt;&lt;)</a> :: (a -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> out out1 b) -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out a -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out1 b <a href="src/Indigo.State.html#%3D%3C%3C" class="link">Source</a> <a href="#v:-61--60--60-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:-62--62-" class="def">(&gt;&gt;)</a> :: <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out a -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> out out1 b -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out1 b <a href="src/Indigo.State.html#%3E%3E" class="link">Source</a> <a href="#v:-62--62-" class="selflink">#</a></p><div class="doc"><p>Then for rebindable syntax.</p></div></div><div class="top"><p class="src"><a id="v:-60--36--62-" class="def">(&lt;$&gt;)</a> :: <a href="Indigo-Prelude.html#t:Functor" title="Indigo.Prelude">Functor</a> f =&gt; (a -&gt; b) -&gt; f a -&gt; f b <span class="fixity">infixl 4</span><span class="rightedge"></span> <a href="#v:-60--36--62-" class="selflink">#</a></p><div class="doc"><p>An infix synonym for <code><a href="Indigo-Prelude.html#v:fmap" title="Indigo.Prelude">fmap</a></code>.</p><p>The name of this operator is an allusion to <code>$</code>.
 Note the similarities between their types:</p><pre> ($)  ::              (a -&gt; b) -&gt;   a -&gt;   b
(&lt;$&gt;) :: Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b</pre><p>Whereas <code>$</code> is function application, <code><a href="Indigo-State.html#v:-60--36--62-" title="Indigo.State">&lt;$&gt;</a></code> is function
 application lifted over a <code><a href="Indigo-Prelude.html#t:Functor" title="Indigo.Prelude">Functor</a></code>.</p><h4 class="caption details-toggle-control details-toggle" data-details-id="ch:-60--36--62-0">Examples</h4><details id="ch:-60--36--62-0"><summary class="hide-when-js-enabled">Expand</summary><p>Convert from a <code><code>Maybe</code> <code>Int</code></code> to a <code><code>Maybe</code> <code>String</code></code> using <code>show</code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>show &lt;$&gt; Nothing
</code></strong>Nothing
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>show &lt;$&gt; Just 3
</code></strong>Just &quot;3&quot;
</pre><p>Convert from an <code><code>Either</code> <code>Int</code> <code>Int</code></code> to an <code><code>Either</code> <code>Int</code></code>
 <code>String</code> using <code>show</code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>show &lt;$&gt; Left 17
</code></strong>Left 17
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>show &lt;$&gt; Right 17
</code></strong>Right &quot;17&quot;
</pre><p>Double each element of a list:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(*2) &lt;$&gt; [1,2,3]
</code></strong>[2,4,6]
</pre><p>Apply <code>even</code> to the second element of a pair:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>even &lt;$&gt; (2,2)
</code></strong>(2,True)
</pre></details></div></div><div class="top"><p class="src"><a id="v:return" class="def">return</a> :: a -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp inp a <a href="src/Indigo.State.html#return" class="link">Source</a> <a href="#v:return" class="selflink">#</a></p><div class="doc"><p>Return for rebindable syntax.</p></div></div><div class="top"><p class="src"><a id="v:iget" class="def">iget</a> :: <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp inp (<a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> inp) <a href="src/Indigo.State.html#iget" class="link">Source</a> <a href="#v:iget" class="selflink">#</a></p><div class="doc"><p>Get current MetaData.</p></div></div><div class="top"><p class="src"><a id="v:iput" class="def">iput</a> :: <a href="Indigo-State.html#t:GenCode" title="Indigo.State">GenCode</a> inp out a -&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> inp out a <a href="src/Indigo.State.html#iput" class="link">Source</a> <a href="#v:iput" class="selflink">#</a></p><div class="doc"><p>Put new GenCode.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:TypeValue" class="def">TypeValue</a> a = (<a href="Indigo-Prelude.html#t:Typeable" title="Indigo.Prelude">Typeable</a> a, <a href="Indigo-Prelude.html#t:Typeable" title="Indigo.Prelude">Typeable</a> (<a href="Indigo-Lorentz.html#t:ToT" title="Indigo.Lorentz">ToT</a> a)) <a href="src/Indigo.State.html#TypeValue" class="link">Source</a> <a href="#t:TypeValue" class="selflink">#</a></p><div class="doc"><p>Constraint for <code><a href="Indigo-State.html#t:StkEl" title="Indigo.State">StkEl</a></code>, required for comparison in constraint checking</p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Var" class="def">Var</a> a <a href="src/Indigo.State.html#Var" class="link">Source</a> <a href="#t:Var" class="selflink">#</a></p><div class="doc"><p>Variable whcih is exposed to a user.
 It stores number of variable, its phantom type
 represent type of a variable.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Var" class="def">Var</a> <a href="Indigo-Prelude.html#t:Word" title="Indigo.Prelude">Word</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:StkEl" class="def">StkEl</a> a <a href="src/Indigo.State.html#StkEl" class="link">Source</a> <a href="#t:StkEl" class="selflink">#</a></p><div class="doc"><p>Stack element of symbolic interpreter.
 It holds either a variable which refers to this element
 or just NoRef which indicates that there are no references
 to this element.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> a =&gt; <a id="v:NoRef" class="def">NoRef</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> a =&gt; <a id="v:Ref" class="def">Ref</a> (<a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:StkEl" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:StkEl:TestEquality:1"></span> <a href="../base-4.12.0.0/Data-Type-Equality.html#t:TestEquality" title="Data.Type.Equality">TestEquality</a> <a href="Indigo-State.html#t:StkEl" title="Indigo.State">StkEl</a></span> <a href="src/Indigo.State.html#line-113" class="link">Source</a> <a href="#t:StkEl" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:StkEl:TestEquality:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Indigo-State.html">Indigo.State</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:testEquality">testEquality</a> :: <a href="Indigo-State.html#t:StkEl" title="Indigo.State">StkEl</a> a -&gt; <a href="Indigo-State.html#t:StkEl" title="Indigo.State">StkEl</a> b -&gt; <a href="Indigo-Lorentz.html#t:Maybe" title="Indigo.Lorentz">Maybe</a> (a <a href="../base-4.12.0.0/Data-Type-Equality.html#t::-126-:" title="Data.Type.Equality">:~:</a> b) <a href="#v:testEquality" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:StackVars" class="def">StackVars</a> (stk :: [<a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>]) = <a href="Indigo-Lorentz.html#t:Rec" title="Indigo.Lorentz">Rec</a> <a href="Indigo-State.html#t:StkEl" title="Indigo.State">StkEl</a> stk <a href="src/Indigo.State.html#StackVars" class="link">Source</a> <a href="#t:StackVars" class="selflink">#</a></p><div class="doc"><p>Stack of symbolic interpreter.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:GenCode" class="def">GenCode</a> inp out a <a href="src/Indigo.State.html#GenCode" class="link">Source</a> <a href="#t:GenCode" class="selflink">#</a></p><div class="doc"><p>Resulting state of IndigoM.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:GenCode" class="def">GenCode</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:gcOut" class="def">gcOut</a> :: ~a</dfn><div class="doc"><p>Interpreter output value</p></div></li><li><dfn class="src"><a id="v:gcMeta" class="def">gcMeta</a> :: ~(<a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> out)</dfn><div class="doc"><p>Interpreter meta data.</p></div></li><li><dfn class="src"><a id="v:gcCode" class="def">gcCode</a> :: inp <a href="Indigo-Lorentz.html#t::-45--62-" title="Indigo.Lorentz">:-&gt;</a> out</dfn><div class="doc"><p>Generated Lorentz code.</p></div></li><li><dfn class="src"><a id="v:gcClear" class="def">gcClear</a> :: out <a href="Indigo-Lorentz.html#t::-45--62-" title="Indigo.Lorentz">:-&gt;</a> inp</dfn><div class="doc"><p>Clearing Lorentz code.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:GenCode" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:GenCode:Functor:1"></span> <a href="Indigo-Prelude.html#t:Functor" title="Indigo.Prelude">Functor</a> (<a href="Indigo-State.html#t:GenCode" title="Indigo.State">GenCode</a> inp out)</span> <a href="src/Indigo.State.html#line-140" class="link">Source</a> <a href="#t:GenCode" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:GenCode:Functor:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Indigo-State.html">Indigo.State</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Indigo-State.html#t:GenCode" title="Indigo.State">GenCode</a> inp out a -&gt; <a href="Indigo-State.html#t:GenCode" title="Indigo.State">GenCode</a> inp out b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Indigo-State.html#t:GenCode" title="Indigo.State">GenCode</a> inp out b -&gt; <a href="Indigo-State.html#t:GenCode" title="Indigo.State">GenCode</a> inp out a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MetaData" class="def">MetaData</a> stk <a href="src/Indigo.State.html#MetaData" class="link">Source</a> <a href="#t:MetaData" class="selflink">#</a></p><div class="doc"><p>Initial state of IndigoM.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MetaData" class="def">MetaData</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:mdStack" class="def">mdStack</a> :: <a href="Indigo-State.html#t:StackVars" title="Indigo.State">StackVars</a> stk</dfn><div class="doc"><p>Stack of symbolic interpreter.</p></div></li><li><dfn class="src"><a id="v:mdRefCount" class="def">mdRefCount</a> :: <a href="Indigo-Prelude.html#t:Word" title="Indigo.Prelude">Word</a></dfn><div class="doc"><p>Number of allocated variables.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:MetaData" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MetaData:Default:1"></span> (<a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> x, <a href="Indigo-Lorentz.html#t:Default" title="Indigo.Lorentz">Default</a> (<a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> xs)) =&gt; <a href="Indigo-Lorentz.html#t:Default" title="Indigo.Lorentz">Default</a> (<a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> (x ': xs))</span> <a href="src/Indigo.State.html#line-192" class="link">Source</a> <a href="#t:MetaData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MetaData:Default:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Indigo-State.html">Indigo.State</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:def">def</a> :: <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> (x ': xs) <a href="#v:def" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MetaData:Default:2"></span> <a href="Indigo-Lorentz.html#t:Default" title="Indigo.Lorentz">Default</a> (<a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> ([] :: [<a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>]))</span> <a href="src/Indigo.State.html#line-189" class="link">Source</a> <a href="#t:MetaData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MetaData:Default:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Indigo-State.html">Indigo.State</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:def">def</a> :: <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> [] <a href="#v:def" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:makeTopVar" class="def">makeTopVar</a> :: <a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> x =&gt; <a href="Indigo-State.html#t:IndigoM" title="Indigo.State">IndigoM</a> (x <a href="Indigo-Lorentz.html#t:-38-" title="Indigo.Lorentz">&amp;</a> inp) (x <a href="Indigo-Lorentz.html#t:-38-" title="Indigo.Lorentz">&amp;</a> inp) (<a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> x) <a href="src/Indigo.State.html#makeTopVar" class="link">Source</a> <a href="#v:makeTopVar" class="selflink">#</a></p><div class="doc"><p>Create a variable which references to the top of a stack.</p></div></div><div class="top"><p class="src"><a id="v:pushRefMd" class="def">pushRefMd</a> :: <a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> x =&gt; <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> stk -&gt; (<a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> x, <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> (x <a href="Indigo-Lorentz.html#t:-38-" title="Indigo.Lorentz">&amp;</a> stk)) <a href="src/Indigo.State.html#pushRefMd" class="link">Source</a> <a href="#v:pushRefMd" class="selflink">#</a></p><div class="doc"><p>Push a new stack element with reference to it.
 Return a variable which references to the just added element.</p></div></div><div class="top"><p class="src"><a id="v:pushNoRefMd" class="def">pushNoRefMd</a> :: <a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> a =&gt; <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> inp -&gt; <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> (a <a href="Indigo-Lorentz.html#t:-38-" title="Indigo.Lorentz">&amp;</a> inp) <a href="src/Indigo.State.html#pushNoRefMd" class="link">Source</a> <a href="#v:pushNoRefMd" class="selflink">#</a></p><div class="doc"><p>Push a new stack element without reference to it.</p></div></div><div class="top"><p class="src"><a id="v:popNoRefMd" class="def">popNoRefMd</a> :: <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> (a <a href="Indigo-Lorentz.html#t:-38-" title="Indigo.Lorentz">&amp;</a> inp) -&gt; <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> inp <a href="src/Indigo.State.html#popNoRefMd" class="link">Source</a> <a href="#v:popNoRefMd" class="selflink">#</a></p><div class="doc"><p>Remove top element of the stack.
 It's supposed that no variables refer to the top of the stack.</p></div></div><div class="top"><p class="src"><a id="v:withVarAt" class="def">withVarAt</a> :: (<a href="Indigo-State.html#t:TypeValue" title="Indigo.State">TypeValue</a> a, a ~ <a href="../morley-1.0.0/Util-Peano.html#t:At" title="Util.Peano">At</a> n inp, <a href="../morley-1.0.0/Util-Peano.html#t:RequireLongerThan" title="Util.Peano">RequireLongerThan</a> inp n) =&gt; <a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> inp -&gt; <a href="../morley-1.0.0/Michelson-Typed-Sing.html#t:Sing" title="Michelson.Typed.Sing">Sing</a> n -&gt; (<a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> inp, <a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a> a) <a href="src/Indigo.State.html#withVarAt" class="link">Source</a> <a href="#v:withVarAt" class="selflink">#</a></p><div class="doc"><p>Given a <code><a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a></code> and a <code><a href="../morley-1.0.0/Util-Peano.html#t:Peano" title="Util.Peano">Peano</a></code> singleton for a depth, it puts a new <code><a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a></code>
 at that depth (0-indexed) and returns it with the updated <code><a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a></code>.
 If there is a <code><a href="Indigo-State.html#t:Var" title="Indigo.State">Var</a></code> there already it is used and the <code><a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a></code> not changed.</p></div></div><div class="top"><p class="src"><a id="v:cleanGenCode" class="def">cleanGenCode</a> :: <a href="Indigo-State.html#t:GenCode" title="Indigo.State">GenCode</a> inp out a -&gt; inp <a href="Indigo-Lorentz.html#t::-45--62-" title="Indigo.Lorentz">:-&gt;</a> inp <a href="src/Indigo.State.html#cleanGenCode" class="link">Source</a> <a href="#v:cleanGenCode" class="selflink">#</a></p><div class="doc"><p>Produces the generated Lorentz code that cleans after itself, leaving the
 same stack as the input one</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DefaultStack" class="def">DefaultStack</a> stk = <a href="Indigo-Lorentz.html#t:Default" title="Indigo.Lorentz">Default</a> (<a href="Indigo-State.html#t:MetaData" title="Indigo.State">MetaData</a> stk) <a href="src/Indigo.State.html#DefaultStack" class="link">Source</a> <a href="#t:DefaultStack" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>