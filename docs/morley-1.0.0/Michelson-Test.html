<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Michelson.Test</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Michelson.Test.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">morley-1.0.0: Developer tools for the Michelson Language</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Michelson.Test</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Importing a contract</a></li><li><a href="#g:2">Unit testing</a></li><li><a href="#g:3">Integrational testing</a><ul><li><a href="#g:4">Testing engine</a></li><li><a href="#g:5">Validators</a></li><li><a href="#g:6">Various</a></li></ul></li><li><a href="#g:7">General utilities</a></li><li><a href="#g:8">Autodoc testing</a></li><li><a href="#g:9">Dummy values</a></li><li><a href="#g:10">Arbitrary data</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Module containing some utilities for testing Michelson contracts using
 Haskell testing frameworks (hspec and QuickCheck in particular).
 It's Morley testing EDSL.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:specWithContract">specWithContract</a> :: (<a href="../morley-prelude-0.3.0/Prelude.html#t:Each" title="Prelude">Each</a> [<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a>, <a href="Michelson-Typed-Scope.html#t:SingI" title="Michelson.Typed.Scope">SingI</a>] [cp, st], <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>) =&gt; <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; ((<a href="Michelson-Untyped-Aliases.html#t:Contract" title="Michelson.Untyped.Aliases">Contract</a>, <a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st) -&gt; <a href="../hspec-2.7.1/Test-Hspec-Discover.html#t:Spec" title="Test.Hspec.Discover">Spec</a>) -&gt; <a href="../hspec-2.7.1/Test-Hspec-Discover.html#t:Spec" title="Test.Hspec.Discover">Spec</a></li><li class="src short"><a href="#v:specWithTypedContract">specWithTypedContract</a> :: (<a href="../morley-prelude-0.3.0/Prelude.html#t:Each" title="Prelude">Each</a> [<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a>, <a href="Michelson-Typed-Scope.html#t:SingI" title="Michelson.Typed.Scope">SingI</a>] [cp, st], <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>) =&gt; <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; (<a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st -&gt; <a href="../hspec-2.7.1/Test-Hspec-Discover.html#t:Spec" title="Test.Hspec.Discover">Spec</a>) -&gt; <a href="../hspec-2.7.1/Test-Hspec-Discover.html#t:Spec" title="Test.Hspec.Discover">Spec</a></li><li class="src short"><a href="#v:specWithUntypedContract">specWithUntypedContract</a> :: <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; (<a href="Michelson-Untyped-Aliases.html#t:Contract" title="Michelson.Untyped.Aliases">Contract</a> -&gt; <a href="../hspec-2.7.1/Test-Hspec-Discover.html#t:Spec" title="Test.Hspec.Discover">Spec</a>) -&gt; <a href="../hspec-2.7.1/Test-Hspec-Discover.html#t:Spec" title="Test.Hspec.Discover">Spec</a></li><li class="src short"><a href="#v:testTreesWithContract">testTreesWithContract</a> :: (<a href="../morley-prelude-0.3.0/Prelude.html#t:Each" title="Prelude">Each</a> [<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a>, <a href="Michelson-Typed-Scope.html#t:SingI" title="Michelson.Typed.Scope">SingI</a>] [cp, st], <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>) =&gt; <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; ((<a href="Michelson-Untyped-Aliases.html#t:Contract" title="Michelson.Untyped.Aliases">Contract</a>, <a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st) -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>]) -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>]</li><li class="src short"><a href="#v:testTreesWithUntypedContract">testTreesWithUntypedContract</a> :: <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; (<a href="Michelson-Untyped-Aliases.html#t:Contract" title="Michelson.Untyped.Aliases">Contract</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>]) -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>]</li><li class="src short"><a href="#v:testTreesWithTypedContract">testTreesWithTypedContract</a> :: (<a href="../morley-prelude-0.3.0/Prelude.html#t:Each" title="Prelude">Each</a> [<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a>, <a href="Michelson-Typed-Scope.html#t:SingI" title="Michelson.Typed.Scope">SingI</a>] [cp, st], <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>) =&gt; <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; (<a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>]) -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>]</li><li class="src short"><a href="#v:concatTestTrees">concatTestTrees</a> :: [<a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>]] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>]</li><li class="src short"><a href="#v:importContract">importContract</a> :: <span class="keyword">forall</span> cp st. <a href="../morley-prelude-0.3.0/Prelude.html#t:Each" title="Prelude">Each</a> [<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a>, <a href="Michelson-Typed-Scope.html#t:SingI" title="Michelson.Typed.Scope">SingI</a>] [cp, st] =&gt; <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Michelson-Untyped-Aliases.html#t:Contract" title="Michelson.Untyped.Aliases">Contract</a>, <a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st)</li><li class="src short"><a href="#v:importUntypedContract">importUntypedContract</a> :: <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Michelson-Untyped-Aliases.html#t:Contract" title="Michelson.Untyped.Aliases">Contract</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:ContractReturn">ContractReturn</a> st = (<a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Michelson-Interpret.html#t:MichelsonFailed" title="Michelson.Interpret">MichelsonFailed</a> ([<a href="Michelson-Typed-Aliases.html#t:Operation" title="Michelson.Typed.Aliases">Operation</a>], <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> st), <a href="Michelson-Interpret.html#t:InterpreterState" title="Michelson.Interpret">InterpreterState</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:ContractPropValidator">ContractPropValidator</a> st prop = <a href="Michelson-Test.html#t:ContractReturn" title="Michelson.Test">ContractReturn</a> st -&gt; prop</li><li class="src short"><a href="#v:contractProp">contractProp</a> :: (<a href="Michelson-Typed-Haskell-Value.html#t:IsoValue" title="Michelson.Typed.Haskell.Value">IsoValue</a> param, <a href="Michelson-Typed-Haskell-Value.html#t:IsoValue" title="Michelson.Typed.Haskell.Value">IsoValue</a> storage, <a href="Michelson-Typed-Haskell-Value.html#t:ToT" title="Michelson.Typed.Haskell.Value">ToT</a> param ~ cp, <a href="Michelson-Typed-Haskell-Value.html#t:ToT" title="Michelson.Typed.Haskell.Value">ToT</a> storage ~ st, <a href="Michelson-Typed-Scope.html#t:ParameterScope" title="Michelson.Typed.Scope">ParameterScope</a> cp) =&gt; <a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st -&gt; <a href="Michelson-Test.html#t:ContractPropValidator" title="Michelson.Test">ContractPropValidator</a> st prop -&gt; <a href="Michelson-Interpret.html#t:ContractEnv" title="Michelson.Interpret">ContractEnv</a> -&gt; param -&gt; storage -&gt; prop</li><li class="src short"><a href="#v:contractPropVal">contractPropVal</a> :: <a href="Michelson-Typed-Scope.html#t:ParameterScope" title="Michelson.Typed.Scope">ParameterScope</a> cp =&gt; <a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st -&gt; <a href="Michelson-Test.html#t:ContractPropValidator" title="Michelson.Test">ContractPropValidator</a> st prop -&gt; <a href="Michelson-Interpret.html#t:ContractEnv" title="Michelson.Interpret">ContractEnv</a> -&gt; <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> cp -&gt; <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> st -&gt; prop</li><li class="src short"><a href="#v:validateSuccess">validateSuccess</a> :: <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; <a href="Michelson-Test.html#t:ContractPropValidator" title="Michelson.Test">ContractPropValidator</a> st <a href="../hspec-expectations-0.8.2/Test-Hspec-Expectations.html#t:Expectation" title="Test.Hspec.Expectations">Expectation</a></li><li class="src short"><a href="#v:validateStorageIs">validateStorageIs</a> :: <a href="Michelson-Typed-Haskell-Value.html#t:IsoValue" title="Michelson.Typed.Haskell.Value">IsoValue</a> st =&gt; st -&gt; <a href="Michelson-Test.html#t:ContractPropValidator" title="Michelson.Test">ContractPropValidator</a> (<a href="Michelson-Typed-Haskell-Value.html#t:ToT" title="Michelson.Typed.Haskell.Value">ToT</a> st) <a href="../HUnit-1.6.0.0/Test-HUnit-Lang.html#t:Assertion" title="Test.HUnit.Lang">Assertion</a></li><li class="src short"><a href="#v:validateMichelsonFailsWith">validateMichelsonFailsWith</a> :: (<a href="Michelson-Typed-Haskell-Value.html#t:IsoValue" title="Michelson.Typed.Haskell.Value">IsoValue</a> v, <a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> (<a href="Michelson-Typed-Haskell-Value.html#t:ToT" title="Michelson.Typed.Haskell.Value">ToT</a> v), <a href="Michelson-Typed-Scope.html#t:SingI" title="Michelson.Typed.Scope">SingI</a> (<a href="Michelson-Typed-Haskell-Value.html#t:ToT" title="Michelson.Typed.Haskell.Value">ToT</a> v)) =&gt; v -&gt; <a href="Michelson-Test.html#t:ContractPropValidator" title="Michelson.Test">ContractPropValidator</a> st <a href="../hspec-expectations-0.8.2/Test-Hspec-Expectations.html#t:Expectation" title="Test.Hspec.Expectations">Expectation</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:IntegrationalValidator">IntegrationalValidator</a> = <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> (<a href="Michelson-Runtime.html#t:ExecutorError" title="Michelson.Runtime">ExecutorError</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:SuccessValidator">SuccessValidator</a> = InternalState -&gt; <a href="Michelson-Runtime-GState.html#t:GState" title="Michelson.Runtime.GState">GState</a> -&gt; [<a href="Michelson-Runtime-GState.html#t:GStateUpdate" title="Michelson.Runtime.GState">GStateUpdate</a>] -&gt; <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:IntegrationalScenario">IntegrationalScenario</a> = <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> Validated</li><li class="src short"><span class="keyword">type</span> <a href="#t:IntegrationalScenarioM">IntegrationalScenarioM</a> = <a href="../morley-prelude-0.3.0/Prelude.html#t:StateT" title="Prelude">StateT</a> InternalState (<a href="../mtl-2.2.2/Control-Monad-Except.html#t:Except" title="Control.Monad.Except">Except</a> ScenarioError)</li><li class="src short"><a href="#v:integrationalTestExpectation">integrationalTestExpectation</a> :: <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; <a href="Michelson-Test.html#t:IntegrationalScenario" title="Michelson.Test">IntegrationalScenario</a> -&gt; <a href="../hspec-expectations-0.8.2/Test-Hspec-Expectations.html#t:Expectation" title="Test.Hspec.Expectations">Expectation</a></li><li class="src short"><a href="#v:integrationalTestProperty">integrationalTestProperty</a> :: <a href="Michelson-Test.html#t:IntegrationalScenario" title="Michelson.Test">IntegrationalScenario</a> -&gt; <a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a></li><li class="src short"><a href="#v:originate">originate</a> :: <a href="Michelson-Untyped-Aliases.html#t:Contract" title="Michelson.Untyped.Aliases">Contract</a> -&gt; <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a> -&gt; <a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></li><li class="src short"><a href="#v:tOriginate">tOriginate</a> :: (<a href="Michelson-Typed-Scope.html#t:ParameterScope" title="Michelson.Typed.Scope">ParameterScope</a> cp, <a href="Michelson-Typed-Scope.html#t:StorageScope" title="Michelson.Typed.Scope">StorageScope</a> st) =&gt; <a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st -&gt; <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a> -&gt; <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> st -&gt; <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></li><li class="src short"><a href="#v:transfer">transfer</a> :: <a href="Michelson-Test.html#t:TxData" title="Michelson.Test">TxData</a> -&gt; <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> ()</li><li class="src short"><a href="#v:tTransfer">tTransfer</a> :: <span class="keyword">forall</span> arg. <a href="Michelson-Typed-Scope.html#t:ParameterScope" title="Michelson.Typed.Scope">ParameterScope</a> arg =&gt; (&quot;from&quot; <a href="Util-Named.html#t::-33-" title="Util.Named">:!</a> <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a>) -&gt; (&quot;to&quot; <a href="Util-Named.html#t::-33-" title="Util.Named">:!</a> <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a>) -&gt; <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a> -&gt; <a href="Michelson-Untyped-EntryPoints.html#t:EpName" title="Michelson.Untyped.EntryPoints">EpName</a> -&gt; <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> arg -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> ()</li><li class="src short"><a href="#v:validate">validate</a> :: <a href="Michelson-Test.html#t:IntegrationalValidator" title="Michelson.Test">IntegrationalValidator</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenario" title="Michelson.Test">IntegrationalScenario</a></li><li class="src short"><a href="#v:integrationalFail">integrationalFail</a> :: <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> anything</li><li class="src short"><a href="#v:setMaxSteps">setMaxSteps</a> :: <a href="Michelson-Interpret.html#t:RemainingSteps" title="Michelson.Interpret">RemainingSteps</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> ()</li><li class="src short"><a href="#v:setNow">setNow</a> :: <a href="Tezos-Core.html#t:Timestamp" title="Tezos.Core">Timestamp</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> ()</li><li class="src short"><a href="#v:rewindTime">rewindTime</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> ()</li><li class="src short"><a href="#v:withSender">withSender</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> a -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> a</li><li class="src short"><a href="#v:setChainId">setChainId</a> :: <a href="Tezos-Core.html#t:ChainId" title="Tezos.Core">ChainId</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> ()</li><li class="src short"><a href="#v:branchout">branchout</a> :: <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; [(<a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a>, <a href="Michelson-Test.html#t:IntegrationalScenario" title="Michelson.Test">IntegrationalScenario</a>)] -&gt; <a href="Michelson-Test.html#t:IntegrationalScenario" title="Michelson.Test">IntegrationalScenario</a></li><li class="src short"><a href="#v:-63--45-">(?-)</a> :: <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a> -&gt; a -&gt; (<a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a>, a)</li><li class="src short"><a href="#v:composeValidators">composeValidators</a> :: <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a> -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a> -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a></li><li class="src short"><a href="#v:composeValidatorsList">composeValidatorsList</a> :: [<a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a>] -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a></li><li class="src short"><a href="#v:expectAnySuccess">expectAnySuccess</a> :: <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a></li><li class="src short"><a href="#v:expectNoUpdates">expectNoUpdates</a> :: <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a></li><li class="src short"><a href="#v:expectNoStorageUpdates">expectNoStorageUpdates</a> :: <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a></li><li class="src short"><a href="#v:expectStorageUpdate">expectStorageUpdate</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; (<a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> ()) -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a></li><li class="src short"><a href="#v:expectStorageUpdateConst">expectStorageUpdateConst</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a></li><li class="src short"><a href="#v:expectBalance">expectBalance</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a> -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a></li><li class="src short"><a href="#v:expectStorage">expectStorage</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; (<a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> ()) -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a></li><li class="src short"><a href="#v:expectStorageConst">expectStorageConst</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a></li><li class="src short"><a href="#v:tExpectStorageConst">tExpectStorageConst</a> :: <span class="keyword">forall</span> st. <a href="Michelson-Typed-Scope.html#t:StorageScope" title="Michelson.Typed.Scope">StorageScope</a> st =&gt; <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> st -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a></li><li class="src short"><a href="#v:expectGasExhaustion">expectGasExhaustion</a> :: <a href="Michelson-Runtime.html#t:ExecutorError" title="Michelson.Runtime">ExecutorError</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:expectMichelsonFailed">expectMichelsonFailed</a> :: (<a href="Michelson-Interpret.html#t:MichelsonFailed" title="Michelson.Interpret">MichelsonFailed</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Runtime.html#t:ExecutorError" title="Michelson.Runtime">ExecutorError</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:TxData">TxData</a> = <a href="#v:TxData">TxData</a> {<ul class="subs"><li><a href="#v:tdSenderAddress">tdSenderAddress</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></li><li><a href="#v:tdParameter">tdParameter</a> :: <a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a></li><li><a href="#v:tdEntrypoint">tdEntrypoint</a> :: <a href="Michelson-Untyped-EntryPoints.html#t:EpName" title="Michelson.Untyped.EntryPoints">EpName</a></li><li><a href="#v:tdAmount">tdAmount</a> :: <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a></li></ul>}</li><li class="src short"><a href="#v:genesisAddress">genesisAddress</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></li><li class="src short"><a href="#v:failedProp">failedProp</a> :: <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a> -&gt; <a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a></li><li class="src short"><a href="#v:succeededProp">succeededProp</a> :: <a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a></li><li class="src short"><a href="#v:qcIsLeft">qcIsLeft</a> :: <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> b =&gt; <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a b -&gt; <a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a></li><li class="src short"><a href="#v:qcIsRight">qcIsRight</a> :: <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a =&gt; <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a b -&gt; <a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a></li><li class="src short"><a href="#v:runDocTests">runDocTests</a> :: <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; [<a href="Michelson-Doc-Test.html#t:DocTest" title="Michelson.Doc.Test">DocTest</a>] -&gt; <a href="Michelson-Doc.html#t:ContractDoc" title="Michelson.Doc">ContractDoc</a> -&gt; [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>]</li><li class="src short"><a href="#v:testDocBasic">testDocBasic</a> :: [<a href="Michelson-Doc-Test.html#t:DocTest" title="Michelson.Doc.Test">DocTest</a>]</li><li class="src short"><a href="#v:excludeDocTests">excludeDocTests</a> :: [<a href="Michelson-Doc-Test.html#t:DocTest" title="Michelson.Doc.Test">DocTest</a>] -&gt; [<a href="Michelson-Doc-Test.html#t:DocTest" title="Michelson.Doc.Test">DocTest</a>] -&gt; [<a href="Michelson-Doc-Test.html#t:DocTest" title="Michelson.Doc.Test">DocTest</a>]</li><li class="src short"><a href="#v:dummyContractEnv">dummyContractEnv</a> :: <a href="Michelson-Interpret.html#t:ContractEnv" title="Michelson.Interpret">ContractEnv</a></li><li class="src short"><a href="#v:minTimestamp">minTimestamp</a> :: <a href="Tezos-Core.html#t:Timestamp" title="Tezos.Core">Timestamp</a></li><li class="src short"><a href="#v:maxTimestamp">maxTimestamp</a> :: <a href="Tezos-Core.html#t:Timestamp" title="Tezos.Core">Timestamp</a></li><li class="src short"><a href="#v:midTimestamp">midTimestamp</a> :: <a href="Tezos-Core.html#t:Timestamp" title="Tezos.Core">Timestamp</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Importing a contract</h1></a><div class="top"><p class="src"><a id="v:specWithContract" class="def">specWithContract</a> :: (<a href="../morley-prelude-0.3.0/Prelude.html#t:Each" title="Prelude">Each</a> [<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a>, <a href="Michelson-Typed-Scope.html#t:SingI" title="Michelson.Typed.Scope">SingI</a>] [cp, st], <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>) =&gt; <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; ((<a href="Michelson-Untyped-Aliases.html#t:Contract" title="Michelson.Untyped.Aliases">Contract</a>, <a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st) -&gt; <a href="../hspec-2.7.1/Test-Hspec-Discover.html#t:Spec" title="Test.Hspec.Discover">Spec</a>) -&gt; <a href="../hspec-2.7.1/Test-Hspec-Discover.html#t:Spec" title="Test.Hspec.Discover">Spec</a> <a href="src/Michelson.Test.Import.html#specWithContract" class="link">Source</a> <a href="#v:specWithContract" class="selflink">#</a></p><div class="doc"><p>Import contract and use it in the spec. Both versions of contract are
 passed to the callback function (untyped and typed).</p><p>If contract's import fails, a spec with single failing expectation
 will be generated (so tests will likely run unexceptionally, but a failing
 result will notify about problem).</p></div></div><div class="top"><p class="src"><a id="v:specWithTypedContract" class="def">specWithTypedContract</a> :: (<a href="../morley-prelude-0.3.0/Prelude.html#t:Each" title="Prelude">Each</a> [<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a>, <a href="Michelson-Typed-Scope.html#t:SingI" title="Michelson.Typed.Scope">SingI</a>] [cp, st], <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>) =&gt; <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; (<a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st -&gt; <a href="../hspec-2.7.1/Test-Hspec-Discover.html#t:Spec" title="Test.Hspec.Discover">Spec</a>) -&gt; <a href="../hspec-2.7.1/Test-Hspec-Discover.html#t:Spec" title="Test.Hspec.Discover">Spec</a> <a href="src/Michelson.Test.Import.html#specWithTypedContract" class="link">Source</a> <a href="#v:specWithTypedContract" class="selflink">#</a></p><div class="doc"><p>A version of <code><a href="Michelson-Test.html#v:specWithContract" title="Michelson.Test">specWithContract</a></code> which passes only the typed
 representation of the contract.</p></div></div><div class="top"><p class="src"><a id="v:specWithUntypedContract" class="def">specWithUntypedContract</a> :: <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; (<a href="Michelson-Untyped-Aliases.html#t:Contract" title="Michelson.Untyped.Aliases">Contract</a> -&gt; <a href="../hspec-2.7.1/Test-Hspec-Discover.html#t:Spec" title="Test.Hspec.Discover">Spec</a>) -&gt; <a href="../hspec-2.7.1/Test-Hspec-Discover.html#t:Spec" title="Test.Hspec.Discover">Spec</a> <a href="src/Michelson.Test.Import.html#specWithUntypedContract" class="link">Source</a> <a href="#v:specWithUntypedContract" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:testTreesWithContract" class="def">testTreesWithContract</a> :: (<a href="../morley-prelude-0.3.0/Prelude.html#t:Each" title="Prelude">Each</a> [<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a>, <a href="Michelson-Typed-Scope.html#t:SingI" title="Michelson.Typed.Scope">SingI</a>] [cp, st], <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>) =&gt; <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; ((<a href="Michelson-Untyped-Aliases.html#t:Contract" title="Michelson.Untyped.Aliases">Contract</a>, <a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st) -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>]) -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>] <a href="src/Michelson.Test.Import.html#testTreesWithContract" class="link">Source</a> <a href="#v:testTreesWithContract" class="selflink">#</a></p><div class="doc"><p>Import contract and use to create test trees. Both versions of contract are
 passed to the callback function (untyped and typed).</p><p>If contract's import fails, a tree with single failing test will be generated
 (so test tree will likely be generated unexceptionally, but a failing
 result will notify about problem).</p></div></div><div class="top"><p class="src"><a id="v:testTreesWithUntypedContract" class="def">testTreesWithUntypedContract</a> :: <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; (<a href="Michelson-Untyped-Aliases.html#t:Contract" title="Michelson.Untyped.Aliases">Contract</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>]) -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>] <a href="src/Michelson.Test.Import.html#testTreesWithUntypedContract" class="link">Source</a> <a href="#v:testTreesWithUntypedContract" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Michelson-Test.html#v:testTreesWithContract" title="Michelson.Test">testTreesWithContract</a></code> but supplies only untyped contract.</p></div></div><div class="top"><p class="src"><a id="v:testTreesWithTypedContract" class="def">testTreesWithTypedContract</a> :: (<a href="../morley-prelude-0.3.0/Prelude.html#t:Each" title="Prelude">Each</a> [<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a>, <a href="Michelson-Typed-Scope.html#t:SingI" title="Michelson.Typed.Scope">SingI</a>] [cp, st], <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>) =&gt; <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; (<a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>]) -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>] <a href="src/Michelson.Test.Import.html#testTreesWithTypedContract" class="link">Source</a> <a href="#v:testTreesWithTypedContract" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Michelson-Test.html#v:testTreesWithContract" title="Michelson.Test">testTreesWithContract</a></code> but supplies only typed contract.</p></div></div><div class="top"><p class="src"><a id="v:concatTestTrees" class="def">concatTestTrees</a> :: [<a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>]] -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>] <a href="src/Michelson.Test.Import.html#concatTestTrees" class="link">Source</a> <a href="#v:concatTestTrees" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:importContract" class="def">importContract</a> :: <span class="keyword">forall</span> cp st. <a href="../morley-prelude-0.3.0/Prelude.html#t:Each" title="Prelude">Each</a> [<a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a>, <a href="Michelson-Typed-Scope.html#t:SingI" title="Michelson.Typed.Scope">SingI</a>] [cp, st] =&gt; <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Michelson-Untyped-Aliases.html#t:Contract" title="Michelson.Untyped.Aliases">Contract</a>, <a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st) <a href="src/Michelson.Test.Import.html#importContract" class="link">Source</a> <a href="#v:importContract" class="selflink">#</a></p><div class="doc"><p>Import contract from a given file path.</p><p>This function reads file, parses and type checks a contract.
 Within the typechecking we assume that no contracts are originated,
 otherwise a type checking error will be caused.</p><p>This function may throw <code><a href="../base-4.12.0.0/Control-Exception-Base.html#t:IOException" title="Control.Exception.Base">IOException</a></code> and <code><a href="Michelson-Test-Import.html#t:ImportContractError" title="Michelson.Test.Import">ImportContractError</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:importUntypedContract" class="def">importUntypedContract</a> :: <a href="../base-4.12.0.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Michelson-Untyped-Aliases.html#t:Contract" title="Michelson.Untyped.Aliases">Contract</a> <a href="src/Michelson.Test.Import.html#importUntypedContract" class="link">Source</a> <a href="#v:importUntypedContract" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h1>Unit testing</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ContractReturn" class="def">ContractReturn</a> st = (<a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Michelson-Interpret.html#t:MichelsonFailed" title="Michelson.Interpret">MichelsonFailed</a> ([<a href="Michelson-Typed-Aliases.html#t:Operation" title="Michelson.Typed.Aliases">Operation</a>], <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> st), <a href="Michelson-Interpret.html#t:InterpreterState" title="Michelson.Interpret">InterpreterState</a>) <a href="src/Michelson.Interpret.html#ContractReturn" class="link">Source</a> <a href="#t:ContractReturn" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ContractPropValidator" class="def">ContractPropValidator</a> st prop = <a href="Michelson-Test.html#t:ContractReturn" title="Michelson.Test">ContractReturn</a> st -&gt; prop <a href="src/Michelson.Test.Unit.html#ContractPropValidator" class="link">Source</a> <a href="#t:ContractPropValidator" class="selflink">#</a></p><div class="doc"><p>Type for contract execution validation.</p><p>It's a function which is supplied with contract execution output
 (failure or new storage with operation list).</p><p>Function returns a property which type is designated by type variable <code>prop</code>
 and might be <code><a href="../QuickCheck-2.13.2/Test-QuickCheck.html#v:Property" title="Test.QuickCheck">Property</a></code> or <code><a href="../hspec-2.7.1/Test-Hspec.html#v:Expectation" title="Test.Hspec">Expectation</a></code>
 or anything else relevant.</p></div></div><div class="top"><p class="src"><a id="v:contractProp" class="def">contractProp</a> :: (<a href="Michelson-Typed-Haskell-Value.html#t:IsoValue" title="Michelson.Typed.Haskell.Value">IsoValue</a> param, <a href="Michelson-Typed-Haskell-Value.html#t:IsoValue" title="Michelson.Typed.Haskell.Value">IsoValue</a> storage, <a href="Michelson-Typed-Haskell-Value.html#t:ToT" title="Michelson.Typed.Haskell.Value">ToT</a> param ~ cp, <a href="Michelson-Typed-Haskell-Value.html#t:ToT" title="Michelson.Typed.Haskell.Value">ToT</a> storage ~ st, <a href="Michelson-Typed-Scope.html#t:ParameterScope" title="Michelson.Typed.Scope">ParameterScope</a> cp) =&gt; <a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st -&gt; <a href="Michelson-Test.html#t:ContractPropValidator" title="Michelson.Test">ContractPropValidator</a> st prop -&gt; <a href="Michelson-Interpret.html#t:ContractEnv" title="Michelson.Interpret">ContractEnv</a> -&gt; param -&gt; storage -&gt; prop <a href="src/Michelson.Test.Unit.html#contractProp" class="link">Source</a> <a href="#v:contractProp" class="selflink">#</a></p><div class="doc"><p>ContractCode's property tester against given input.
 Takes contract environment, initial storage and parameter,
 interprets contract on this input and invokes validation function.</p></div></div><div class="top"><p class="src"><a id="v:contractPropVal" class="def">contractPropVal</a> :: <a href="Michelson-Typed-Scope.html#t:ParameterScope" title="Michelson.Typed.Scope">ParameterScope</a> cp =&gt; <a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st -&gt; <a href="Michelson-Test.html#t:ContractPropValidator" title="Michelson.Test">ContractPropValidator</a> st prop -&gt; <a href="Michelson-Interpret.html#t:ContractEnv" title="Michelson.Interpret">ContractEnv</a> -&gt; <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> cp -&gt; <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> st -&gt; prop <a href="src/Michelson.Test.Unit.html#contractPropVal" class="link">Source</a> <a href="#v:contractPropVal" class="selflink">#</a></p><div class="doc"><p>Version of <code><a href="Michelson-Test.html#v:contractProp" title="Michelson.Test">contractProp</a></code> which takes <code>Val</code> as arguments instead
 of regular Haskell values.</p><p>This function assumes that contract has no explicit default entrypoints
 and you always have to construct parameter manually; if you need to test
 contract calling specific entrypoints, use integrational testing defined
 by <a href="Michelson-Test-Integrational.html">Michelson.Test.Integrational</a> module.</p></div></div><div class="top"><p class="src"><a id="v:validateSuccess" class="def">validateSuccess</a> :: <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; <a href="Michelson-Test.html#t:ContractPropValidator" title="Michelson.Test">ContractPropValidator</a> st <a href="../hspec-expectations-0.8.2/Test-Hspec-Expectations.html#t:Expectation" title="Test.Hspec.Expectations">Expectation</a> <a href="src/Michelson.Test.Unit.html#validateSuccess" class="link">Source</a> <a href="#v:validateSuccess" class="selflink">#</a></p><div class="doc"><p><code><a href="Michelson-Test.html#t:ContractPropValidator" title="Michelson.Test">ContractPropValidator</a></code> that expects a successful termination.</p></div></div><div class="top"><p class="src"><a id="v:validateStorageIs" class="def">validateStorageIs</a> :: <a href="Michelson-Typed-Haskell-Value.html#t:IsoValue" title="Michelson.Typed.Haskell.Value">IsoValue</a> st =&gt; st -&gt; <a href="Michelson-Test.html#t:ContractPropValidator" title="Michelson.Test">ContractPropValidator</a> (<a href="Michelson-Typed-Haskell-Value.html#t:ToT" title="Michelson.Typed.Haskell.Value">ToT</a> st) <a href="../HUnit-1.6.0.0/Test-HUnit-Lang.html#t:Assertion" title="Test.HUnit.Lang">Assertion</a> <a href="src/Michelson.Test.Unit.html#validateStorageIs" class="link">Source</a> <a href="#v:validateStorageIs" class="selflink">#</a></p><div class="doc"><p><code><a href="Michelson-Test.html#t:ContractPropValidator" title="Michelson.Test">ContractPropValidator</a></code> that expects contract execution to
 succeed and update storage to a particular constant value.</p></div></div><div class="top"><p class="src"><a id="v:validateMichelsonFailsWith" class="def">validateMichelsonFailsWith</a> :: (<a href="Michelson-Typed-Haskell-Value.html#t:IsoValue" title="Michelson.Typed.Haskell.Value">IsoValue</a> v, <a href="../base-4.12.0.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> (<a href="Michelson-Typed-Haskell-Value.html#t:ToT" title="Michelson.Typed.Haskell.Value">ToT</a> v), <a href="Michelson-Typed-Scope.html#t:SingI" title="Michelson.Typed.Scope">SingI</a> (<a href="Michelson-Typed-Haskell-Value.html#t:ToT" title="Michelson.Typed.Haskell.Value">ToT</a> v)) =&gt; v -&gt; <a href="Michelson-Test.html#t:ContractPropValidator" title="Michelson.Test">ContractPropValidator</a> st <a href="../hspec-expectations-0.8.2/Test-Hspec-Expectations.html#t:Expectation" title="Test.Hspec.Expectations">Expectation</a> <a href="src/Michelson.Test.Unit.html#validateMichelsonFailsWith" class="link">Source</a> <a href="#v:validateMichelsonFailsWith" class="selflink">#</a></p><div class="doc"><p><code><a href="Michelson-Test.html#t:ContractPropValidator" title="Michelson.Test">ContractPropValidator</a></code> that expects a given failure.</p></div></div><a href="#g:3" id="g:3"><h1>Integrational testing</h1></a><a href="#g:4" id="g:4"><h2>Testing engine</h2></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:IntegrationalValidator" class="def">IntegrationalValidator</a> = <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> (<a href="Michelson-Runtime.html#t:ExecutorError" title="Michelson.Runtime">ExecutorError</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#IntegrationalValidator" class="link">Source</a> <a href="#t:IntegrationalValidator" class="selflink">#</a></p><div class="doc"><p>Validator for integrational testing.
 If an error is expected, it should be <code><a href="../base-4.12.0.0/Data-Either.html#v:Left" title="Data.Either">Left</a></code> with validator for errors.
 Otherwise it should check final global state and its updates.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:SuccessValidator" class="def">SuccessValidator</a> = InternalState -&gt; <a href="Michelson-Runtime-GState.html#t:GState" title="Michelson.Runtime.GState">GState</a> -&gt; [<a href="Michelson-Runtime-GState.html#t:GStateUpdate" title="Michelson.Runtime.GState">GStateUpdate</a>] -&gt; <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> () <a href="src/Michelson.Test.Integrational.html#SuccessValidator" class="link">Source</a> <a href="#t:SuccessValidator" class="selflink">#</a></p><div class="doc"><p>Validator for integrational testing that expects successful execution.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:IntegrationalScenario" class="def">IntegrationalScenario</a> = <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> Validated <a href="src/Michelson.Test.Integrational.html#IntegrationalScenario" class="link">Source</a> <a href="#t:IntegrationalScenario" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:IntegrationalScenarioM" class="def">IntegrationalScenarioM</a> = <a href="../morley-prelude-0.3.0/Prelude.html#t:StateT" title="Prelude">StateT</a> InternalState (<a href="../mtl-2.2.2/Control-Monad-Except.html#t:Except" title="Control.Monad.Except">Except</a> ScenarioError) <a href="src/Michelson.Test.Integrational.html#IntegrationalScenarioM" class="link">Source</a> <a href="#t:IntegrationalScenarioM" class="selflink">#</a></p><div class="doc"><p>A monad inside which integrational tests can be described using
 do-notation.</p></div></div><div class="top"><p class="src"><a id="v:integrationalTestExpectation" class="def">integrationalTestExpectation</a> :: <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; <a href="Michelson-Test.html#t:IntegrationalScenario" title="Michelson.Test">IntegrationalScenario</a> -&gt; <a href="../hspec-expectations-0.8.2/Test-Hspec-Expectations.html#t:Expectation" title="Test.Hspec.Expectations">Expectation</a> <a href="src/Michelson.Test.Integrational.html#integrationalTestExpectation" class="link">Source</a> <a href="#v:integrationalTestExpectation" class="selflink">#</a></p><div class="doc"><p>Integrational test that executes given operations and validates
 them using given validator. It can fail using <code><a href="../hspec-expectations-0.8.2/Test-Hspec-Expectations.html#t:Expectation" title="Test.Hspec.Expectations">Expectation</a></code>
 capability.
 It starts with <code><a href="Michelson-Runtime-GState.html#v:initGState" title="Michelson.Runtime.GState">initGState</a></code> and some reasonable dummy values for
 gas limit and current timestamp. You can update blockchain state
 by performing some operations.</p></div></div><div class="top"><p class="src"><a id="v:integrationalTestProperty" class="def">integrationalTestProperty</a> :: <a href="Michelson-Test.html#t:IntegrationalScenario" title="Michelson.Test">IntegrationalScenario</a> -&gt; <a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a> <a href="src/Michelson.Test.Integrational.html#integrationalTestProperty" class="link">Source</a> <a href="#v:integrationalTestProperty" class="selflink">#</a></p><div class="doc"><p>Integrational test similar to <code><a href="Michelson-Test.html#v:integrationalTestExpectation" title="Michelson.Test">integrationalTestExpectation</a></code>.
 It can fail using <code><a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a></code> capability.
 It can be used with QuickCheck's <code>forAll</code> to make a
 property-based test with arbitrary data.</p></div></div><div class="top"><p class="src"><a id="v:originate" class="def">originate</a> :: <a href="Michelson-Untyped-Aliases.html#t:Contract" title="Michelson.Untyped.Aliases">Contract</a> -&gt; <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a> -&gt; <a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> <a href="src/Michelson.Test.Integrational.html#originate" class="link">Source</a> <a href="#v:originate" class="selflink">#</a></p><div class="doc"><p>Originate a contract with given initial storage and balance. Its
 address is returned.</p></div></div><div class="top"><p class="src"><a id="v:tOriginate" class="def">tOriginate</a> :: (<a href="Michelson-Typed-Scope.html#t:ParameterScope" title="Michelson.Typed.Scope">ParameterScope</a> cp, <a href="Michelson-Typed-Scope.html#t:StorageScope" title="Michelson.Typed.Scope">StorageScope</a> st) =&gt; <a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st -&gt; <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a> -&gt; <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> st -&gt; <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> <a href="src/Michelson.Test.Integrational.html#tOriginate" class="link">Source</a> <a href="#v:tOriginate" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Michelson-Test.html#v:originate" title="Michelson.Test">originate</a></code>, but for typed contract and value.</p></div></div><div class="top"><p class="src"><a id="v:transfer" class="def">transfer</a> :: <a href="Michelson-Test.html#t:TxData" title="Michelson.Test">TxData</a> -&gt; <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> () <a href="src/Michelson.Test.Integrational.html#transfer" class="link">Source</a> <a href="#v:transfer" class="selflink">#</a></p><div class="doc"><p>Transfer tokens to a given address.</p></div></div><div class="top"><p class="src"><a id="v:tTransfer" class="def">tTransfer</a> :: <span class="keyword">forall</span> arg. <a href="Michelson-Typed-Scope.html#t:ParameterScope" title="Michelson.Typed.Scope">ParameterScope</a> arg =&gt; (&quot;from&quot; <a href="Util-Named.html#t::-33-" title="Util.Named">:!</a> <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a>) -&gt; (&quot;to&quot; <a href="Util-Named.html#t::-33-" title="Util.Named">:!</a> <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a>) -&gt; <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a> -&gt; <a href="Michelson-Untyped-EntryPoints.html#t:EpName" title="Michelson.Untyped.EntryPoints">EpName</a> -&gt; <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> arg -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> () <a href="src/Michelson.Test.Integrational.html#tTransfer" class="link">Source</a> <a href="#v:tTransfer" class="selflink">#</a></p><div class="doc"><p>Similar to <code><a href="Michelson-Test.html#v:transfer" title="Michelson.Test">transfer</a></code>, for typed values.
 Note that it works with untyped <code><a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></code> and does not check that
 entrypoint with given name is present and has the expected type.
 Passed value must correspond to the entrypoint argument type, not
 the parameter type of the contract (and must be unit for implicit
 accounts).</p></div></div><div class="top"><p class="src"><a id="v:validate" class="def">validate</a> :: <a href="Michelson-Test.html#t:IntegrationalValidator" title="Michelson.Test">IntegrationalValidator</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenario" title="Michelson.Test">IntegrationalScenario</a> <a href="src/Michelson.Test.Integrational.html#validate" class="link">Source</a> <a href="#v:validate" class="selflink">#</a></p><div class="doc"><p>Validate the execution result.</p></div></div><div class="top"><p class="src"><a id="v:integrationalFail" class="def">integrationalFail</a> :: <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> anything <a href="src/Michelson.Test.Integrational.html#integrationalFail" class="link">Source</a> <a href="#v:integrationalFail" class="selflink">#</a></p><div class="doc"><p>Just fail with given error.</p></div></div><div class="top"><p class="src"><a id="v:setMaxSteps" class="def">setMaxSteps</a> :: <a href="Michelson-Interpret.html#t:RemainingSteps" title="Michelson.Interpret">RemainingSteps</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> () <a href="src/Michelson.Test.Integrational.html#setMaxSteps" class="link">Source</a> <a href="#v:setMaxSteps" class="selflink">#</a></p><div class="doc"><p>Make all further interpreter calls (which are triggered by the
 <code><a href="Michelson-Test.html#v:validate" title="Michelson.Test">validate</a></code> function) use given gas limit.</p></div></div><div class="top"><p class="src"><a id="v:setNow" class="def">setNow</a> :: <a href="Tezos-Core.html#t:Timestamp" title="Tezos.Core">Timestamp</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> () <a href="src/Michelson.Test.Integrational.html#setNow" class="link">Source</a> <a href="#v:setNow" class="selflink">#</a></p><div class="doc"><p>Make all further interpreter calls (which are triggered by the
 <code><a href="Michelson-Test.html#v:validate" title="Michelson.Test">validate</a></code> function) use given timestamp as the current one.</p></div></div><div class="top"><p class="src"><a id="v:rewindTime" class="def">rewindTime</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> () <a href="src/Michelson.Test.Integrational.html#rewindTime" class="link">Source</a> <a href="#v:rewindTime" class="selflink">#</a></p><div class="doc"><p>Increase current time by the given number of seconds.</p></div></div><div class="top"><p class="src"><a id="v:withSender" class="def">withSender</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> a -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> a <a href="src/Michelson.Test.Integrational.html#withSender" class="link">Source</a> <a href="#v:withSender" class="selflink">#</a></p><div class="doc"><p>Pretend that given address initiates all the transfers within the
 code block (i.e. <code>SENDER</code> instruction will return this address).</p></div></div><div class="top"><p class="src"><a id="v:setChainId" class="def">setChainId</a> :: <a href="Tezos-Core.html#t:ChainId" title="Tezos.Core">ChainId</a> -&gt; <a href="Michelson-Test.html#t:IntegrationalScenarioM" title="Michelson.Test">IntegrationalScenarioM</a> () <a href="src/Michelson.Test.Integrational.html#setChainId" class="link">Source</a> <a href="#v:setChainId" class="selflink">#</a></p><div class="doc"><p>Make all further interpreter calls (which are triggered by the
 <code><a href="Michelson-Test.html#v:validate" title="Michelson.Test">validate</a></code> function) use given chain id.</p></div></div><div class="top"><p class="src"><a id="v:branchout" class="def">branchout</a> :: <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; [(<a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a>, <a href="Michelson-Test.html#t:IntegrationalScenario" title="Michelson.Test">IntegrationalScenario</a>)] -&gt; <a href="Michelson-Test.html#t:IntegrationalScenario" title="Michelson.Test">IntegrationalScenario</a> <a href="src/Michelson.Test.Integrational.html#branchout" class="link">Source</a> <a href="#v:branchout" class="selflink">#</a></p><div class="doc"><p>Execute multiple testing scenarios independently, basing
 them on scenario built till this point.</p><p>The following property holds for this function:</p><p><code> pre &gt;&gt; branchout [a, b, c] = branchout [pre &gt;&gt; a, pre &gt;&gt; b, pre &gt;&gt; c] </code>.</p><p>In case of property failure in one of the branches no following branch is
 executed.</p><p>Providing empty list of scenarios to this function causes error;
 we do not require <code><a href="../base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a></code> here though for convenience.</p></div></div><div class="top"><p class="src"><a id="v:-63--45-" class="def">(?-)</a> :: <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a> -&gt; a -&gt; (<a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a>, a) <span class="fixity">infixr 0</span><span class="rightedge"></span> <a href="src/Michelson.Test.Integrational.html#%3F-" class="link">Source</a> <a href="#v:-63--45-" class="selflink">#</a></p><div class="doc"><p>Make a tuple with name without extra syntactic noise.</p></div></div><a href="#g:5" id="g:5"><h2>Validators</h2></a><div class="top"><p class="src"><a id="v:composeValidators" class="def">composeValidators</a> :: <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a> -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a> -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#composeValidators" class="link">Source</a> <a href="#v:composeValidators" class="selflink">#</a></p><div class="doc"><p>Compose two success validators.</p><p>For example:</p><p>expectBalance bal addr <code><a href="Michelson-Test.html#v:composeValidators" title="Michelson.Test">composeValidators</a></code>
 expectStorageUpdateConst addr2 ValueUnit</p></div></div><div class="top"><p class="src"><a id="v:composeValidatorsList" class="def">composeValidatorsList</a> :: [<a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a>] -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#composeValidatorsList" class="link">Source</a> <a href="#v:composeValidatorsList" class="selflink">#</a></p><div class="doc"><p>Compose a list of success validators.</p></div></div><div class="top"><p class="src"><a id="v:expectAnySuccess" class="def">expectAnySuccess</a> :: <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#expectAnySuccess" class="link">Source</a> <a href="#v:expectAnySuccess" class="selflink">#</a></p><div class="doc"><p><code><a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a></code> that always passes.</p></div></div><div class="top"><p class="src"><a id="v:expectNoUpdates" class="def">expectNoUpdates</a> :: <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#expectNoUpdates" class="link">Source</a> <a href="#v:expectNoUpdates" class="selflink">#</a></p><div class="doc"><p>Check that there were no updates.</p></div></div><div class="top"><p class="src"><a id="v:expectNoStorageUpdates" class="def">expectNoStorageUpdates</a> :: <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#expectNoStorageUpdates" class="link">Source</a> <a href="#v:expectNoStorageUpdates" class="selflink">#</a></p><div class="doc"><p>Check that there were no storage updates.</p></div></div><div class="top"><p class="src"><a id="v:expectStorageUpdate" class="def">expectStorageUpdate</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; (<a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> ()) -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#expectStorageUpdate" class="link">Source</a> <a href="#v:expectStorageUpdate" class="selflink">#</a></p><div class="doc"><p>Check that storage value is updated for given address. Takes a
 predicate that is used to check the value.</p><p>It works even if updates are not filtered (i. e. a value can be
 updated more than once).</p></div></div><div class="top"><p class="src"><a id="v:expectStorageUpdateConst" class="def">expectStorageUpdateConst</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#expectStorageUpdateConst" class="link">Source</a> <a href="#v:expectStorageUpdateConst" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Michelson-Test.html#v:expectStorageUpdate" title="Michelson.Test">expectStorageUpdate</a></code>, but expects a constant.</p></div></div><div class="top"><p class="src"><a id="v:expectBalance" class="def">expectBalance</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a> -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#expectBalance" class="link">Source</a> <a href="#v:expectBalance" class="selflink">#</a></p><div class="doc"><p>Check that eventually address has some particular balance.</p></div></div><div class="top"><p class="src"><a id="v:expectStorage" class="def">expectStorage</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; (<a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> ()) -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#expectStorage" class="link">Source</a> <a href="#v:expectStorage" class="selflink">#</a></p><div class="doc"><p>Check that storage value satisfies the given predicate.</p></div></div><div class="top"><p class="src"><a id="v:expectStorageConst" class="def">expectStorageConst</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#expectStorageConst" class="link">Source</a> <a href="#v:expectStorageConst" class="selflink">#</a></p><div class="doc"><p>Check that eventually address has some particular storage value.</p></div></div><div class="top"><p class="src"><a id="v:tExpectStorageConst" class="def">tExpectStorageConst</a> :: <span class="keyword">forall</span> st. <a href="Michelson-Typed-Scope.html#t:StorageScope" title="Michelson.Typed.Scope">StorageScope</a> st =&gt; <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> st -&gt; <a href="Michelson-Test.html#t:SuccessValidator" title="Michelson.Test">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#tExpectStorageConst" class="link">Source</a> <a href="#v:tExpectStorageConst" class="selflink">#</a></p><div class="doc"><p>Similar to <code><a href="Michelson-Test.html#v:expectStorageConst" title="Michelson.Test">expectStorageConst</a></code>, for typed stuff.</p></div></div><div class="top"><p class="src"><a id="v:expectGasExhaustion" class="def">expectGasExhaustion</a> :: <a href="Michelson-Runtime.html#t:ExecutorError" title="Michelson.Runtime">ExecutorError</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Michelson.Test.Integrational.html#expectGasExhaustion" class="link">Source</a> <a href="#v:expectGasExhaustion" class="selflink">#</a></p><div class="doc"><p>Check that interpreter failed due to gas exhaustion.</p></div></div><div class="top"><p class="src"><a id="v:expectMichelsonFailed" class="def">expectMichelsonFailed</a> :: (<a href="Michelson-Interpret.html#t:MichelsonFailed" title="Michelson.Interpret">MichelsonFailed</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Runtime.html#t:ExecutorError" title="Michelson.Runtime">ExecutorError</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Michelson.Test.Integrational.html#expectMichelsonFailed" class="link">Source</a> <a href="#v:expectMichelsonFailed" class="selflink">#</a></p><div class="doc"><p>Expect that interpretation of contract with given address ended
 with [FAILED].</p></div></div><a href="#g:6" id="g:6"><h2>Various</h2></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TxData" class="def">TxData</a> <a href="src/Michelson.Runtime.TxData.html#TxData" class="link">Source</a> <a href="#t:TxData" class="selflink">#</a></p><div class="doc"><p>Data associated with a particular transaction.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TxData" class="def">TxData</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:tdSenderAddress" class="def">tdSenderAddress</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:tdParameter" class="def">tdParameter</a> :: <a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:tdEntrypoint" class="def">tdEntrypoint</a> :: <a href="Michelson-Untyped-EntryPoints.html#t:EpName" title="Michelson.Untyped.EntryPoints">EpName</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:tdAmount" class="def">tdAmount</a> :: <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:TxData" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TxData:Eq:1"></span> <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Michelson-Test.html#t:TxData" title="Michelson.Test">TxData</a></span> <a href="src/Michelson.Runtime.TxData.html#line-24" class="link">Source</a> <a href="#t:TxData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TxData:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Michelson-Runtime-TxData.html">Michelson.Runtime.TxData</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Michelson-Test.html#t:TxData" title="Michelson.Test">TxData</a> -&gt; <a href="Michelson-Test.html#t:TxData" title="Michelson.Test">TxData</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Michelson-Test.html#t:TxData" title="Michelson.Test">TxData</a> -&gt; <a href="Michelson-Test.html#t:TxData" title="Michelson.Test">TxData</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TxData:Show:2"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Michelson-Test.html#t:TxData" title="Michelson.Test">TxData</a></span> <a href="src/Michelson.Runtime.TxData.html#line-24" class="link">Source</a> <a href="#t:TxData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TxData:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Michelson-Runtime-TxData.html">Michelson.Runtime.TxData</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Michelson-Test.html#t:TxData" title="Michelson.Test">TxData</a> -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Michelson-Test.html#t:TxData" title="Michelson.Test">TxData</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Michelson-Test.html#t:TxData" title="Michelson.Test">TxData</a>] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:genesisAddress" class="def">genesisAddress</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> <a href="src/Michelson.Runtime.GState.html#genesisAddress" class="link">Source</a> <a href="#v:genesisAddress" class="selflink">#</a></p><div class="doc"><p>One of genesis addresses.</p></div></div><a href="#g:7" id="g:7"><h1>General utilities</h1></a><div class="top"><p class="src"><a id="v:failedProp" class="def">failedProp</a> :: <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a> -&gt; <a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a> <a href="src/Michelson.Test.Util.html#failedProp" class="link">Source</a> <a href="#v:failedProp" class="selflink">#</a></p><div class="doc"><p>A <code><a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a></code> that always failes with given message.</p></div></div><div class="top"><p class="src"><a id="v:succeededProp" class="def">succeededProp</a> :: <a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a> <a href="src/Michelson.Test.Util.html#succeededProp" class="link">Source</a> <a href="#v:succeededProp" class="selflink">#</a></p><div class="doc"><p>A <code><a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a></code> that always succeeds.</p></div></div><div class="top"><p class="src"><a id="v:qcIsLeft" class="def">qcIsLeft</a> :: <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> b =&gt; <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a b -&gt; <a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a> <a href="src/Michelson.Test.Util.html#qcIsLeft" class="link">Source</a> <a href="#v:qcIsLeft" class="selflink">#</a></p><div class="doc"><p>The <code><a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a></code> holds on `Left a`.</p></div></div><div class="top"><p class="src"><a id="v:qcIsRight" class="def">qcIsRight</a> :: <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a =&gt; <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a b -&gt; <a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a> <a href="src/Michelson.Test.Util.html#qcIsRight" class="link">Source</a> <a href="#v:qcIsRight" class="selflink">#</a></p><div class="doc"><p>The <code><a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a></code> holds on `Right b`.</p></div></div><a href="#g:8" id="g:8"><h1>Autodoc testing</h1></a><div class="top"><p class="src"><a id="v:runDocTests" class="def">runDocTests</a> :: <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; [<a href="Michelson-Doc-Test.html#t:DocTest" title="Michelson.Doc.Test">DocTest</a>] -&gt; <a href="Michelson-Doc.html#t:ContractDoc" title="Michelson.Doc">ContractDoc</a> -&gt; [<a href="../tasty-1.2.3/Test-Tasty-Providers.html#t:TestTree" title="Test.Tasty.Providers">TestTree</a>] <a href="src/Michelson.Doc.Test.html#runDocTests" class="link">Source</a> <a href="#v:runDocTests" class="selflink">#</a></p><div class="doc"><p>Finalize test suites.</p></div></div><div class="top"><p class="src"><a id="v:testDocBasic" class="def">testDocBasic</a> :: [<a href="Michelson-Doc-Test.html#t:DocTest" title="Michelson.Doc.Test">DocTest</a>] <a href="src/Michelson.Doc.Test.html#testDocBasic" class="link">Source</a> <a href="#v:testDocBasic" class="selflink">#</a></p><div class="doc"><p>Base properties which should comply for all documentations.</p></div></div><div class="top"><p class="src"><a id="v:excludeDocTests" class="def">excludeDocTests</a> :: [<a href="Michelson-Doc-Test.html#t:DocTest" title="Michelson.Doc.Test">DocTest</a>] -&gt; [<a href="Michelson-Doc-Test.html#t:DocTest" title="Michelson.Doc.Test">DocTest</a>] -&gt; [<a href="Michelson-Doc-Test.html#t:DocTest" title="Michelson.Doc.Test">DocTest</a>] <a href="src/Michelson.Doc.Test.html#excludeDocTests" class="link">Source</a> <a href="#v:excludeDocTests" class="selflink">#</a></p><div class="doc"><p>Calling <code>excludeDocTests tests toExclude</code> returns all test suites from
 <code>tests</code> which are not present in <code>toExclude</code>.</p></div></div><a href="#g:9" id="g:9"><h1>Dummy values</h1></a><div class="top"><p class="src"><a id="v:dummyContractEnv" class="def">dummyContractEnv</a> :: <a href="Michelson-Interpret.html#t:ContractEnv" title="Michelson.Interpret">ContractEnv</a> <a href="src/Michelson.Test.Dummy.html#dummyContractEnv" class="link">Source</a> <a href="#v:dummyContractEnv" class="selflink">#</a></p><div class="doc"><p>Dummy <code><a href="Michelson-Interpret.html#t:ContractEnv" title="Michelson.Interpret">ContractEnv</a></code> with some reasonable hardcoded values. You
 can override values you are interested in using record update
 syntax.</p></div></div><a href="#g:10" id="g:10"><h1>Arbitrary data</h1></a><div class="top"><p class="src"><a id="v:minTimestamp" class="def">minTimestamp</a> :: <a href="Tezos-Core.html#t:Timestamp" title="Tezos.Core">Timestamp</a> <a href="src/Michelson.Test.Gen.html#minTimestamp" class="link">Source</a> <a href="#v:minTimestamp" class="selflink">#</a></p><div class="doc"><p>Minimal (earliest) timestamp used for <code>Arbitrary (CValue 'CTimestamp)</code></p></div></div><div class="top"><p class="src"><a id="v:maxTimestamp" class="def">maxTimestamp</a> :: <a href="Tezos-Core.html#t:Timestamp" title="Tezos.Core">Timestamp</a> <a href="src/Michelson.Test.Gen.html#maxTimestamp" class="link">Source</a> <a href="#v:maxTimestamp" class="selflink">#</a></p><div class="doc"><p>Maximal (latest) timestamp used for <code>Arbitrary (CValue 'CTimestamp)</code></p></div></div><div class="top"><p class="src"><a id="v:midTimestamp" class="def">midTimestamp</a> :: <a href="Tezos-Core.html#t:Timestamp" title="Tezos.Core">Timestamp</a> <a href="src/Michelson.Test.Gen.html#midTimestamp" class="link">Source</a> <a href="#v:midTimestamp" class="selflink">#</a></p><div class="doc"><p>Median of <code><a href="Michelson-Test.html#v:minTimestamp" title="Michelson.Test">minTimestamp</a></code> and <code><a href="Michelson-Test.html#v:maxTimestamp" title="Michelson.Test">maxTimestamp</a></code>.
 Useful for testing (exactly half of generated dates will be before and after
 this date).</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>