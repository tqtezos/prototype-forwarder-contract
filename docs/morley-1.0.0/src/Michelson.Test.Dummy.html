<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- | Dummy data to be used in tests where it's not essential.</span><span>
</span><a name="line-2"></a><span>
</span><a name="line-3"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Michelson.Test.Dummy</span><span>
</span><a name="line-4"></a><span>  </span><span class="hs-special">(</span><span> </span><a href="Michelson.Test.Dummy.html#dummyNow"><span class="hs-identifier hs-var">dummyNow</span></a><span>
</span><a name="line-5"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Michelson.Test.Dummy.html#dummyMaxSteps"><span class="hs-identifier hs-var">dummyMaxSteps</span></a><span>
</span><a name="line-6"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Michelson.Test.Dummy.html#dummyContractEnv"><span class="hs-identifier hs-var">dummyContractEnv</span></a><span>
</span><a name="line-7"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Michelson.Test.Dummy.html#dummyOrigination"><span class="hs-identifier hs-var">dummyOrigination</span></a><span>
</span><a name="line-8"></a><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-9"></a><span>
</span><a name="line-10"></a><span class="hs-keyword">import</span><span> </span><a href="Michelson.Interpret.html"><span class="hs-identifier">Michelson.Interpret</span></a><span> </span><span class="hs-special">(</span><a href="Michelson.Interpret.html#ContractEnv"><span class="hs-identifier hs-type">ContractEnv</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="Michelson.Interpret.html#RemainingSteps"><span class="hs-identifier hs-type">RemainingSteps</span></a><span class="hs-special">)</span><span>
</span><a name="line-11"></a><span class="hs-keyword">import</span><span> </span><a href="Michelson.Runtime.GState.html"><span class="hs-identifier">Michelson.Runtime.GState</span></a><span> </span><span class="hs-special">(</span><a href="Michelson.Runtime.GState.html#genesisAddress"><span class="hs-identifier hs-var">genesisAddress</span></a><span class="hs-special">)</span><span>
</span><a name="line-12"></a><span class="hs-keyword">import</span><span> </span><a href="Michelson.Untyped.html"><span class="hs-identifier">Michelson.Untyped</span></a><span>
</span><a name="line-13"></a><span class="hs-keyword">import</span><span> </span><a href="Tezos.Core.html"><span class="hs-identifier">Tezos.Core</span></a><span> </span><span class="hs-special">(</span><a href="Tezos.Core.html#Timestamp"><span class="hs-identifier hs-type">Timestamp</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="Tezos.Core.html#dummyChainId"><span class="hs-identifier hs-var">dummyChainId</span></a><span class="hs-special">,</span><span> </span><a href="Tezos.Core.html#unsafeMkMutez"><span class="hs-identifier hs-var">unsafeMkMutez</span></a><span class="hs-special">)</span><span>
</span><a name="line-14"></a><span>
</span><a name="line-15"></a><span class="hs-comment">-- | Dummy timestamp, can be used to specify current `NOW` value or</span><span>
</span><a name="line-16"></a><span class="hs-comment">-- maybe something else.</span><span>
</span><a name="line-17"></a><span class="hs-identifier">dummyNow</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Tezos.Core.html#Timestamp"><span class="hs-identifier hs-type">Timestamp</span></a><span>
</span><a name="line-18"></a><a name="dummyNow"><a href="Michelson.Test.Dummy.html#dummyNow"><span class="hs-identifier">dummyNow</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.Core.html#Timestamp"><span class="hs-identifier hs-var">Timestamp</span></a><span> </span><span class="hs-number">100</span><span>
</span><a name="line-19"></a><span>
</span><a name="line-20"></a><span class="hs-comment">-- | Dummy value for maximal number of steps a contract can</span><span>
</span><a name="line-21"></a><span class="hs-comment">-- make. Intentionally quite large, because most likely if you use</span><span>
</span><a name="line-22"></a><span class="hs-comment">-- dummy value you don't want the interpreter to stop due to gas</span><span>
</span><a name="line-23"></a><span class="hs-comment">-- exhaustion. On the other hand, it probably still prevents the</span><span>
</span><a name="line-24"></a><span class="hs-comment">-- interpreter from working for eternity.</span><span>
</span><a name="line-25"></a><span class="hs-identifier">dummyMaxSteps</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Michelson.Interpret.html#RemainingSteps"><span class="hs-identifier hs-type">RemainingSteps</span></a><span>
</span><a name="line-26"></a><a name="dummyMaxSteps"><a href="Michelson.Test.Dummy.html#dummyMaxSteps"><span class="hs-identifier">dummyMaxSteps</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-number">100500</span><span>
</span><a name="line-27"></a><span>
</span><a name="line-28"></a><span class="hs-comment">-- | Dummy 'ContractEnv' with some reasonable hardcoded values. You</span><span>
</span><a name="line-29"></a><span class="hs-comment">-- can override values you are interested in using record update</span><span>
</span><a name="line-30"></a><span class="hs-comment">-- syntax.</span><span>
</span><a name="line-31"></a><span class="hs-identifier">dummyContractEnv</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Michelson.Interpret.html#ContractEnv"><span class="hs-identifier hs-type">ContractEnv</span></a><span>
</span><a name="line-32"></a><a name="dummyContractEnv"><a href="Michelson.Test.Dummy.html#dummyContractEnv"><span class="hs-identifier">dummyContractEnv</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Michelson.Interpret.html#ContractEnv"><span class="hs-identifier hs-var">ContractEnv</span></a><span>
</span><a name="line-33"></a><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">ceNow</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Michelson.Test.Dummy.html#dummyNow"><span class="hs-identifier hs-var">dummyNow</span></a><span>
</span><a name="line-34"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ceMaxSteps</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Michelson.Test.Dummy.html#dummyMaxSteps"><span class="hs-identifier hs-var">dummyMaxSteps</span></a><span>
</span><a name="line-35"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ceBalance</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.Core.html#unsafeMkMutez"><span class="hs-identifier hs-var">unsafeMkMutez</span></a><span> </span><span class="hs-number">100</span><span>
</span><a name="line-36"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ceContracts</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mempty</span><span>
</span><a name="line-37"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ceSelf</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Michelson.Runtime.GState.html#genesisAddress"><span class="hs-identifier hs-var">genesisAddress</span></a><span>
</span><a name="line-38"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ceSource</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Michelson.Runtime.GState.html#genesisAddress"><span class="hs-identifier hs-var">genesisAddress</span></a><span>
</span><a name="line-39"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ceSender</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Michelson.Runtime.GState.html#genesisAddress"><span class="hs-identifier hs-var">genesisAddress</span></a><span>
</span><a name="line-40"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ceAmount</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.Core.html#unsafeMkMutez"><span class="hs-identifier hs-var">unsafeMkMutez</span></a><span> </span><span class="hs-number">100</span><span>
</span><a name="line-41"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ceChainId</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.Core.html#dummyChainId"><span class="hs-identifier hs-var">dummyChainId</span></a><span>
</span><a name="line-42"></a><span>  </span><span class="hs-special">}</span><span>
</span><a name="line-43"></a><span>
</span><a name="line-44"></a><span class="hs-comment">-- | 'OriginationOperation' with most data hardcoded to some</span><span>
</span><a name="line-45"></a><span class="hs-comment">-- reasonable values. Contract and initial values must be passed</span><span>
</span><a name="line-46"></a><span class="hs-comment">-- explicitly, because otherwise it hardly makes sense.</span><span>
</span><a name="line-47"></a><span class="hs-identifier">dummyOrigination</span><span> </span><span class="hs-glyph">::</span><span>
</span><a name="line-48"></a><span>     </span><a href="Michelson.Untyped.Aliases.html#Value"><span class="hs-identifier hs-type">Value</span></a><span>
</span><a name="line-49"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Michelson.Untyped.Aliases.html#Contract"><span class="hs-identifier hs-type">Contract</span></a><span>
</span><a name="line-50"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Michelson.Untyped.Instr.html#OriginationOperation"><span class="hs-identifier hs-type">OriginationOperation</span></a><span>
</span><a name="line-51"></a><a name="dummyOrigination"><a href="Michelson.Test.Dummy.html#dummyOrigination"><span class="hs-identifier">dummyOrigination</span></a></a><span> </span><a name="local-6989586621680949935"><a href="#local-6989586621680949935"><span class="hs-identifier">storage</span></a></a><span> </span><a name="local-6989586621680949936"><a href="#local-6989586621680949936"><span class="hs-identifier">contract</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Michelson.Untyped.Instr.html#OriginationOperation"><span class="hs-identifier hs-var">OriginationOperation</span></a><span>
</span><a name="line-52"></a><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">ooOriginator</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Michelson.Runtime.GState.html#genesisAddress"><span class="hs-identifier hs-var">genesisAddress</span></a><span>
</span><a name="line-53"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ooDelegate</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-54"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ooBalance</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Tezos.Core.html#unsafeMkMutez"><span class="hs-identifier hs-var">unsafeMkMutez</span></a><span> </span><span class="hs-number">100</span><span>
</span><a name="line-55"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ooStorage</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680949935"><span class="hs-identifier hs-var">storage</span></a><span>
</span><a name="line-56"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">ooContract</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621680949936"><span class="hs-identifier hs-var">contract</span></a><span>
</span><a name="line-57"></a><span>  </span><span class="hs-special">}</span><span>
</span><a name="line-58"></a></pre></body></html>