<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Michelson.Test.Integrational</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Michelson.Test.Integrational.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">morley-1.0.0: Developer tools for the Michelson Language</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Michelson.Test.Integrational</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Re-exports</a></li><li><a href="#g:2">More genesis addresses which can be used in tests</a></li><li><a href="#g:3">Testing engine</a></li><li><a href="#g:4">Validators</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Utilities for integrational testing.
 Example tests can be found in the 'morley-test' test suite.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:TxData">TxData</a> = <a href="#v:TxData">TxData</a> {<ul class="subs"><li><a href="#v:tdSenderAddress">tdSenderAddress</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></li><li><a href="#v:tdParameter">tdParameter</a> :: <a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a></li><li><a href="#v:tdEntrypoint">tdEntrypoint</a> :: <a href="Michelson-Untyped-EntryPoints.html#t:EpName" title="Michelson.Untyped.EntryPoints">EpName</a></li><li><a href="#v:tdAmount">tdAmount</a> :: <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a></li></ul>}</li><li class="src short"><a href="#v:genesisAddress">genesisAddress</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></li><li class="src short"><a href="#v:genesisAddress1">genesisAddress1</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></li><li class="src short"><a href="#v:genesisAddress2">genesisAddress2</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></li><li class="src short"><a href="#v:genesisAddress3">genesisAddress3</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></li><li class="src short"><a href="#v:genesisAddress4">genesisAddress4</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></li><li class="src short"><a href="#v:genesisAddress5">genesisAddress5</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></li><li class="src short"><a href="#v:genesisAddress6">genesisAddress6</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:IntegrationalValidator">IntegrationalValidator</a> = <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> (<a href="Michelson-Runtime.html#t:ExecutorError" title="Michelson.Runtime">ExecutorError</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:SuccessValidator">SuccessValidator</a> = InternalState -&gt; <a href="Michelson-Runtime-GState.html#t:GState" title="Michelson.Runtime.GState">GState</a> -&gt; [<a href="Michelson-Runtime-GState.html#t:GStateUpdate" title="Michelson.Runtime.GState">GStateUpdate</a>] -&gt; <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:IntegrationalScenarioM">IntegrationalScenarioM</a> = <a href="../morley-prelude-0.3.0/Prelude.html#t:StateT" title="Prelude">StateT</a> InternalState (<a href="../mtl-2.2.2/Control-Monad-Except.html#t:Except" title="Control.Monad.Except">Except</a> ScenarioError)</li><li class="src short"><span class="keyword">type</span> <a href="#t:IntegrationalScenario">IntegrationalScenario</a> = <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> Validated</li><li class="src short"><span class="keyword">data</span> <a href="#t:ValidationError">ValidationError</a><ul class="subs"><li>= <a href="#v:UnexpectedExecutorError">UnexpectedExecutorError</a> IntegrationalExecutorError</li><li>| <a href="#v:UnexpectedTypeCheckError">UnexpectedTypeCheckError</a> <a href="Michelson-TypeCheck-Error.html#t:TCError" title="Michelson.TypeCheck.Error">TCError</a></li><li>| <a href="#v:ExpectingInterpreterToFail">ExpectingInterpreterToFail</a></li><li>| <a href="#v:IncorrectUpdates">IncorrectUpdates</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> [<a href="Michelson-Runtime-GState.html#t:GStateUpdate" title="Michelson.Runtime.GState">GStateUpdate</a>]</li><li>| <a href="#v:IncorrectStorageUpdate">IncorrectStorageUpdate</a> AddressName <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a></li><li>| <a href="#v:InvalidStorage">InvalidStorage</a> AddressName ExpectedStorage <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a></li><li>| <a href="#v:StoragePredicateMismatch">StoragePredicateMismatch</a> AddressName <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a></li><li>| <a href="#v:InvalidBalance">InvalidBalance</a> AddressName ExpectedBalance <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a></li><li>| <a href="#v:UnexpectedUpdates">UnexpectedUpdates</a> (<a href="../base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Michelson-Runtime-GState.html#t:GStateUpdate" title="Michelson.Runtime.GState">GStateUpdate</a>)</li><li>| <a href="#v:CustomValidationError">CustomValidationError</a> <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a></li></ul></li><li class="src short"><a href="#v:integrationalTestExpectation">integrationalTestExpectation</a> :: <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenario" title="Michelson.Test.Integrational">IntegrationalScenario</a> -&gt; <a href="../hspec-expectations-0.8.2/Test-Hspec-Expectations.html#t:Expectation" title="Test.Hspec.Expectations">Expectation</a></li><li class="src short"><a href="#v:integrationalTestProperty">integrationalTestProperty</a> :: <a href="Michelson-Test-Integrational.html#t:IntegrationalScenario" title="Michelson.Test.Integrational">IntegrationalScenario</a> -&gt; <a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a></li><li class="src short"><a href="#v:originate">originate</a> :: <a href="Michelson-Untyped-Aliases.html#t:Contract" title="Michelson.Untyped.Aliases">Contract</a> -&gt; <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a> -&gt; <a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></li><li class="src short"><a href="#v:tOriginate">tOriginate</a> :: (<a href="Michelson-Typed-Scope.html#t:ParameterScope" title="Michelson.Typed.Scope">ParameterScope</a> cp, <a href="Michelson-Typed-Scope.html#t:StorageScope" title="Michelson.Typed.Scope">StorageScope</a> st) =&gt; <a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st -&gt; <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a> -&gt; <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> st -&gt; <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></li><li class="src short"><a href="#v:transfer">transfer</a> :: <a href="Michelson-Test-Integrational.html#t:TxData" title="Michelson.Test.Integrational">TxData</a> -&gt; <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> ()</li><li class="src short"><a href="#v:tTransfer">tTransfer</a> :: <span class="keyword">forall</span> arg. <a href="Michelson-Typed-Scope.html#t:ParameterScope" title="Michelson.Typed.Scope">ParameterScope</a> arg =&gt; (&quot;from&quot; <a href="Util-Named.html#t::-33-" title="Util.Named">:!</a> <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a>) -&gt; (&quot;to&quot; <a href="Util-Named.html#t::-33-" title="Util.Named">:!</a> <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a>) -&gt; <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a> -&gt; <a href="Michelson-Untyped-EntryPoints.html#t:EpName" title="Michelson.Untyped.EntryPoints">EpName</a> -&gt; <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> arg -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> ()</li><li class="src short"><a href="#v:validate">validate</a> :: <a href="Michelson-Test-Integrational.html#t:IntegrationalValidator" title="Michelson.Test.Integrational">IntegrationalValidator</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenario" title="Michelson.Test.Integrational">IntegrationalScenario</a></li><li class="src short"><a href="#v:integrationalFail">integrationalFail</a> :: <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> anything</li><li class="src short"><a href="#v:setMaxSteps">setMaxSteps</a> :: <a href="Michelson-Interpret.html#t:RemainingSteps" title="Michelson.Interpret">RemainingSteps</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> ()</li><li class="src short"><a href="#v:modifyNow">modifyNow</a> :: (<a href="Tezos-Core.html#t:Timestamp" title="Tezos.Core">Timestamp</a> -&gt; <a href="Tezos-Core.html#t:Timestamp" title="Tezos.Core">Timestamp</a>) -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> ()</li><li class="src short"><a href="#v:setNow">setNow</a> :: <a href="Tezos-Core.html#t:Timestamp" title="Tezos.Core">Timestamp</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> ()</li><li class="src short"><a href="#v:rewindTime">rewindTime</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> ()</li><li class="src short"><a href="#v:withSender">withSender</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> a -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> a</li><li class="src short"><a href="#v:setChainId">setChainId</a> :: <a href="Tezos-Core.html#t:ChainId" title="Tezos.Core">ChainId</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> ()</li><li class="src short"><a href="#v:branchout">branchout</a> :: <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; [(<a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a>, <a href="Michelson-Test-Integrational.html#t:IntegrationalScenario" title="Michelson.Test.Integrational">IntegrationalScenario</a>)] -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenario" title="Michelson.Test.Integrational">IntegrationalScenario</a></li><li class="src short"><a href="#v:-63--45-">(?-)</a> :: <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a> -&gt; a -&gt; (<a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a>, a)</li><li class="src short"><a href="#v:offshoot">offshoot</a> :: <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenario" title="Michelson.Test.Integrational">IntegrationalScenario</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> ()</li><li class="src short"><a href="#v:composeValidators">composeValidators</a> :: <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a> -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a> -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a></li><li class="src short"><a href="#v:composeValidatorsList">composeValidatorsList</a> :: [<a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a>] -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a></li><li class="src short"><a href="#v:expectAnySuccess">expectAnySuccess</a> :: <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a></li><li class="src short"><a href="#v:expectNoUpdates">expectNoUpdates</a> :: <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a></li><li class="src short"><a href="#v:expectNoStorageUpdates">expectNoStorageUpdates</a> :: <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a></li><li class="src short"><a href="#v:expectStorageUpdate">expectStorageUpdate</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; (<a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> ()) -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a></li><li class="src short"><a href="#v:expectStorageUpdateConst">expectStorageUpdateConst</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a></li><li class="src short"><a href="#v:expectBalance">expectBalance</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a> -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a></li><li class="src short"><a href="#v:expectStorage">expectStorage</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; (<a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> ()) -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a></li><li class="src short"><a href="#v:expectStorageConst">expectStorageConst</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a></li><li class="src short"><a href="#v:tExpectStorageConst">tExpectStorageConst</a> :: <span class="keyword">forall</span> st. <a href="Michelson-Typed-Scope.html#t:StorageScope" title="Michelson.Typed.Scope">StorageScope</a> st =&gt; <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> st -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a></li><li class="src short"><a href="#v:expectGasExhaustion">expectGasExhaustion</a> :: <a href="Michelson-Runtime.html#t:ExecutorError" title="Michelson.Runtime">ExecutorError</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:expectMichelsonFailed">expectMichelsonFailed</a> :: (<a href="Michelson-Interpret.html#t:MichelsonFailed" title="Michelson.Interpret">MichelsonFailed</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Runtime.html#t:ExecutorError" title="Michelson.Runtime">ExecutorError</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Re-exports</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TxData" class="def">TxData</a> <a href="src/Michelson.Runtime.TxData.html#TxData" class="link">Source</a> <a href="#t:TxData" class="selflink">#</a></p><div class="doc"><p>Data associated with a particular transaction.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TxData" class="def">TxData</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:tdSenderAddress" class="def">tdSenderAddress</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:tdParameter" class="def">tdParameter</a> :: <a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:tdEntrypoint" class="def">tdEntrypoint</a> :: <a href="Michelson-Untyped-EntryPoints.html#t:EpName" title="Michelson.Untyped.EntryPoints">EpName</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:tdAmount" class="def">tdAmount</a> :: <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:TxData" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TxData:Eq:1"></span> <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Michelson-Test-Integrational.html#t:TxData" title="Michelson.Test.Integrational">TxData</a></span> <a href="src/Michelson.Runtime.TxData.html#line-24" class="link">Source</a> <a href="#t:TxData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TxData:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Michelson-Runtime-TxData.html">Michelson.Runtime.TxData</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Michelson-Test-Integrational.html#t:TxData" title="Michelson.Test.Integrational">TxData</a> -&gt; <a href="Michelson-Test-Integrational.html#t:TxData" title="Michelson.Test.Integrational">TxData</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Michelson-Test-Integrational.html#t:TxData" title="Michelson.Test.Integrational">TxData</a> -&gt; <a href="Michelson-Test-Integrational.html#t:TxData" title="Michelson.Test.Integrational">TxData</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TxData:Show:2"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Michelson-Test-Integrational.html#t:TxData" title="Michelson.Test.Integrational">TxData</a></span> <a href="src/Michelson.Runtime.TxData.html#line-24" class="link">Source</a> <a href="#t:TxData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TxData:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Michelson-Runtime-TxData.html">Michelson.Runtime.TxData</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Michelson-Test-Integrational.html#t:TxData" title="Michelson.Test.Integrational">TxData</a> -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Michelson-Test-Integrational.html#t:TxData" title="Michelson.Test.Integrational">TxData</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Michelson-Test-Integrational.html#t:TxData" title="Michelson.Test.Integrational">TxData</a>] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h1>More genesis addresses which can be used in tests</h1></a><div class="top"><p class="src"><a id="v:genesisAddress" class="def">genesisAddress</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> <a href="src/Michelson.Runtime.GState.html#genesisAddress" class="link">Source</a> <a href="#v:genesisAddress" class="selflink">#</a></p><div class="doc"><p>One of genesis addresses.</p></div></div><div class="top"><p class="src"><a id="v:genesisAddress1" class="def">genesisAddress1</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> <a href="src/Michelson.Runtime.GState.html#genesisAddress1" class="link">Source</a> <a href="#v:genesisAddress1" class="selflink">#</a></p><div class="doc"><p>More genesis addresses</p><p>We know size of <code>genesisAddresses</code>, so it is safe to use <code>!!</code></p></div></div><div class="top"><p class="src"><a id="v:genesisAddress2" class="def">genesisAddress2</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> <a href="src/Michelson.Runtime.GState.html#genesisAddress2" class="link">Source</a> <a href="#v:genesisAddress2" class="selflink">#</a></p><div class="doc"><p>More genesis addresses</p><p>We know size of <code>genesisAddresses</code>, so it is safe to use <code>!!</code></p></div></div><div class="top"><p class="src"><a id="v:genesisAddress3" class="def">genesisAddress3</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> <a href="src/Michelson.Runtime.GState.html#genesisAddress3" class="link">Source</a> <a href="#v:genesisAddress3" class="selflink">#</a></p><div class="doc"><p>More genesis addresses</p><p>We know size of <code>genesisAddresses</code>, so it is safe to use <code>!!</code></p></div></div><div class="top"><p class="src"><a id="v:genesisAddress4" class="def">genesisAddress4</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> <a href="src/Michelson.Runtime.GState.html#genesisAddress4" class="link">Source</a> <a href="#v:genesisAddress4" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:genesisAddress5" class="def">genesisAddress5</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> <a href="src/Michelson.Runtime.GState.html#genesisAddress5" class="link">Source</a> <a href="#v:genesisAddress5" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:genesisAddress6" class="def">genesisAddress6</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> <a href="src/Michelson.Runtime.GState.html#genesisAddress6" class="link">Source</a> <a href="#v:genesisAddress6" class="selflink">#</a></p></div><a href="#g:3" id="g:3"><h1>Testing engine</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:IntegrationalValidator" class="def">IntegrationalValidator</a> = <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> (<a href="Michelson-Runtime.html#t:ExecutorError" title="Michelson.Runtime">ExecutorError</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#IntegrationalValidator" class="link">Source</a> <a href="#t:IntegrationalValidator" class="selflink">#</a></p><div class="doc"><p>Validator for integrational testing.
 If an error is expected, it should be <code><a href="../base-4.12.0.0/Data-Either.html#v:Left" title="Data.Either">Left</a></code> with validator for errors.
 Otherwise it should check final global state and its updates.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:SuccessValidator" class="def">SuccessValidator</a> = InternalState -&gt; <a href="Michelson-Runtime-GState.html#t:GState" title="Michelson.Runtime.GState">GState</a> -&gt; [<a href="Michelson-Runtime-GState.html#t:GStateUpdate" title="Michelson.Runtime.GState">GStateUpdate</a>] -&gt; <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> () <a href="src/Michelson.Test.Integrational.html#SuccessValidator" class="link">Source</a> <a href="#t:SuccessValidator" class="selflink">#</a></p><div class="doc"><p>Validator for integrational testing that expects successful execution.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:IntegrationalScenarioM" class="def">IntegrationalScenarioM</a> = <a href="../morley-prelude-0.3.0/Prelude.html#t:StateT" title="Prelude">StateT</a> InternalState (<a href="../mtl-2.2.2/Control-Monad-Except.html#t:Except" title="Control.Monad.Except">Except</a> ScenarioError) <a href="src/Michelson.Test.Integrational.html#IntegrationalScenarioM" class="link">Source</a> <a href="#t:IntegrationalScenarioM" class="selflink">#</a></p><div class="doc"><p>A monad inside which integrational tests can be described using
 do-notation.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:IntegrationalScenario" class="def">IntegrationalScenario</a> = <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> Validated <a href="src/Michelson.Test.Integrational.html#IntegrationalScenario" class="link">Source</a> <a href="#t:IntegrationalScenario" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ValidationError" class="def">ValidationError</a> <a href="src/Michelson.Test.Integrational.html#ValidationError" class="link">Source</a> <a href="#t:ValidationError" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:UnexpectedExecutorError" class="def">UnexpectedExecutorError</a> IntegrationalExecutorError</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:UnexpectedTypeCheckError" class="def">UnexpectedTypeCheckError</a> <a href="Michelson-TypeCheck-Error.html#t:TCError" title="Michelson.TypeCheck.Error">TCError</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:ExpectingInterpreterToFail" class="def">ExpectingInterpreterToFail</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:IncorrectUpdates" class="def">IncorrectUpdates</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> [<a href="Michelson-Runtime-GState.html#t:GStateUpdate" title="Michelson.Runtime.GState">GStateUpdate</a>]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:IncorrectStorageUpdate" class="def">IncorrectStorageUpdate</a> AddressName <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:InvalidStorage" class="def">InvalidStorage</a> AddressName ExpectedStorage <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:StoragePredicateMismatch" class="def">StoragePredicateMismatch</a> AddressName <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:InvalidBalance" class="def">InvalidBalance</a> AddressName ExpectedBalance <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:UnexpectedUpdates" class="def">UnexpectedUpdates</a> (<a href="../base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Michelson-Runtime-GState.html#t:GStateUpdate" title="Michelson.Runtime.GState">GStateUpdate</a>)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CustomValidationError" class="def">CustomValidationError</a> <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:ValidationError" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ValidationError:Show:1"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a></span> <a href="src/Michelson.Test.Integrational.html#line-159" class="link">Source</a> <a href="#t:ValidationError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ValidationError:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Michelson-Test-Integrational.html">Michelson.Test.Integrational</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a>] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ValidationError:Exception:2"></span> <a href="../base-4.12.0.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a></span> <a href="src/Michelson.Test.Integrational.html#line-183" class="link">Source</a> <a href="#t:ValidationError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ValidationError:Exception:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Michelson-Test-Integrational.html">Michelson.Test.Integrational</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> -&gt; <a href="../base-4.12.0.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="../base-4.12.0.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> -&gt; <a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ValidationError:Buildable:3"></span> <a href="../fmt-0.6.1.2/Fmt.html#t:Buildable" title="Fmt">Buildable</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a></span> <a href="src/Michelson.Test.Integrational.html#line-161" class="link">Source</a> <a href="#t:ValidationError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ValidationError:Buildable:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Michelson-Test-Integrational.html">Michelson.Test.Integrational</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:build">build</a> :: <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> -&gt; <a href="../fmt-0.6.1.2/Fmt.html#t:Builder" title="Fmt">Builder</a> <a href="#v:build" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:integrationalTestExpectation" class="def">integrationalTestExpectation</a> :: <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenario" title="Michelson.Test.Integrational">IntegrationalScenario</a> -&gt; <a href="../hspec-expectations-0.8.2/Test-Hspec-Expectations.html#t:Expectation" title="Test.Hspec.Expectations">Expectation</a> <a href="src/Michelson.Test.Integrational.html#integrationalTestExpectation" class="link">Source</a> <a href="#v:integrationalTestExpectation" class="selflink">#</a></p><div class="doc"><p>Integrational test that executes given operations and validates
 them using given validator. It can fail using <code><a href="../hspec-expectations-0.8.2/Test-Hspec-Expectations.html#t:Expectation" title="Test.Hspec.Expectations">Expectation</a></code>
 capability.
 It starts with <code><a href="Michelson-Runtime-GState.html#v:initGState" title="Michelson.Runtime.GState">initGState</a></code> and some reasonable dummy values for
 gas limit and current timestamp. You can update blockchain state
 by performing some operations.</p></div></div><div class="top"><p class="src"><a id="v:integrationalTestProperty" class="def">integrationalTestProperty</a> :: <a href="Michelson-Test-Integrational.html#t:IntegrationalScenario" title="Michelson.Test.Integrational">IntegrationalScenario</a> -&gt; <a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a> <a href="src/Michelson.Test.Integrational.html#integrationalTestProperty" class="link">Source</a> <a href="#v:integrationalTestProperty" class="selflink">#</a></p><div class="doc"><p>Integrational test similar to <code><a href="Michelson-Test-Integrational.html#v:integrationalTestExpectation" title="Michelson.Test.Integrational">integrationalTestExpectation</a></code>.
 It can fail using <code><a href="../QuickCheck-2.13.2/Test-QuickCheck.html#t:Property" title="Test.QuickCheck">Property</a></code> capability.
 It can be used with QuickCheck's <code>forAll</code> to make a
 property-based test with arbitrary data.</p></div></div><div class="top"><p class="src"><a id="v:originate" class="def">originate</a> :: <a href="Michelson-Untyped-Aliases.html#t:Contract" title="Michelson.Untyped.Aliases">Contract</a> -&gt; <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a> -&gt; <a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> <a href="src/Michelson.Test.Integrational.html#originate" class="link">Source</a> <a href="#v:originate" class="selflink">#</a></p><div class="doc"><p>Originate a contract with given initial storage and balance. Its
 address is returned.</p></div></div><div class="top"><p class="src"><a id="v:tOriginate" class="def">tOriginate</a> :: (<a href="Michelson-Typed-Scope.html#t:ParameterScope" title="Michelson.Typed.Scope">ParameterScope</a> cp, <a href="Michelson-Typed-Scope.html#t:StorageScope" title="Michelson.Typed.Scope">StorageScope</a> st) =&gt; <a href="Michelson-Typed-Instr.html#t:FullContract" title="Michelson.Typed.Instr">FullContract</a> cp st -&gt; <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a> -&gt; <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> st -&gt; <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> <a href="src/Michelson.Test.Integrational.html#tOriginate" class="link">Source</a> <a href="#v:tOriginate" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Michelson-Test-Integrational.html#v:originate" title="Michelson.Test.Integrational">originate</a></code>, but for typed contract and value.</p></div></div><div class="top"><p class="src"><a id="v:transfer" class="def">transfer</a> :: <a href="Michelson-Test-Integrational.html#t:TxData" title="Michelson.Test.Integrational">TxData</a> -&gt; <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> () <a href="src/Michelson.Test.Integrational.html#transfer" class="link">Source</a> <a href="#v:transfer" class="selflink">#</a></p><div class="doc"><p>Transfer tokens to a given address.</p></div></div><div class="top"><p class="src"><a id="v:tTransfer" class="def">tTransfer</a> :: <span class="keyword">forall</span> arg. <a href="Michelson-Typed-Scope.html#t:ParameterScope" title="Michelson.Typed.Scope">ParameterScope</a> arg =&gt; (&quot;from&quot; <a href="Util-Named.html#t::-33-" title="Util.Named">:!</a> <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a>) -&gt; (&quot;to&quot; <a href="Util-Named.html#t::-33-" title="Util.Named">:!</a> <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a>) -&gt; <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a> -&gt; <a href="Michelson-Untyped-EntryPoints.html#t:EpName" title="Michelson.Untyped.EntryPoints">EpName</a> -&gt; <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> arg -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> () <a href="src/Michelson.Test.Integrational.html#tTransfer" class="link">Source</a> <a href="#v:tTransfer" class="selflink">#</a></p><div class="doc"><p>Similar to <code><a href="Michelson-Test-Integrational.html#v:transfer" title="Michelson.Test.Integrational">transfer</a></code>, for typed values.
 Note that it works with untyped <code><a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a></code> and does not check that
 entrypoint with given name is present and has the expected type.
 Passed value must correspond to the entrypoint argument type, not
 the parameter type of the contract (and must be unit for implicit
 accounts).</p></div></div><div class="top"><p class="src"><a id="v:validate" class="def">validate</a> :: <a href="Michelson-Test-Integrational.html#t:IntegrationalValidator" title="Michelson.Test.Integrational">IntegrationalValidator</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenario" title="Michelson.Test.Integrational">IntegrationalScenario</a> <a href="src/Michelson.Test.Integrational.html#validate" class="link">Source</a> <a href="#v:validate" class="selflink">#</a></p><div class="doc"><p>Validate the execution result.</p></div></div><div class="top"><p class="src"><a id="v:integrationalFail" class="def">integrationalFail</a> :: <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> anything <a href="src/Michelson.Test.Integrational.html#integrationalFail" class="link">Source</a> <a href="#v:integrationalFail" class="selflink">#</a></p><div class="doc"><p>Just fail with given error.</p></div></div><div class="top"><p class="src"><a id="v:setMaxSteps" class="def">setMaxSteps</a> :: <a href="Michelson-Interpret.html#t:RemainingSteps" title="Michelson.Interpret">RemainingSteps</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> () <a href="src/Michelson.Test.Integrational.html#setMaxSteps" class="link">Source</a> <a href="#v:setMaxSteps" class="selflink">#</a></p><div class="doc"><p>Make all further interpreter calls (which are triggered by the
 <code><a href="Michelson-Test-Integrational.html#v:validate" title="Michelson.Test.Integrational">validate</a></code> function) use given gas limit.</p></div></div><div class="top"><p class="src"><a id="v:modifyNow" class="def">modifyNow</a> :: (<a href="Tezos-Core.html#t:Timestamp" title="Tezos.Core">Timestamp</a> -&gt; <a href="Tezos-Core.html#t:Timestamp" title="Tezos.Core">Timestamp</a>) -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> () <a href="src/Michelson.Test.Integrational.html#modifyNow" class="link">Source</a> <a href="#v:modifyNow" class="selflink">#</a></p><div class="doc"><p>Make all further interpreter calls (which are triggered by the
 <code><a href="Michelson-Test-Integrational.html#v:validate" title="Michelson.Test.Integrational">validate</a></code> function) use modified timestamp as the current one.</p></div></div><div class="top"><p class="src"><a id="v:setNow" class="def">setNow</a> :: <a href="Tezos-Core.html#t:Timestamp" title="Tezos.Core">Timestamp</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> () <a href="src/Michelson.Test.Integrational.html#setNow" class="link">Source</a> <a href="#v:setNow" class="selflink">#</a></p><div class="doc"><p>Make all further interpreter calls (which are triggered by the
 <code><a href="Michelson-Test-Integrational.html#v:validate" title="Michelson.Test.Integrational">validate</a></code> function) use given timestamp as the current one.</p></div></div><div class="top"><p class="src"><a id="v:rewindTime" class="def">rewindTime</a> :: <a href="../base-4.12.0.0/Prelude.html#t:Integer" title="Prelude">Integer</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> () <a href="src/Michelson.Test.Integrational.html#rewindTime" class="link">Source</a> <a href="#v:rewindTime" class="selflink">#</a></p><div class="doc"><p>Increase current time by the given number of seconds.</p></div></div><div class="top"><p class="src"><a id="v:withSender" class="def">withSender</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> a -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> a <a href="src/Michelson.Test.Integrational.html#withSender" class="link">Source</a> <a href="#v:withSender" class="selflink">#</a></p><div class="doc"><p>Pretend that given address initiates all the transfers within the
 code block (i.e. <code>SENDER</code> instruction will return this address).</p></div></div><div class="top"><p class="src"><a id="v:setChainId" class="def">setChainId</a> :: <a href="Tezos-Core.html#t:ChainId" title="Tezos.Core">ChainId</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> () <a href="src/Michelson.Test.Integrational.html#setChainId" class="link">Source</a> <a href="#v:setChainId" class="selflink">#</a></p><div class="doc"><p>Make all further interpreter calls (which are triggered by the
 <code><a href="Michelson-Test-Integrational.html#v:validate" title="Michelson.Test.Integrational">validate</a></code> function) use given chain id.</p></div></div><div class="top"><p class="src"><a id="v:branchout" class="def">branchout</a> :: <a href="../base-4.12.0.0/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> =&gt; [(<a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a>, <a href="Michelson-Test-Integrational.html#t:IntegrationalScenario" title="Michelson.Test.Integrational">IntegrationalScenario</a>)] -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenario" title="Michelson.Test.Integrational">IntegrationalScenario</a> <a href="src/Michelson.Test.Integrational.html#branchout" class="link">Source</a> <a href="#v:branchout" class="selflink">#</a></p><div class="doc"><p>Execute multiple testing scenarios independently, basing
 them on scenario built till this point.</p><p>The following property holds for this function:</p><p><code> pre &gt;&gt; branchout [a, b, c] = branchout [pre &gt;&gt; a, pre &gt;&gt; b, pre &gt;&gt; c] </code>.</p><p>In case of property failure in one of the branches no following branch is
 executed.</p><p>Providing empty list of scenarios to this function causes error;
 we do not require <code><a href="../base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a></code> here though for convenience.</p></div></div><div class="top"><p class="src"><a id="v:-63--45-" class="def">(?-)</a> :: <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a> -&gt; a -&gt; (<a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a>, a) <span class="fixity">infixr 0</span><span class="rightedge"></span> <a href="src/Michelson.Test.Integrational.html#%3F-" class="link">Source</a> <a href="#v:-63--45-" class="selflink">#</a></p><div class="doc"><p>Make a tuple with name without extra syntactic noise.</p></div></div><div class="top"><p class="src"><a id="v:offshoot" class="def">offshoot</a> :: <a href="../morley-prelude-0.3.0/Prelude.html#t:Text" title="Prelude">Text</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenario" title="Michelson.Test.Integrational">IntegrationalScenario</a> -&gt; <a href="Michelson-Test-Integrational.html#t:IntegrationalScenarioM" title="Michelson.Test.Integrational">IntegrationalScenarioM</a> () <a href="src/Michelson.Test.Integrational.html#offshoot" class="link">Source</a> <a href="#v:offshoot" class="selflink">#</a></p><div class="doc"><p>Test given scenario with the state gathered till this moment;
 if this scenario passes, go on as if it never happened.</p></div></div><a href="#g:4" id="g:4"><h1>Validators</h1></a><div class="top"><p class="src"><a id="v:composeValidators" class="def">composeValidators</a> :: <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a> -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a> -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#composeValidators" class="link">Source</a> <a href="#v:composeValidators" class="selflink">#</a></p><div class="doc"><p>Compose two success validators.</p><p>For example:</p><p>expectBalance bal addr <code><a href="Michelson-Test-Integrational.html#v:composeValidators" title="Michelson.Test.Integrational">composeValidators</a></code>
 expectStorageUpdateConst addr2 ValueUnit</p></div></div><div class="top"><p class="src"><a id="v:composeValidatorsList" class="def">composeValidatorsList</a> :: [<a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a>] -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#composeValidatorsList" class="link">Source</a> <a href="#v:composeValidatorsList" class="selflink">#</a></p><div class="doc"><p>Compose a list of success validators.</p></div></div><div class="top"><p class="src"><a id="v:expectAnySuccess" class="def">expectAnySuccess</a> :: <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#expectAnySuccess" class="link">Source</a> <a href="#v:expectAnySuccess" class="selflink">#</a></p><div class="doc"><p><code><a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a></code> that always passes.</p></div></div><div class="top"><p class="src"><a id="v:expectNoUpdates" class="def">expectNoUpdates</a> :: <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#expectNoUpdates" class="link">Source</a> <a href="#v:expectNoUpdates" class="selflink">#</a></p><div class="doc"><p>Check that there were no updates.</p></div></div><div class="top"><p class="src"><a id="v:expectNoStorageUpdates" class="def">expectNoStorageUpdates</a> :: <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#expectNoStorageUpdates" class="link">Source</a> <a href="#v:expectNoStorageUpdates" class="selflink">#</a></p><div class="doc"><p>Check that there were no storage updates.</p></div></div><div class="top"><p class="src"><a id="v:expectStorageUpdate" class="def">expectStorageUpdate</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; (<a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> ()) -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#expectStorageUpdate" class="link">Source</a> <a href="#v:expectStorageUpdate" class="selflink">#</a></p><div class="doc"><p>Check that storage value is updated for given address. Takes a
 predicate that is used to check the value.</p><p>It works even if updates are not filtered (i. e. a value can be
 updated more than once).</p></div></div><div class="top"><p class="src"><a id="v:expectStorageUpdateConst" class="def">expectStorageUpdateConst</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#expectStorageUpdateConst" class="link">Source</a> <a href="#v:expectStorageUpdateConst" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Michelson-Test-Integrational.html#v:expectStorageUpdate" title="Michelson.Test.Integrational">expectStorageUpdate</a></code>, but expects a constant.</p></div></div><div class="top"><p class="src"><a id="v:expectBalance" class="def">expectBalance</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Tezos-Core.html#t:Mutez" title="Tezos.Core">Mutez</a> -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#expectBalance" class="link">Source</a> <a href="#v:expectBalance" class="selflink">#</a></p><div class="doc"><p>Check that eventually address has some particular balance.</p></div></div><div class="top"><p class="src"><a id="v:expectStorage" class="def">expectStorage</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; (<a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="../base-4.12.0.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Michelson-Test-Integrational.html#t:ValidationError" title="Michelson.Test.Integrational">ValidationError</a> ()) -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#expectStorage" class="link">Source</a> <a href="#v:expectStorage" class="selflink">#</a></p><div class="doc"><p>Check that storage value satisfies the given predicate.</p></div></div><div class="top"><p class="src"><a id="v:expectStorageConst" class="def">expectStorageConst</a> :: <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Untyped-Aliases.html#t:Value" title="Michelson.Untyped.Aliases">Value</a> -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#expectStorageConst" class="link">Source</a> <a href="#v:expectStorageConst" class="selflink">#</a></p><div class="doc"><p>Check that eventually address has some particular storage value.</p></div></div><div class="top"><p class="src"><a id="v:tExpectStorageConst" class="def">tExpectStorageConst</a> :: <span class="keyword">forall</span> st. <a href="Michelson-Typed-Scope.html#t:StorageScope" title="Michelson.Typed.Scope">StorageScope</a> st =&gt; <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Typed-Aliases.html#t:Value" title="Michelson.Typed.Aliases">Value</a> st -&gt; <a href="Michelson-Test-Integrational.html#t:SuccessValidator" title="Michelson.Test.Integrational">SuccessValidator</a> <a href="src/Michelson.Test.Integrational.html#tExpectStorageConst" class="link">Source</a> <a href="#v:tExpectStorageConst" class="selflink">#</a></p><div class="doc"><p>Similar to <code><a href="Michelson-Test-Integrational.html#v:expectStorageConst" title="Michelson.Test.Integrational">expectStorageConst</a></code>, for typed stuff.</p></div></div><div class="top"><p class="src"><a id="v:expectGasExhaustion" class="def">expectGasExhaustion</a> :: <a href="Michelson-Runtime.html#t:ExecutorError" title="Michelson.Runtime">ExecutorError</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Michelson.Test.Integrational.html#expectGasExhaustion" class="link">Source</a> <a href="#v:expectGasExhaustion" class="selflink">#</a></p><div class="doc"><p>Check that interpreter failed due to gas exhaustion.</p></div></div><div class="top"><p class="src"><a id="v:expectMichelsonFailed" class="def">expectMichelsonFailed</a> :: (<a href="Michelson-Interpret.html#t:MichelsonFailed" title="Michelson.Interpret">MichelsonFailed</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Tezos-Address.html#t:Address" title="Tezos.Address">Address</a> -&gt; <a href="Michelson-Runtime.html#t:ExecutorError" title="Michelson.Runtime">ExecutorError</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Michelson.Test.Integrational.html#expectMichelsonFailed" class="link">Source</a> <a href="#v:expectMichelsonFailed" class="selflink">#</a></p><div class="doc"><p>Expect that interpretation of contract with given address ended
 with [FAILED].</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>